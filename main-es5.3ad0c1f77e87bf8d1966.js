!function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function n(t,e,r){return(n=y()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&f(i,n.prototype),i}).apply(null,arguments)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=y();return function(){var n,r=g(t);if(e){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?v(t):e}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},"2Vo4":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("XNiG"),i=n("9ppp"),o=function(t){h(n,t);var e=d(n);function n(t){var r;return s(this,n),(r=e.call(this))._value=t,r}return c(n,[{key:"_subscribe",value:function(t){var e=l(g(n.prototype),"_subscribe",this).call(this,t);return e&&!e.closed&&t.next(this._value),e}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.a;return this._value}},{key:"next",value:function(t){l(g(n.prototype),"next",this).call(this,this._value=t)}},{key:"value",get:function(){return this.getValue()}}]),n}(r.a)},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i.pending=!1,i}return c(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}},{key:"requestAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(t.flush.bind(t,this),n)}},{key:"recycleAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}},{key:"execute",value:function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}]),n}(function(t){h(n,t);var e=d(n);function n(t,r){return s(this,n),e.call(this)}return c(n,[{key:"schedule",value:function(t){return this}}]),n}(n("quSY").a))},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?function(o){return o.pipe(a((function(n,o){return Object(i.a)(t(n,o)).pipe(Object(r.a)((function(t,r){return e(n,t,o,r)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new u(t,n))})}var u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;s(this,t),this.project=e,this.concurrent=n}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new l(t,this.project,this.concurrent))}}]),t}(),l=function(t){h(n,t);var e=d(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return s(this,n),(i=e.call(this,t)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return c(n,[{key:"_next",value:function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=new o.a(this),n=this.destination;n.add(e);var r=Object(o.c)(t,e);r!==e&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyComplete",value:function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(o.b)},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mAIw"),i=n("wj3C"),o=n("q/0M"),a=n("zVF4"),s=n("x7I3"),u=n("S+S0"),c=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(i),l={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},h=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return r.__extends(e,t),e}(Error),f=new o.Logger("@firebase/firestore");function d(){return f.logLevel}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(f.logLevel<=o.LogLevel.DEBUG){var i=e.map(g);f.debug.apply(f,r.__spreadArrays(["Firestore (7.20.0): "+t],i))}}function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(f.logLevel<=o.LogLevel.ERROR){var i=e.map(g);f.error.apply(f,r.__spreadArrays(["Firestore (7.20.0): "+t],i))}}function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(f.logLevel<=o.LogLevel.WARN){var i=e.map(g);f.warn.apply(f,r.__spreadArrays(["Firestore (7.20.0): "+t],i))}}function g(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(i){return t}}function m(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (7.20.0) INTERNAL ASSERTION FAILED: "+t;throw v(e),new Error(e)}function _(t,e){t||m()}function b(t,e){return t}function w(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function E(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function C(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var k=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&m(),void 0===n?n=t.length-e:n>t.length-e&&m(),this.segments=t,this.offset=e,this.t=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.i(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.o(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.u=function(t){return this.o(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},t.prototype.l=function(){return this.segments[this.offset]},t.prototype._=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.m=function(){return 0===this.length},t.prototype.T=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.I=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},t.i=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.o=function(t,n,r){return new e(t,n,r)},e.prototype.R=function(){return this.A().join("/")},e.prototype.toString=function(){return this.R()},e.P=function(t){if(t.indexOf("//")>=0)throw new h(l.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.g=function(){return new e([])},e}(k),T=/^[_a-zA-Z][_a-zA-Z0-9]*$/,I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.o=function(t,n,r){return new e(t,n,r)},e.V=function(t){return T.test(t)},e.prototype.R=function(){return this.A().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.V(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.R()},e.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},e.v=function(){return new e(["__name__"])},e.S=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new h(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new h(l.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new h(l.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new h(l.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.g=function(){return new e([])},e}(k),O=function(){function t(t){this.path=t}return t.D=function(e){return new t(S.P(e))},t.C=function(e){return new t(S.P(e).u(5))},t.prototype.N=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===S.i(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.i=function(t,e){return S.i(t.path,e.path)},t.F=function(t){return t.length%2==0},t.$=function(e){return new t(new S(e.slice()))},t}();function A(t,e){if(0!==e.length)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+G(e.length,"argument")+".")}function x(t,e,n){if(e.length!==n)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires "+G(n,"argument")+", but was called with "+G(e.length,"argument")+".")}function N(t,e,n){if(e.length<n)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires at least "+G(n,"argument")+", but was called with "+G(e.length,"argument")+".")}function P(t,e,n,r){if(e.length<n||e.length>r)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+G(e.length,"argument")+".")}function D(t,e,n,r){U(t,e,Q(n)+" argument",r)}function R(t,e,n,r){void 0!==r&&D(t,e,n,r)}function L(t,e,n,r){U(t,e,n+" option",r)}function j(t,e,n,r){void 0!==r&&L(t,e,n,r)}function F(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(q(u))}var c=q(r);throw new h(l.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function M(t,e,n,r){if(!e.some((function(t){return t===r})))throw new h(l.INVALID_ARGUMENT,"Invalid value "+q(r)+" provided to function "+t+"() for its "+Q(n)+" argument. Acceptable values: "+e.join(", "));return r}function U(t,e,n,r){if(!("object"===e?V(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=q(r);throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function V(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function q(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":m()}function H(t,e,n){if(void 0===n)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Q(e)+" argument, but it was undefined.")}function B(t,e,n){E(e,(function(e,r){if(n.indexOf(e)<0)throw new h(l.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function z(t,e,n,r){var i=q(r);return new h(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+Q(n)+" argument to be a "+e+", but it was: "+i)}function W(t,e,n){if(n<=0)throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+Q(e)+" argument to be a positive number, but it was: "+n+".")}function Q(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function G(t,e){return t+" "+e+(1===t?"":"s")}function K(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Y=function(){function t(){}return t.k=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=K(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function X(t,e){return t<e?-1:t>e?1:0}function Z(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function J(t){return t+"\0"}var $=function(){function t(t){this.M=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.M)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.M)},t.prototype.O=function(){return 2*this.M.length},t.prototype.L=function(t){return X(this.M,t.M)},t.prototype.isEqual=function(t){return this.M===t.M},t}();$.B=new $("");var tt=function(){function t(t){this.q=t}return t.fromBase64String=function(e){try{return new t($.fromBase64String(e))}catch(e){throw new h(l.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t($.fromUint8Array(e))},t.prototype.toBase64=function(){return this.q.toBase64()},t.prototype.toUint8Array=function(){return this.q.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.q.isEqual(t.q)},t}();function et(){if("undefined"==typeof Uint8Array)throw new h(l.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function nt(){if("undefined"==typeof atob)throw new h(l.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.fromBase64String=function(t){x("Blob.fromBase64String",arguments,1),D("Blob.fromBase64String","string",1,t),nt();try{return new e($.fromBase64String(t))}catch(t){throw new h(l.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){if(x("Blob.fromUint8Array",arguments,1),et(),!(t instanceof Uint8Array))throw z("Blob.fromUint8Array","Uint8Array",1,t);return new e($.fromUint8Array(t))},e.prototype.toBase64=function(){return x("Blob.toBase64",arguments,0),nt(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return x("Blob.toUint8Array",arguments,0),et(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(tt),it=function(t,e,n,r,i){this.U=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},ot=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"W",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.L=function(t){return X(this.projectId,t.projectId)||X(this.database,t.database)},t}(),at=function(){function t(t,e){this.j=t,this.K=e,this.G={}}return t.prototype.get=function(t){var e=this.j(t),n=this.G[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(this.K(o[0],t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.j(t),r=this.G[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.K(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.G[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.j(t),n=this.G[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.K(n[r][0],t))return 1===n.length?delete this.G[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){E(this.G,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.m=function(){return C(this.G)},t}(),st=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new h(l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new h(l.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new h(l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new h(l.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.H=function(t){return this.seconds===t.seconds?X(this.nanoseconds,t.nanoseconds):X(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ut=function(){function t(t){this.timestamp=t}return t.Y=function(e){return new t(e)},t.min=function(){return new t(new st(0,0))},t.prototype.L=function(t){return this.timestamp.H(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.J=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.X=function(){return this.timestamp},t}();function ct(t){return null==t}function lt(t){return-0===t&&1/t==-1/0}function ht(t){return"number"==typeof t&&Number.isInteger(t)&&!lt(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ft=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Z=null};function dt(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new ft(t,e,n,r,i,o,a)}function pt(t){var e=b(t);if(null===e.Z){var n=e.path.R();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.R()+t.op.toString()+ie(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.R()+e.dir;var e})).join(","),ct(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=sr(e.startAt)),e.endAt&&(n+="|ub:",n+=sr(e.endAt)),e.Z=n}return e.Z}function vt(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!fr(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!te(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cr(t.startAt,e.startAt)&&cr(t.endAt,e.endAt)}function yt(t){return O.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}var gt,mt,_t=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=ut.min()),void 0===o&&(o=ut.min()),void 0===a&&(a=$.B),this.target=t,this.targetId=e,this.tt=n,this.sequenceNumber=r,this.et=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.nt=function(e){return new t(this.target,this.targetId,this.tt,e,this.et,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.st=function(e,n){return new t(this.target,this.targetId,this.tt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.it=function(e){return new t(this.target,this.targetId,this.tt,this.sequenceNumber,this.et,e,this.resumeToken)},t}(),bt=function(t){this.count=t};function wt(t){switch(t){case l.OK:return m();case l.CANCELLED:case l.UNKNOWN:case l.DEADLINE_EXCEEDED:case l.RESOURCE_EXHAUSTED:case l.INTERNAL:case l.UNAVAILABLE:case l.UNAUTHENTICATED:return!1;case l.INVALID_ARGUMENT:case l.NOT_FOUND:case l.ALREADY_EXISTS:case l.PERMISSION_DENIED:case l.FAILED_PRECONDITION:case l.ABORTED:case l.OUT_OF_RANGE:case l.UNIMPLEMENTED:case l.DATA_LOSS:return!0;default:return m()}}function Et(t){if(void 0===t)return v("GRPC error has no .code"),l.UNKNOWN;switch(t){case gt.OK:return l.OK;case gt.CANCELLED:return l.CANCELLED;case gt.UNKNOWN:return l.UNKNOWN;case gt.DEADLINE_EXCEEDED:return l.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return l.RESOURCE_EXHAUSTED;case gt.INTERNAL:return l.INTERNAL;case gt.UNAVAILABLE:return l.UNAVAILABLE;case gt.UNAUTHENTICATED:return l.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return l.INVALID_ARGUMENT;case gt.NOT_FOUND:return l.NOT_FOUND;case gt.ALREADY_EXISTS:return l.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return l.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return l.FAILED_PRECONDITION;case gt.ABORTED:return l.ABORTED;case gt.OUT_OF_RANGE:return l.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return l.UNIMPLEMENTED;case gt.DATA_LOSS:return l.DATA_LOSS;default:return m()}}(mt=gt||(gt={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";var Ct=function(){function t(t,e){this.i=t,this.root=e||St.EMPTY}return t.prototype.rt=function(e,n){return new t(this.i,this.root.rt(e,n,this.i).copy(null,null,St.ot,null,null))},t.prototype.remove=function(e){return new t(this.i,this.root.remove(e,this.i).copy(null,null,St.ot,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.m();){var n=this.i(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.m();){var r=this.i(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.m=function(){return this.root.m()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.at=function(){return this.root.at()},t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(t){return this.root.ut(t)},t.prototype.forEach=function(t){this.ut((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ut((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.lt=function(){return new kt(this.root,null,this.i,!1)},t.prototype._t=function(t){return new kt(this.root,t,this.i,!1)},t.prototype.ft=function(){return new kt(this.root,null,this.i,!0)},t.prototype.dt=function(t){return new kt(this.root,t,this.i,!0)},t}(),kt=function(){function t(t,e,n,r){this.wt=r,this.Tt=[];for(var i=1;!t.m();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.wt?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.wt?t.right:t.left}}return t.prototype.Et=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.wt)for(t=t.left;!t.m();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.m();)this.Tt.push(t),t=t.left;return e},t.prototype.It=function(){return this.Tt.length>0},t.prototype.At=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),St=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.m=function(){return!1},t.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left.m()?this:this.left.min()},t.prototype.at=function(){return this.min().key},t.prototype.ct=function(){return this.right.m()?this.key:this.right.ct()},t.prototype.rt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.rt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.rt(t,e,n))).Rt()},t.prototype.Pt=function(){if(this.left.m())return t.EMPTY;var e=this;return e.left.gt()||e.left.left.gt()||(e=e.yt()),(e=e.copy(null,null,null,e.left.Pt(),null)).Rt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.m()||i.left.gt()||i.left.left.gt()||(i=i.yt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.gt()&&(i=i.Vt()),i.right.m()||i.right.gt()||i.right.left.gt()||(i=i.bt()),0===n(e,i.key)){if(i.right.m())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Pt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Rt()},t.prototype.gt=function(){return this.color},t.prototype.Rt=function(){var t=this;return t.right.gt()&&!t.left.gt()&&(t=t.vt()),t.left.gt()&&t.left.left.gt()&&(t=t.Vt()),t.left.gt()&&t.right.gt()&&(t=t.St()),t},t.prototype.yt=function(){var t=this.St();return t.right.left.gt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Vt())).vt()).St()),t},t.prototype.bt=function(){var t=this.St();return t.left.left.gt()&&(t=(t=t.Vt()).St()),t},t.prototype.vt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Vt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.St=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Dt=function(){var t=this.Ct();return Math.pow(2,t)<=this.size+1},t.prototype.Ct=function(){if(this.gt()&&this.left.gt())throw m();if(this.right.gt())throw m();var t=this.left.Ct();if(t!==this.right.Ct())throw m();return t+(this.gt()?0:1)},t}();St.EMPTY=null,St.RED=!0,St.ot=!1,St.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw m()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.rt=function(t,e,n){return new St(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.m=function(){return!0},t.prototype.ut=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.at=function(){return null},t.prototype.ct=function(){return null},t.prototype.gt=function(){return!1},t.prototype.Dt=function(){return!0},t.prototype.Ct=function(){return 0},t}());var Tt=function(){function t(t){this.i=t,this.data=new Ct(this.i)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.at()},t.prototype.last=function(){return this.data.ct()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ut((function(e,n){return t(e),!1}))},t.prototype.Nt=function(t,e){for(var n=this.data._t(t[0]);n.It();){var r=n.Et();if(this.i(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ft=function(t,e){var n;for(n=void 0!==e?this.data._t(e):this.data.lt();n.It();)if(!t(n.Et().key))return},t.prototype.$t=function(t){var e=this.data._t(t);return e.It()?e.Et().key:null},t.prototype.lt=function(){return new It(this.data.lt())},t.prototype._t=function(t){return new It(this.data._t(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).rt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.m=function(){return this.data.m()},t.prototype.xt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.lt(),r=e.data.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(0!==this.i(i,o))return!1}return!0},t.prototype.A=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.i);return n.data=e,n},t}(),It=function(){function t(t){this.kt=t}return t.prototype.Et=function(){return this.kt.Et().key},t.prototype.It=function(){return this.kt.It()},t}(),Ot=new Ct(O.i);function At(){return Ot}function xt(){return At()}var Nt=new Ct(O.i);function Pt(){return Nt}var Dt=new Ct(O.i),Rt=new Tt(O.i);function Lt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Rt,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var jt=new Tt(X);function Ft(){return jt}var Mt=function(){function t(t){this.i=t?function(e,n){return t(e,n)||O.i(e.key,n.key)}:function(t,e){return O.i(t.key,e.key)},this.Mt=Pt(),this.Ot=new Ct(this.i)}return t.Lt=function(e){return new t(e.i)},t.prototype.has=function(t){return null!=this.Mt.get(t)},t.prototype.get=function(t){return this.Mt.get(t)},t.prototype.first=function(){return this.Ot.at()},t.prototype.last=function(){return this.Ot.ct()},t.prototype.m=function(){return this.Ot.m()},t.prototype.indexOf=function(t){var e=this.Mt.get(t);return e?this.Ot.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ot.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ot.ut((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Mt.rt(t.key,t),e.Ot.rt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Mt.remove(t),this.Ot.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ot.lt(),r=e.Ot.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.i=this.i,r.Mt=e,r.Ot=n,r},t}(),Ut=function(){function t(){this.Bt=new Ct(O.i)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Bt.get(e);n?0!==t.type&&3===n.type?this.Bt=this.Bt.rt(e,t):3===t.type&&1!==n.type?this.Bt=this.Bt.rt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Bt=this.Bt.rt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Bt=this.Bt.remove(e):1===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):m():this.Bt=this.Bt.rt(e,t)},t.prototype.qt=function(){var t=[];return this.Bt.ut((function(e,n){t.push(n)})),t},t}(),Vt=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.Ut=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Wt=a,this.jt=s}return t.Kt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Mt.Lt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.m()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Wt===t.Wt&&this.Qt.isEqual(t.Qt)&&Qn(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ut.isEqual(t.Ut)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),qt=function(){function t(t,e,n,r,i){this.et=t,this.Gt=e,this.zt=n,this.Ht=r,this.Yt=i}return t.Jt=function(e,n){var r=new Map;return r.set(e,Ht.Xt(e,n)),new t(ut.min(),r,Ft(),At(),Lt())},t}(),Ht=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Zt=e,this.te=n,this.ee=r,this.ne=i}return t.Xt=function(e,n){return new t($.B,n,Lt(),Lt(),Lt())},t}(),Bt=function(t,e,n,r){this.se=t,this.removedTargetIds=e,this.key=n,this.ie=r},zt=function(t,e){this.targetId=t,this.re=e},Wt=function(t,e,n,r){void 0===n&&(n=$.B),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Qt=function(){function t(){this.oe=0,this.ae=Yt(),this.ce=$.B,this.ue=!1,this.he=!0}return Object.defineProperty(t.prototype,"Zt",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"le",{get:function(){return 0!==this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return this.he},enumerable:!1,configurable:!0}),t.prototype.fe=function(t){t.O()>0&&(this.he=!0,this.ce=t)},t.prototype.de=function(){var t=Lt(),e=Lt(),n=Lt();return this.ae.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:m()}})),new Ht(this.ce,this.ue,t,e,n)},t.prototype.we=function(){this.he=!1,this.ae=Yt()},t.prototype.me=function(t,e){this.he=!0,this.ae=this.ae.rt(t,e)},t.prototype.Te=function(t){this.he=!0,this.ae=this.ae.remove(t)},t.prototype.Ee=function(){this.oe+=1},t.prototype.Ie=function(){this.oe-=1},t.prototype.Ae=function(){this.he=!0,this.ue=!0},t}(),Gt=function(){function t(t){this.Re=t,this.Pe=new Map,this.ge=At(),this.ye=Kt(),this.Ve=new Tt(X)}return t.prototype.pe=function(t){for(var e=0,n=t.se;e<n.length;e++){var r=n[e];t.ie instanceof An?this.be(r,t.ie):t.ie instanceof xn&&this.ve(r,t.key,t.ie)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.ve(o[i],t.key,t.ie)},t.prototype.Se=function(t){var e=this;this.De(t,(function(n){var r=e.Ce(n);switch(t.state){case 0:e.Ne(n)&&r.fe(t.resumeToken);break;case 1:r.Ie(),r.le||r.we(),r.fe(t.resumeToken);break;case 2:r.Ie(),r.le||e.removeTarget(n);break;case 3:e.Ne(n)&&(r.Ae(),r.fe(t.resumeToken));break;case 4:e.Ne(n)&&(e.Fe(n),r.fe(t.resumeToken));break;default:m()}}))},t.prototype.De=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Pe.forEach((function(t,r){n.Ne(r)&&e(r)}))},t.prototype.$e=function(t){var e=t.targetId,n=t.re.count,r=this.xe(e);if(r){var i=r.target;if(yt(i))if(0===n){var o=new O(i.path);this.ve(e,o,new xn(o,ut.min()))}else _(1===n);else this.ke(e)!==n&&(this.Fe(e),this.Ve=this.Ve.add(e))}},t.prototype.Me=function(t){var e=this,n=new Map;this.Pe.forEach((function(r,i){var o=e.xe(i);if(o){if(r.Zt&&yt(o.target)){var a=new O(o.target.path);null!==e.ge.get(a)||e.Oe(i,a)||e.ve(i,a,new xn(a,t))}r._e&&(n.set(i,r.de()),r.we())}}));var r=Lt();this.ye.forEach((function(t,n){var i=!0;n.Ft((function(t){var n=e.xe(t);return!n||2===n.tt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new qt(t,n,this.Ve,this.ge,r);return this.ge=At(),this.ye=Kt(),this.Ve=new Tt(X),i},t.prototype.be=function(t,e){if(this.Ne(t)){var n=this.Oe(t,e.key)?2:0;this.Ce(t).me(e.key,n),this.ge=this.ge.rt(e.key,e),this.ye=this.ye.rt(e.key,this.Le(e.key).add(t))}},t.prototype.ve=function(t,e,n){if(this.Ne(t)){var r=this.Ce(t);this.Oe(t,e)?r.me(e,1):r.Te(e),this.ye=this.ye.rt(e,this.Le(e).delete(t)),n&&(this.ge=this.ge.rt(e,n))}},t.prototype.removeTarget=function(t){this.Pe.delete(t)},t.prototype.ke=function(t){var e=this.Ce(t).de();return this.Re.Be(t).size+e.te.size-e.ne.size},t.prototype.Ee=function(t){this.Ce(t).Ee()},t.prototype.Ce=function(t){var e=this.Pe.get(t);return e||(e=new Qt,this.Pe.set(t,e)),e},t.prototype.Le=function(t){var e=this.ye.get(t);return e||(e=new Tt(X),this.ye=this.ye.rt(t,e)),e},t.prototype.Ne=function(t){var e=null!==this.xe(t);return e||p("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.xe=function(t){var e=this.Pe.get(t);return e&&e.le?null:this.Re.qe(t)},t.prototype.Fe=function(t){var e=this;this.Pe.set(t,new Qt),this.Re.Be(t).forEach((function(n){e.ve(t,n,null)}))},t.prototype.Oe=function(t,e){return this.Re.Be(t).has(e)},t}();function Kt(){return new Ct(O.i)}function Yt(){return new Ct(O.i)}function Xt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zt(t){var e=oe(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}var Jt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $t(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xt(t)?4:10:m()}function te(t,e){var n=$t(t);if(n!==$t(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zt(t).isEqual(Zt(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=oe(t.timestampValue),r=oe(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return se(t.bytesValue).isEqual(se(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ae(t.geoPointValue.latitude)===ae(e.geoPointValue.latitude)&&ae(t.geoPointValue.longitude)===ae(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ae(t.integerValue)===ae(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ae(t.doubleValue),r=ae(e.doubleValue);return n===r?lt(n)===lt(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Z(t.arrayValue.values||[],e.arrayValue.values||[],te);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(w(n)!==w(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!te(n[i],r[i])))return!1;return!0}(t,e);default:return m()}}function ee(t,e){return void 0!==(t.values||[]).find((function(t){return te(t,e)}))}function ne(t,e){var n=$t(t),r=$t(e);if(n!==r)return X(n,r);switch(n){case 0:return 0;case 1:return X(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ae(t.integerValue||t.doubleValue),r=ae(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return re(t.timestampValue,e.timestampValue);case 4:return re(Zt(t),Zt(e));case 5:return X(t.stringValue,e.stringValue);case 6:return function(t,e){var n=se(t),r=se(e);return n.L(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=X(n[i],r[i]);if(0!==o)return o}return X(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=X(ae(t.latitude),ae(e.latitude));return 0!==n?n:X(ae(t.longitude),ae(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ne(n[i],r[i]);if(o)return o}return X(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=X(r[a],o[a]);if(0!==s)return s;var u=ne(n[r[a]],i[o[a]]);if(0!==u)return u}return X(r.length,o.length)}(t.mapValue,e.mapValue);default:throw m()}}function re(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return X(t,e);var n=oe(t),r=oe(e),i=X(n.seconds,r.seconds);return 0!==i?i:X(n.nanos,r.nanos)}function ie(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=oe(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?se(e.bytesValue).toBase64():"referenceValue"in e?O.C(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):m();var n}(t)}function oe(t){if(_(!!t),"string"==typeof t){var e=0,n=Jt.exec(t);if(_(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ae(t.seconds),nanos:ae(t.nanos)}}function ae(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function se(t){return"string"==typeof t?$.fromBase64String(t):$.fromUint8Array(t)}function ue(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.R()}}function ce(t){return!!t&&"integerValue"in t}function le(t){return!!t&&"arrayValue"in t}function he(t){return!!t&&"nullValue"in t}function fe(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function de(t){return!!t&&"mapValue"in t}var pe={asc:"ASCENDING",desc:"DESCENDING"},ve={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ye=function(t,e){this.U=t,this.Ue=e};function ge(t){return{integerValue:""+t}}function me(t,e){if(t.Ue){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lt(e)?"-0":e}}function _e(t,e){return ht(e)?ge(e):me(t,e)}function be(t,e){return t.Ue?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function we(t,e){return t.Ue?e.toBase64():e.toUint8Array()}function Ee(t,e){return be(t,e.X())}function Ce(t){return _(!!t),ut.Y(function(t){var e=oe(t);return new st(e.seconds,e.nanos)}(t))}function ke(t,e){return function(t){return new S(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).R()}function Se(t){var e=S.P(t);return _(Qe(e)),e}function Te(t,e){return ke(t.U,e.path)}function Ie(t,e){var n=Se(e);return _(n.get(1)===t.U.projectId),_(!n.get(3)&&!t.U.database||n.get(3)===t.U.database),new O(Ne(n))}function Oe(t,e){return ke(t.U,e)}function Ae(t){var e=Se(t);return 4===e.length?S.g():Ne(e)}function xe(t){return new S(["projects",t.U.projectId,"databases",t.U.database]).R()}function Ne(t){return _(t.length>4&&"documents"===t.get(4)),t.u(5)}function Pe(t,e,n){return{name:Te(t,e),fields:n.proto.mapValue.fields}}function De(t,e){var n;if(e instanceof gn)n={update:Pe(t,e.key,e.value)};else if(e instanceof Cn)n={delete:Te(t,e.key)};else if(e instanceof mn)n={update:Pe(t,e.key,e.data),updateMask:We(e.Qe)};else if(e instanceof bn)n={transform:{document:Te(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ze)return{fieldPath:e.field.R(),setToServerValue:"REQUEST_TIME"};if(n instanceof Je)return{fieldPath:e.field.R(),appendMissingElements:{values:n.elements}};if(n instanceof tn)return{fieldPath:e.field.R(),removeAllFromArray:{values:n.elements}};if(n instanceof nn)return{fieldPath:e.field.R(),increment:n.We};throw m()}(0,t)}))}};else{if(!(e instanceof kn))return m();n={verify:Te(t,e.key)}}return e.Ke.je||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ee(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:m()}(t,e.Ke)),n}function Re(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?cn.updateTime(Ce(t.updateTime)):void 0!==t.exists?cn.exists(t.exists):cn.Ge()}(e.currentDocument):cn.Ge();if(e.update){var r=Ie(t,e.update.name),i=new Sn({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new an((t.fieldPaths||[]).map((function(t){return I.S(t)})))}(e.updateMask);return new mn(r,i,o,n)}return new gn(r,i,n)}if(e.delete){var a=Ie(t,e.delete);return new Cn(a,n)}if(e.transform){var s=Ie(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(_("REQUEST_TIME"===e.setToServerValue),n=new Ze):"appendMissingElements"in e?n=new Je(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new tn(e.removeAllFromArray.values||[]):"increment"in e?n=new nn(t,e.increment):m();var r=I.S(e.fieldPath);return new sn(r,n)}(t,e)}));return _(!0===n.exists),new bn(s,u)}if(e.verify){var c=Ie(t,e.verify);return new kn(c,n)}return m()}function Le(t,e){return{documents:[Oe(t,e.path)]}}function je(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Oe(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Oe(t,r.h()),n.structuredQuery.from=[{collectionId:r._()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(fe(t.value))return{unaryFilter:{field:qe(t.field),op:"IS_NAN"}};if(he(t.value))return{unaryFilter:{field:qe(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(fe(t.value))return{unaryFilter:{field:qe(t.field),op:"IS_NOT_NAN"}};if(he(t.value))return{unaryFilter:{field:qe(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qe(t.field),op:Ve(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:qe(t.field),direction:Ue(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.Ue||ct(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Fe(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Fe(e.endAt)),n}function Fe(t){return{before:t.before,values:t.position}}function Me(t){return new ar(t.values||[],!!t.before)}function Ue(t){return pe[t]}function Ve(t){return ve[t]}function qe(t){return{fieldPath:t.R()}}function He(t){return I.S(t.fieldPath)}function Be(t){return Zn.create(He(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return m()}}(t.fieldFilter.op),t.fieldFilter.value)}function ze(t){switch(t.unaryFilter.op){case"IS_NAN":var e=He(t.unaryFilter.field);return Zn.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=He(t.unaryFilter.field);return Zn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=He(t.unaryFilter.field);return Zn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=He(t.unaryFilter.field);return Zn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return m()}}function We(t){var e=[];return t.fields.forEach((function(t){return e.push(t.R())})),{fieldPaths:e}}function Qe(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Ge=function(){this.ze=void 0};function Ke(t,e,n){return t instanceof Ze?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Je?$e(t,e):t instanceof tn?en(t,e):function(t,e){var n=Xe(t,e),r=rn(n)+rn(t.We);return ce(n)&&ce(t.We)?ge(r):me(t.serializer,r)}(t,e)}function Ye(t,e,n){return t instanceof Je?$e(t,e):t instanceof tn?en(t,e):n}function Xe(t,e){return t instanceof nn?ce(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ze=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e}(Ge),Je=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return r.__extends(e,t),e}(Ge);function $e(t,e){for(var n=on(e),r=function(t){n.some((function(e){return te(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var tn=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return r.__extends(e,t),e}(Ge);function en(t,e){for(var n=on(e),r=function(t){n=n.filter((function(e){return!te(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var nn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.We=n,r}return r.__extends(e,t),e}(Ge);function rn(t){return ae(t.integerValue||t.doubleValue)}function on(t){return le(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var an=function(){function t(t){this.fields=t,t.sort(I.i)}return t.prototype.He=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].T(t))return!0;return!1},t.prototype.isEqual=function(t){return Z(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),sn=function(t,e){this.field=t,this.transform=e},un=function(t,e){this.version=t,this.transformResults=e},cn=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Ge=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"je",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ln(t,e){return void 0!==t.updateTime?e instanceof An&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof An}var hn=function(){};function fn(t,e,n){return t instanceof gn?function(t,e,n){return new An(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof mn?function(t,e,n){if(!ln(t.Ke,e))return new Nn(t.key,n.version);var r=_n(t,e);return new An(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof bn?function(t,e,n){if(_(null!=n.transformResults),!ln(t.Ke,e))return new Nn(t.key,n.version);var r=wn(0,e),i=function(t,e,n){var r=[];_(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=null;e instanceof An&&(s=e.field(o.field)),r.push(Ye(a,s,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,a=En(t,r.data(),i);return new An(t.key,o,a,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new xn(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function dn(t,e,n,r){return t instanceof gn?function(t,e){if(!ln(t.Ke,e))return e;var n=yn(e);return new An(t.key,n,t.value,{Ye:!0})}(t,e):t instanceof mn?function(t,e){if(!ln(t.Ke,e))return e;var n=yn(e),r=_n(t,e);return new An(t.key,n,r,{Ye:!0})}(t,e):t instanceof bn?function(t,e,n,r){if(!ln(t.Ke,e))return e;var i=wn(0,e),o=function(t,e,n,r){for(var i=[],o=0,a=t;o<a.length;o++){var s=a[o],u=s.transform,c=null;n instanceof An&&(c=n.field(s.field)),null===c&&r instanceof An&&(c=r.field(s.field)),i.push(Ke(u,c,e))}return i}(t.fieldTransforms,n,e,r),a=En(t,i.data(),o);return new An(t.key,i.version,a,{Ye:!0})}(t,e,r,n):function(t,e){return ln(t.Ke,e)?new xn(t.key,ut.min()):e}(t,e)}function pn(t,e){return t instanceof bn?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e instanceof An?e.field(o.field):void 0,s=Xe(o.transform,a||null);null!=s&&(n=null==n?(new Tn).set(o.field,s):n.set(o.field,s))}return n?n.Je():null}(t,e):null}function vn(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ke.isEqual(e.Ke)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||Z(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Je&&e instanceof Je||t instanceof tn&&e instanceof tn?Z(t.elements,e.elements,te):t instanceof nn&&e instanceof nn?te(t.We,e.We):t instanceof Ze&&e instanceof Ze}(t.transform,e.transform)}(t,e)})))}function yn(t){return t instanceof An?t.version:ut.min()}var gn=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ke=r,i.type=0,i}return r.__extends(e,t),e}(hn),mn=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=r,o.Ke=i,o.type=1,o}return r.__extends(e,t),e}(hn);function _n(t,e){return function(t,e){var n=new Tn(e);return t.Qe.fields.forEach((function(e){if(!e.m()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Je()}(t,e instanceof An?e.data():Sn.empty())}var bn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ke=cn.exists(!0),r}return r.__extends(e,t),e}(hn);function wn(t,e){return e}function En(t,e,n){for(var r=new Tn(e),i=0;i<t.fieldTransforms.length;i++)r.set(t.fieldTransforms[i].field,n[i]);return r.Je()}var Cn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ke=n,r.type=3,r}return r.__extends(e,t),e}(hn),kn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ke=n,r.type=4,r}return r.__extends(e,t),e}(hn),Sn=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.m())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!de(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t._()])||null},t.prototype.isEqual=function(t){return te(this.proto,t.proto)},t}(),Tn=function(){function t(t){void 0===t&&(t=Sn.empty()),this.Xe=t,this.Ze=new Map}return t.prototype.set=function(t,e){return this.tn(t,e),this},t.prototype.delete=function(t){return this.tn(t,null),this},t.prototype.tn=function(t,e){for(var n=this.Ze,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===$t(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t._(),e)},t.prototype.Je=function(){var t=this.en(I.g(),this.Ze);return null!=t?new Sn(t):this.Xe},t.prototype.en=function(t,e){var n=this,r=!1,i=this.Xe.field(t),o=de(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var a=n.en(t.child(i),e);null!=a&&(o[i]=a,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function In(t){var e=[];return E(t.fields||{},(function(t,n){var r=new I([t]);if(de(n)){var i=In(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++)e.push(r.child(a[o]))}else e.push(r)})),new an(e)}var On=function(t,e){this.key=t,this.version=e},An=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).nn=r,o.Ye=!!i.Ye,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return r.__extends(e,t),e.prototype.field=function(t){return this.nn.field(t)},e.prototype.data=function(){return this.nn},e.prototype.sn=function(){return this.nn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ye===t.Ye&&this.hasCommittedMutations===t.hasCommittedMutations&&this.nn.isEqual(t.nn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.nn.toString()+", {hasLocalMutations: "+this.Ye+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ye||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(On),xn=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return r.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(On),Nn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(On);function Pn(t,e){if(!(t instanceof e))throw new h(l.INVALID_ARGUMENT,e.name===t.constructor.name?"Type does not match the expected instance. Did you pass '"+e.name+"' from a different Firestore SDK?":"Expected type '"+e.name+"', but was '"+t.constructor.name+"'");return t}var Dn=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.rn=n,this.filters=r,this.limit=i,this.on=o,this.startAt=a,this.endAt=s,this.an=null,this.cn=null};function Rn(t,e,n,r,i,o,a,s){return new Dn(t,e,n,r,i,o,a,s)}function Ln(t){return new Dn(t)}function jn(t){return!ct(t.limit)&&"F"===t.on}function Fn(t){return!ct(t.limit)&&"L"===t.on}function Mn(t){return t.rn.length>0?t.rn[0].field:null}function Un(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.un())return r.field}return null}function Vn(t){return null!==t.collectionGroup}function qn(t){var e=Pn(t,Dn);if(null===e.an){e.an=[];var n=Un(e),r=Mn(e);if(null!==n&&null===r)n.p()||e.an.push(new lr(n)),e.an.push(new lr(I.v(),"asc"));else{for(var i=!1,o=0,a=e.rn;o<a.length;o++){var s=a[o];e.an.push(s),s.field.p()&&(i=!0)}if(!i){var u=e.rn.length>0?e.rn[e.rn.length-1].dir:"asc";e.an.push(new lr(I.v(),u))}}}return e.an}function Hn(t){var e=Pn(t,Dn);if(!e.cn)if("F"===e.on)e.cn=dt(e.path,e.collectionGroup,qn(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=qn(e);r<i.length;r++){var o=i[r];n.push(new lr(o.field,"desc"===o.dir?"asc":"desc"))}var a=e.endAt?new ar(e.endAt.position,!e.endAt.before):null,s=e.startAt?new ar(e.startAt.position,!e.startAt.before):null;e.cn=dt(e.path,e.collectionGroup,n,e.filters,e.limit,a,s)}return e.cn}function Bn(t,e,n){return new Dn(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zn(t,e){return new Dn(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.on,e,t.endAt)}function Wn(t,e){return new Dn(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.on,t.startAt,e)}function Qn(t,e){return vt(Hn(t),Hn(e))&&t.on===e.on}function Gn(t){return pt(Hn(t))+"|lt:"+t.on}function Kn(t){return"Query(target="+function(t){var e=t.path.R();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.R()+" "+e.op+" "+ie(e.value);var e})).join(", ")+"]"),ct(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.R()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+sr(t.startAt)),t.endAt&&(e+=", endAt: "+sr(t.endAt)),"Target("+e+")"}(Hn(t))+"; limitType="+t.on+")"}function Yn(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.N(t.collectionGroup)&&t.path.T(n):O.F(t.path)?t.path.isEqual(n):t.path.I(n)}(t,e)&&function(t,e){for(var n=0,r=t.rn;n<r.length;n++){var i=r[n];if(!i.field.p()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ur(t.startAt,qn(t),e)||t.endAt&&ur(t.endAt,qn(t),e))}(t,e)}function Xn(t){return function(e,n){for(var r=!1,i=0,o=qn(t);i<o.length;i++){var a=o[i],s=hr(a,e,n);if(0!==s)return s;r=r||a.field.p()}return 0}}var Zn=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return r.__extends(e,t),e.create=function(t,n,r){if(t.p())return"in"===n||"not-in"===n?this.hn(t,n,r):new Jn(t,n,r);if(he(r)){if("=="!==n&&"!="!==n)throw new h(l.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(fe(r)){if("=="!==n&&"!="!==n)throw new h(l.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return"array-contains"===n?new nr(t,r):"in"===n?new rr(t,r):"not-in"===n?new ir(t,r):"array-contains-any"===n?new or(t,r):new e(t,n,r)},e.hn=function(t,e,n){return"in"===e?new $n(t,n):new tr(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.ln(ne(e,this.value)):null!==e&&$t(this.value)===$t(e)&&this.ln(ne(e,this.value))},e.prototype.ln=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return m()}},e.prototype.un=function(){return["<","<=",">",">=","!="].indexOf(this.op)>=0},e}((function(){})),Jn=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=O.C(r.referenceValue),i}return r.__extends(e,t),e.prototype.matches=function(t){var e=O.i(t.key,this.key);return this.ln(e)},e}(Zn),$n=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=er(0,n),r}return r.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Zn),tr=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=er(0,n),r}return r.__extends(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Zn);function er(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return O.C(t.referenceValue)}))}var nr=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return le(e)&&ee(e.arrayValue,this.value)},e}(Zn),rr=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ee(this.value.arrayValue,e)},e}(Zn),ir=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&!ee(this.value.arrayValue,e)},e}(Zn),or=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!le(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ee(e.value.arrayValue,t)}))},e}(Zn),ar=function(t,e){this.position=t,this.before=e};function sr(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ie(t)})).join(",")}function ur(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.p()?O.i(O.C(a.referenceValue),n.key):ne(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function cr(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!te(t.position[n],e.position[n]))return!1;return!0}var lr=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function hr(t,e,n){var r=t.field.p()?O.i(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ne(r,i):m()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return m()}}function fr(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var dr=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},pr=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this._n=t,this.fn=e,this.dn=n,this.wn=r,this.mn=i,this.Tn=0,this.En=null,this.In=Date.now(),this.reset()}return t.prototype.reset=function(){this.Tn=0},t.prototype.An=function(){this.Tn=this.mn},t.prototype.Rn=function(t){var e=this;this.cancel();var n=Math.floor(this.Tn+this.Pn()),r=Math.max(0,Date.now()-this.In),i=Math.max(0,n-r);i>0&&p("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Tn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.En=this._n.gn(this.fn,i,(function(){return e.In=Date.now(),t()})),this.Tn*=this.wn,this.Tn<this.dn&&(this.Tn=this.dn),this.Tn>this.mn&&(this.Tn=this.mn)},t.prototype.yn=function(){null!==this.En&&(this.En.Vn(),this.En=null)},t.prototype.cancel=function(){null!==this.En&&(this.En.cancel(),this.En=null)},t.prototype.Pn=function(){return(Math.random()-.5)*this.Tn},t}(),vr=function(){function t(t){var e=this;this.pn=null,this.bn=null,this.result=void 0,this.error=void 0,this.vn=!1,this.Sn=!1,t((function(t){e.vn=!0,e.result=t,e.pn&&e.pn(t)}),(function(t){e.vn=!0,e.error=t,e.bn&&e.bn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Sn&&m(),this.Sn=!0,this.vn?this.error?this.Dn(n,this.error):this.Cn(e,this.result):new t((function(t,i){r.pn=function(n){r.Cn(e,n).next(t,i)},r.bn=function(e){r.Dn(n,e).next(t,i)}}))},t.prototype.Nn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Fn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Cn=function(e,n){return e?this.Fn((function(){return e(n)})):t.resolve(n)},t.prototype.Dn=function(e,n){return e?this.Fn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.xn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),yr=function(){function t(e,n,r){this.name=e,this.version=n,this.kn=r,12.2===t.Mn(a.getUA())&&v("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return p("SimpleDb","Removing database:",t),Er(window.indexedDB.deleteDatabase(t)).Nn()},t.On=function(){if("undefined"==typeof indexedDB)return!1;if(t.Ln())return!0;var e=a.getUA(),n=t.Mn(e),r=0<n&&n<10,i=t.Bn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Ln=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.qn)},t.Un=function(t,e){return t.store(e)},t.Mn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Bn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Qn=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){switch(n.label){case 0:return this.db?[3,2]:(p("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,n){var r=indexedDB.open(e.name,e.version);r.onsuccess=function(e){t(e.target.result)},r.onblocked=function(){n(new mr("Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){var e=t.target.error;n("VersionError"===e.name?new h(l.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new mr(e))},r.onupgradeneeded=function(t){p("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',t.oldVersion),e.kn.createOrUpgrade(t.target.result,r.transaction,t.oldVersion,e.version).next((function(){p("SimpleDb","Database upgrade to version "+e.version+" complete")}))}}))]);case 1:t.db=n.sent(),n.label=2;case 2:return[2,(this.Wn&&(this.db.onversionchange=function(t){return e.Wn(t)}),this.db)]}}))}))},t.prototype.jn=function(t){this.Wn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,u;return r.__generator(this,(function(c){switch(c.label){case 0:i="readonly"===t,o=0,a=function(){var t,a,u,c,l;return r.__generator(this,(function(r){switch(r.label){case 0:++o,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,s.Qn()];case 2:return s.db=r.sent(),t=br.open(s.db,i?"readonly":"readwrite",e),a=n(t).catch((function(e){return t.abort(e),vr.reject(e)})).Nn(),u={},a.catch((function(){})),[4,t.Kn];case 3:return[2,(u.value=(r.sent(),a),u)];case 4:return p("SimpleDb","Transaction failed with error: %s. Retrying: %s.",(c=r.sent()).message,l="FirebaseError"!==c.name&&o<3),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),gr=function(){function t(t){this.Gn=t,this.zn=!1,this.Hn=null}return Object.defineProperty(t.prototype,"vn",{get:function(){return this.zn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Yn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Gn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.zn=!0},t.prototype.Jn=function(t){this.Hn=t},t.prototype.delete=function(){return Er(this.Gn.delete())},t}(),mr=function(t){function e(e){var n=this;return(n=t.call(this,l.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return r.__extends(e,t),e}(h);function _r(t){return"IndexedDbTransactionError"===t.name}var br=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.Xn=new dr,this.transaction.oncomplete=function(){e.Xn.resolve()},this.transaction.onabort=function(){t.error?e.Xn.reject(new mr(t.error)):e.Xn.resolve()},this.transaction.onerror=function(t){var n=kr(t.target.error);e.Xn.reject(new mr(n))}}return t.open=function(e,n,r){try{return new t(e.transaction(r,n))}catch(e){throw new mr(e)}},Object.defineProperty(t.prototype,"Kn",{get:function(){return this.Xn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Xn.reject(t),this.aborted||(p("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new wr(e)},t}(),wr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(p("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(p("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Er(n)},t.prototype.add=function(t){return p("SimpleDb","ADD",this.store.name,t,t),Er(this.store.add(t))},t.prototype.get=function(t){var e=this;return Er(this.store.get(t)).next((function(n){return void 0===n&&(n=null),p("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return p("SimpleDb","DELETE",this.store.name,t),Er(this.store.delete(t))},t.prototype.count=function(){return p("SimpleDb","COUNT",this.store.name),Er(this.store.count())},t.prototype.Zn=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.ts(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.es=function(t,e){p("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ns=!1;var r=this.cursor(n);return this.ts(r,(function(t,e,n){return n.delete()}))},t.prototype.ss=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.ts(r,e)},t.prototype.rs=function(t){var e=this.cursor({});return new vr((function(n,r){e.onerror=function(t){var e=kr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.ts=function(t,e){var n=[];return new vr((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new gr(i),a=e(i.primaryKey,i.value,o);if(a instanceof vr){var s=a.catch((function(t){return o.done(),vr.reject(t)}));n.push(s)}o.vn?r():null===o.Yn?i.continue():i.continue(o.Yn)}else r()}})).next((function(){return vr.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ns?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Er(t){return new vr((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=kr(t.target.error);n(e)}}))}var Cr=!1;function kr(t){var e=yr.Mn(a.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new h("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Cr||(Cr=!0,setTimeout((function(){throw r}),0)),r}}return t}function Sr(){return"undefined"!=typeof window?window:null}function Tr(){return"undefined"!=typeof document?document:null}var Ir=function(){function t(t,e,n,r,i){this.os=t,this.fn=e,this.cs=n,this.op=r,this.us=i,this.hs=new dr,this.then=this.hs.promise.then.bind(this.hs.promise),this.hs.promise.catch((function(t){}))}return t.ls=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this._s=setTimeout((function(){return e.fs()}),t)},t.prototype.Vn=function(){return this.fs()},t.prototype.cancel=function(t){null!==this._s&&(this.clearTimeout(),this.hs.reject(new h(l.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.fs=function(){var t=this;this.os.ds((function(){return null!==t._s?(t.clearTimeout(),t.op().then((function(e){return t.hs.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this._s&&(this.us(this),clearTimeout(this._s),this._s=null)},t}(),Or=function(){function t(){var t=this;this.ws=Promise.resolve(),this.Ts=[],this.Es=!1,this.Is=[],this.As=null,this.Rs=!1,this.Ps=[],this.gs=new pr(this,"async_queue_retry"),this.ys=function(){var e=Tr();e&&p("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.gs.yn()};var e=Tr();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.ys)}return Object.defineProperty(t.prototype,"Vs",{get:function(){return this.Es},enumerable:!1,configurable:!0}),t.prototype.ds=function(t){this.enqueue(t)},t.prototype.ps=function(t){this.bs(),this.vs(t)},t.prototype.Ss=function(){if(!this.Es){this.Es=!0;var t=Tr();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ys)}},t.prototype.enqueue=function(t){return this.bs(),this.Es?new Promise((function(t){})):this.vs(t)},t.prototype.Ds=function(t){var e=this;this.Ts.push(t),this.ds((function(){return e.Cs()}))},t.prototype.Cs=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(0===this.Ts.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Ts[0]()];case 2:return n.sent(),this.Ts.shift(),this.gs.reset(),[3,4];case 3:if(!_r(t=n.sent()))throw t;return p("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Ts.length>0&&this.gs.Rn((function(){return e.Cs()})),n.label=5;case 5:return[2]}}))}))},t.prototype.vs=function(t){var e=this,n=this.ws.then((function(){return e.Rs=!0,t().catch((function(t){throw e.As=t,e.Rs=!1,v("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Rs=!1,t}))}));return this.ws=n,n},t.prototype.gn=function(t,e,n){var r=this;this.bs(),this.Ps.indexOf(t)>-1&&(e=0);var i=Ir.ls(this,t,e,n,(function(t){return r.Ns(t)}));return this.Is.push(i),i},t.prototype.bs=function(){this.As&&m()},t.prototype.Fs=function(){},t.prototype.$s=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.ws];case 1:e.sent(),e.label=2;case 2:if(t!==this.ws)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.xs=function(t){for(var e=0,n=this.Is;e<n.length;e++)if(n[e].fn===t)return!0;return!1},t.prototype.ks=function(t){var e=this;return this.$s().then((function(){e.Is.sort((function(t,e){return t.cs-e.cs}));for(var n=0,r=e.Is;n<r.length;n++){var i=r[n];if(i.Vn(),"all"!==t&&i.fn===t)break}return e.$s()}))},t.prototype.Ms=function(t){this.Ps.push(t)},t.prototype.Ns=function(t){var e=this.Is.indexOf(t);this.Is.splice(e,1)},t}();function Ar(t,e){if(v("AsyncQueue",e+": "+t),_r(t))return new h(l.UNAVAILABLE,e+": "+t);throw t}var xr=function(){this.Os=void 0,this.listeners=[]},Nr=function(){this.Ls=new at((function(t){return Gn(t)}),Qn),this.onlineState="Unknown",this.Bs=new Set};function Pr(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:if(n=b(t),o=!1,(a=n.Ls.get(i=e.query))||(o=!0,a=new xr),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),s=a,[4,n.qs(i)];case 2:return s.Os=r.sent(),[3,4];case 3:return u=r.sent(),c=Ar(u,"Initialization of query '"+Kn(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.Ls.set(i,a),a.listeners.push(e),e.Us(n.onlineState),a.Os&&e.Qs(a.Os)&&Fr(n),[2]}}))}))}function Dr(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s;return r.__generator(this,(function(r){return n=b(t),o=!1,(a=n.Ls.get(i=e.query))&&(s=a.listeners.indexOf(e))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),o?[2,(n.Ls.delete(i),n.Ws(i))]:[2]}))}))}function Rr(t,e){for(var n=b(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=n.Ls.get(a.query);if(s){for(var u=0,c=s.listeners;u<c.length;u++)c[u].Qs(a)&&(r=!0);s.Os=a}}r&&Fr(n)}function Lr(t,e,n){var r=b(t),i=r.Ls.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.Ls.delete(e)}function jr(t,e){var n=b(t);n.onlineState=e;var r=!1;n.Ls.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Us(e)&&(r=!0)})),r&&Fr(n)}function Fr(t){t.Bs.forEach((function(t){t.next()}))}var Mr=function(){function t(t,e,n){this.query=t,this.js=e,this.Ks=!1,this.Gs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Vt(t.query,t.docs,t.Ut,e,t.Qt,t.fromCache,t.Wt,!0)}var o=!1;return this.Ks?this.zs(t)&&(this.js.next(t),o=!0):this.Hs(t,this.onlineState)&&(this.Ys(t),o=!0),this.Gs=t,o},t.prototype.onError=function(t){this.js.error(t)},t.prototype.Us=function(t){this.onlineState=t;var e=!1;return this.Gs&&!this.Ks&&this.Hs(this.Gs,t)&&(this.Ys(this.Gs),e=!0),e},t.prototype.Hs=function(t,e){return!t.fromCache||!(this.options.Js&&"Offline"!==e||t.docs.m()&&"Offline"!==e)},t.prototype.zs=function(t){return t.docChanges.length>0||!!(t.Wt||this.Gs&&this.Gs.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.Ys=function(t){t=Vt.Kt(t.query,t.docs,t.Qt,t.fromCache),this.Ks=!0,this.js.next(t)},t}(),Ur=function(){function t(t){this.uid=t}return t.prototype.Xs=function(){return null!=this.uid},t.prototype.Zs=function(){return this.Xs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Ur.UNAUTHENTICATED=new Ur(null),Ur.ti=new Ur("google-credentials-uid"),Ur.ei=new Ur("first-party-uid");var Vr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.ni=function(t){return n.si(t)},this.ii=function(t){return e.ri(t)})}return t.prototype.si=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.ii&&this.ii(t),t},t}();function qr(t,e){return"firestore_clients_"+t+"_"+e}function Hr(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Xs()&&(r+="_"+e.uid),r}function Br(t,e){return"firestore_targets_"+t+"_"+e}Vr.oi=-1;var zr=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ai=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new h(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(v("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wr=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ai=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new h(r.error.code,r.error.message)),i?new t(e,r.state,o):(v("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Qr=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ai=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ft(),a=0;i&&a<r.activeTargetIds.length;++a)i=ht(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(v("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Gr=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ai=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(v("SharedClientState","Failed to parse online state: "+e),null)},t}(),Kr=function(){function t(){this.activeTargetIds=Ft()}return t.prototype.ui=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.hi=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ci=function(){var t={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Yr=function(){function t(t,e,n,r,i){this.window=t,this._n=e,this.persistenceKey=n,this.li=r,this._i=null,this.fi=null,this.ni=null,this.di=this.wi.bind(this),this.mi=new Ct(X),this.Ti=!1,this.Ei=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ii=qr(this.persistenceKey,this.li),this.Ai=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.mi=this.mi.rt(this.li,new Kr),this.Ri=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.gi=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.yi=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.di)}return t.On=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e,n,i,o,a,s,u,c,l,h=this;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._i.Vi()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this.li&&(o=this.getItem(qr(this.persistenceKey,i)))&&(a=Qr.ai(i,o))&&(this.mi=this.mi.rt(a.clientId,a));for(this.pi(),(s=this.storage.getItem(this.yi))&&(u=this.bi(s))&&this.vi(u),c=0,l=this.Ei;c<l.length;c++)this.wi(l[c]);return this.Ei=[],this.window.addEventListener("unload",(function(){return h.Si()})),this.Ti=!0,[2]}}))}))},t.prototype.ri=function(t){this.setItem(this.Ai,JSON.stringify(t))},t.prototype.Di=function(){return this.Ci(this.mi)},t.prototype.Ni=function(t){var e=!1;return this.mi.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Fi=function(t){this.$i(t,"pending")},t.prototype.xi=function(t,e,n){this.$i(t,e,n),this.ki(t)},t.prototype.Mi=function(t){var e="not-current";if(this.Ni(t)){var n=this.storage.getItem(Br(this.persistenceKey,t));if(n){var r=Wr.ai(t,n);r&&(e=r.state)}}return this.Oi.ui(t),this.pi(),e},t.prototype.Li=function(t){this.Oi.hi(t),this.pi()},t.prototype.Bi=function(t){return this.Oi.activeTargetIds.has(t)},t.prototype.qi=function(t){this.removeItem(Br(this.persistenceKey,t))},t.prototype.Ui=function(t,e,n){this.Qi(t,e,n)},t.prototype.Wi=function(t,e,n){var r=this;e.forEach((function(t){r.ki(t)})),this.currentUser=t,n.forEach((function(t){r.Fi(t)}))},t.prototype.ji=function(t){this.Ki(t)},t.prototype.Si=function(){this.Ti&&(this.window.removeEventListener("storage",this.di),this.removeItem(this.Ii),this.Ti=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return p("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){p("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){p("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wi=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(p("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ii)return void v("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._n.Ds((function(){return r.__awaiter(e,void 0,void 0,(function(){var t,e,i,o,a,s;return r.__generator(this,(function(r){if(this.Ti){if(null!==n.key)if(this.Ri.test(n.key)){if(null==n.newValue)return t=this.Gi(n.key),[2,this.zi(t,null)];if(e=this.Hi(n.key,n.newValue))return[2,this.zi(e.clientId,e)]}else if(this.Pi.test(n.key)){if(null!==n.newValue&&(i=this.Yi(n.key,n.newValue)))return[2,this.Ji(i)]}else if(this.gi.test(n.key)){if(null!==n.newValue&&(o=this.Xi(n.key,n.newValue)))return[2,this.Zi(o)]}else if(n.key===this.yi){if(null!==n.newValue&&(a=this.bi(n.newValue)))return[2,this.vi(a)]}else n.key===this.Ai&&(s=function(t){var e=Vr.oi;if(null!=t)try{var n=JSON.parse(t);_("number"==typeof n),e=n}catch(t){v("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Vr.oi&&this.ni(s)}else this.Ei.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Oi",{get:function(){return this.mi.get(this.li)},enumerable:!1,configurable:!0}),t.prototype.pi=function(){this.setItem(this.Ii,this.Oi.ci())},t.prototype.$i=function(t,e,n){var r=new zr(this.currentUser,t,e,n),i=Hr(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ci())},t.prototype.ki=function(t){var e=Hr(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ki=function(t){this.storage.setItem(this.yi,JSON.stringify({clientId:this.li,onlineState:t}))},t.prototype.Qi=function(t,e,n){var r=Br(this.persistenceKey,t),i=new Wr(t,e,n);this.setItem(r,i.ci())},t.prototype.Gi=function(t){var e=this.Ri.exec(t);return e?e[1]:null},t.prototype.Hi=function(t,e){var n=this.Gi(t);return Qr.ai(n,e)},t.prototype.Yi=function(t,e){var n=this.Pi.exec(t),r=Number(n[1]);return zr.ai(new Ur(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Xi=function(t,e){var n=this.gi.exec(t),r=Number(n[1]);return Wr.ai(r,e)},t.prototype.bi=function(t){return Gr.ai(t)},t.prototype.Ji=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._i.tr(t.batchId,t.state,t.error)]:(p("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Zi=function(t){return this._i.er(t.targetId,t.state,t.error)},t.prototype.zi=function(t,e){var n=this,r=e?this.mi.rt(t,e):this.mi.remove(t),i=this.Ci(this.mi),o=this.Ci(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this._i.nr(a,s).then((function(){n.mi=r}))},t.prototype.vi=function(t){this.mi.get(t.clientId)&&this.fi(t.onlineState)},t.prototype.Ci=function(t){var e=Ft();return t.forEach((function(t,n){e=e.xt(n.activeTargetIds)})),e},t}(),Xr=function(){function t(){this.sr=new Kr,this.ir={},this.fi=null,this.ni=null}return t.prototype.Fi=function(t){},t.prototype.xi=function(t,e,n){},t.prototype.Mi=function(t){return this.sr.ui(t),this.ir[t]||"not-current"},t.prototype.Ui=function(t,e,n){this.ir[t]=e},t.prototype.Li=function(t){this.sr.hi(t)},t.prototype.Bi=function(t){return this.sr.activeTargetIds.has(t)},t.prototype.qi=function(t){delete this.ir[t]},t.prototype.Di=function(){return this.sr.activeTargetIds},t.prototype.Ni=function(t){return this.sr.activeTargetIds.has(t)},t.prototype.start=function(){return this.sr=new Kr,Promise.resolve()},t.prototype.Wi=function(t,e,n){},t.prototype.ji=function(t){},t.prototype.Si=function(){},t.prototype.ri=function(t){},t}(),Zr=function(){function t(t,e,n,r){this.batchId=t,this.rr=e,this.baseMutations=n,this.mutations=r}return t.prototype.ar=function(t,e,n){for(var r=n.cr,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=fn(o,e,r[i]))}return e},t.prototype.ur=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=dn(i,e,e,this.rr))}for(var o=e,a=0,s=this.mutations;a<s.length;a++){var u=s[a];u.key.isEqual(t)&&(e=dn(u,e,o,this.rr))}return e},t.prototype.hr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.ur(r.key,t.get(r.key));i&&(n=n.rt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Lt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Z(this.mutations,t.mutations,(function(t,e){return vn(t,e)}))&&Z(this.baseMutations,t.baseMutations,(function(t,e){return vn(t,e)}))},t}(),Jr=function(){function t(t,e,n,r){this.batch=t,this.lr=e,this.cr=n,this._r=r}return t.from=function(e,n,r){_(e.mutations.length===r.length);for(var i=Dt,o=e.mutations,a=0;a<o.length;a++)i=i.rt(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),$r=function(){function t(){this.dr=new at((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.wr=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.mr},set:function(t){this.mr=t},enumerable:!1,configurable:!0}),t.prototype.Tr=function(t,e){this.Er(),this.readTime=e,this.dr.set(t.key,t)},t.prototype.Ir=function(t,e){this.Er(),e&&(this.readTime=e),this.dr.set(t,null)},t.prototype.Ar=function(t,e){this.Er();var n=this.dr.get(e);return void 0!==n?vr.resolve(n):this.Rr(t,e)},t.prototype.getEntries=function(t,e){return this.Pr(t,e)},t.prototype.apply=function(t){return this.Er(),this.wr=!0,this.gr(t)},t.prototype.Er=function(){},t}(),ti="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ei=function(){function t(){this.yr=[]}return t.prototype.Vr=function(t){this.yr.push(t)},t.prototype.pr=function(){this.yr.forEach((function(t){return t()}))},t}(),ni=function(){function t(t,e,n){this.br=t,this.vr=e,this.Sr=n}return t.prototype.Dr=function(t,e){var n=this;return this.vr.Cr(t,e).next((function(r){return n.Nr(t,e,r)}))},t.prototype.Nr=function(t,e,n){return this.br.Ar(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].ur(e,t);return t}))},t.prototype.Fr=function(t,e,n){var r=xt();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].ur(t,e);r=r.rt(t,e)})),r},t.prototype.$r=function(t,e){var n=this;return this.br.getEntries(t,e).next((function(e){return n.kr(t,e)}))},t.prototype.kr=function(t,e){var n=this;return this.vr.Mr(t,e).next((function(r){var i=n.Fr(t,e,r),o=At();return i.forEach((function(t,e){e||(e=new xn(t,ut.min())),o=o.rt(t,e)})),o}))},t.prototype.Or=function(t,e,n){return function(t){return O.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Lr(t,e.path):Vn(e)?this.Br(t,e,n):this.qr(t,e,n)},t.prototype.Lr=function(t,e){return this.Dr(t,new O(e)).next((function(t){var e=Pt();return t instanceof An&&(e=e.rt(t.key,t)),e}))},t.prototype.Br=function(t,e,n){var r=this,i=e.collectionGroup,o=Pt();return this.Sr.Ur(t,i).next((function(a){return vr.forEach(a,(function(a){var s=function(t,e){return new Dn(e,null,t.rn.slice(),t.filters.slice(),t.limit,t.on,t.startAt,t.endAt)}(e,a.child(i));return r.qr(t,s,n).next((function(t){t.forEach((function(t,e){o=o.rt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.qr=function(t,e,n){var r,i,o=this;return this.br.Or(t,e,n).next((function(n){return r=n,o.vr.Qr(t,e)})).next((function(e){return o.Wr(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=dn(u,l,l,o.rr);r=h instanceof An?r.rt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Yn(e,n)||(r=r.remove(t))})),r}))},t.prototype.Wr=function(t,e,n){for(var r=Lt(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof mn&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.br.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof An&&(c=c.rt(t,e))})),c}))},t}(),ri=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.jr=n,this.Kr=r}return t.Gr=function(e,n){for(var r=Lt(),i=Lt(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}();function ii(t,e){var n=t[1],r=e[1],i=X(t[0],e[0]);return 0===i?X(n,r):i}var oi=function(){function t(t){this.zr=t,this.buffer=new Tt(ii),this.Hr=0}return t.prototype.Yr=function(){return++this.Hr},t.prototype.Jr=function(t){var e=[t,this.Yr()];if(this.buffer.size<this.zr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ii(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ai={Xr:!1,Zr:0,eo:0,no:0},si=function(){function t(t,e,n){this.so=t,this.io=e,this.ro=n}return t.oo=function(e){return new t(e,t.ao,t.co)},t}();si.uo=-1,si.ho=1048576,si.lo=41943040,si.ao=10,si.co=1e3,si._o=new si(si.lo,si.ao,si.co),si.fo=new si(si.uo,0,0);var ui=function(){function t(t,e){this.do=t,this.os=e,this.wo=!1,this.mo=null}return t.prototype.start=function(t){this.do.params.so!==si.uo&&this.To(t)},t.prototype.stop=function(){this.mo&&(this.mo.cancel(),this.mo=null)},Object.defineProperty(t.prototype,"Ti",{get:function(){return null!==this.mo},enumerable:!1,configurable:!0}),t.prototype.To=function(t){var e=this,n=this.wo?3e5:6e4;p("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.mo=this.os.gn("lru_garbage_collection",n,(function(){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:this.mo=null,this.wo=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Eo(this.do)];case 2:return n.sent(),[3,7];case 3:return _r(e=n.sent())?(p("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,So(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.To(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),ci=function(){function t(t,e){this.Io=t,this.params=e}return t.prototype.Ao=function(t,e){return this.Io.Ro(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Po=function(t,e){var n=this;if(0===e)return vr.resolve(Vr.oi);var r=new oi(e);return this.Io.De(t,(function(t){return r.Jr(t.sequenceNumber)})).next((function(){return n.Io.yo(t,(function(t){return r.Jr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Vo=function(t,e,n){return this.Io.Vo(t,e,n)},t.prototype.po=function(t,e){return this.Io.po(t,e)},t.prototype.bo=function(t,e){var n=this;return this.params.so===si.uo?(p("LruGarbageCollector","Garbage collection skipped; disabled"),vr.resolve(ai)):this.vo(t).next((function(r){return r<n.params.so?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.so),ai):n.So(t,e)}))},t.prototype.vo=function(t){return this.Io.vo(t)},t.prototype.So=function(t,e){var n,r,i,a,s,u,c,l=this,h=Date.now();return this.Ao(t,this.params.io).next((function(e){return e>l.params.ro?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.ro+" from "+e),r=l.params.ro):r=e,a=Date.now(),l.Po(t,r)})).next((function(r){return n=r,s=Date.now(),l.Vo(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.po(t,n)})).next((function(t){return c=Date.now(),d()<=o.LogLevel.DEBUG&&p("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),vr.resolve({Xr:!0,Zr:r,eo:i,no:t})}))},t}();function li(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=fi(e)),e=hi(t.get(n),e);return fi(e)}function hi(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function fi(t){return t+"\x01\x01"}function di(t){var e=t.length;if(_(e>=2),2===e)return _("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),S.g();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&m(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:m()}o=a+2}return new S(r)}var pi=function(t){this.Do=t};function vi(t,e){if(e.document)return function(t,e,n){var r=Ie(t,e.name),i=Ce(e.updateTime),o=new Sn({mapValue:{fields:e.fields}});return new An(r,i,o,{hasCommittedMutations:!!n})}(t.Do,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=O.$(e.noDocument.path),r=bi(e.noDocument.readTime);return new xn(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=O.$(e.unknownDocument.path),o=bi(e.unknownDocument.version);return new Nn(i,o)}return m()}function yi(t,e,n){var r=gi(n),i=e.key.path.h().A();if(e instanceof An){var o=function(t,e){return{name:Te(t,e.key),fields:e.sn().mapValue.fields,updateTime:be(t,e.version.X())}}(t.Do,e);return new Wi(null,null,o,e.hasCommittedMutations,r,i)}if(e instanceof xn){var a=e.key.path.A(),s=_i(e.version),u=e.hasCommittedMutations;return new Wi(null,new Bi(a,s),null,u,r,i)}if(e instanceof Nn){var c=e.key.path.A(),l=_i(e.version);return new Wi(new zi(c,l),null,null,!0,r,i)}return m()}function gi(t){var e=t.X();return[e.seconds,e.nanoseconds]}function mi(t){var e=new st(t[0],t[1]);return ut.Y(e)}function _i(t){var e=t.X();return new Mi(e.seconds,e.nanoseconds)}function bi(t){var e=new st(t.seconds,t.nanoseconds);return ut.Y(e)}function wi(t,e){var n=(e.baseMutations||[]).map((function(e){return Re(t.Do,e)})),r=e.mutations.map((function(e){return Re(t.Do,e)})),i=st.fromMillis(e.localWriteTimeMs);return new Zr(e.batchId,i,n,r)}function Ei(t){var e,n,r=bi(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?bi(t.lastLimboFreeSnapshotVersion):ut.min();return void 0!==t.query.documents?(_(1===(n=t.query).documents.length),e=Hn(Ln(Ae(n.documents[0])))):e=function(t){var e=Ae(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=function t(e){return e?void 0!==e.unaryFilter?[ze(e)]:void 0!==e.fieldFilter?[Be(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):m():[]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new lr(He(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ct(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Me(n.startAt));var l=null;return n.endAt&&(l=Me(n.endAt)),Hn(Rn(e,i,s,a,u,"F",c,l))}(t.query),new _t(e,t.targetId,0,t.lastListenSequenceNumber,r,i,$.fromBase64String(t.resumeToken))}function Ci(t,e){var n,r=_i(e.et),i=_i(e.lastLimboFreeSnapshotVersion);n=yt(e.target)?Le(t.Do,e.target):je(t.Do,e.target);var o=e.resumeToken.toBase64();return new Gi(e.targetId,pt(e.target),r,o,e.sequenceNumber,i,n)}var ki=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Sr=n,this.Co=r,this.No={}}return t.Fo=function(e,n,r,i){return _(""!==e.uid),new t(e.Xs()?e.uid:"",n,r,i)},t.prototype.$o=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ii(t).ss({index:qi.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.xo=function(t,e,n,r){var i=this,o=Oi(t),a=Ii(t);return a.add({}).next((function(s){_("number"==typeof s);for(var u=new Zr(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return De(t.Do,e)})),i=n.mutations.map((function(e){return De(t.Do,e)}));return new qi(e,n.batchId,n.rr.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new Tt((function(t,e){return X(t.R(),e.R())})),f=0,d=r;f<d.length;f++){var p=d[f],v=Hi.key(i.userId,p.key.path,s);h=h.add(p.key.path.h()),l.push(a.put(c)),l.push(o.put(v,Hi.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Sr.ko(t,e))})),t.Vr((function(){i.No[s]=u.keys()})),vr.$n(l).next((function(){return u}))}))},t.prototype.Mo=function(t,e){var n=this;return Ii(t).get(e).next((function(t){return t?(_(t.userId===n.userId),wi(n.serializer,t)):null}))},t.prototype.Oo=function(t,e){var n=this;return this.No[e]?vr.resolve(this.No[e]):this.Mo(t,e).next((function(t){if(t){var r=t.keys();return n.No[e]=r,r}return null}))},t.prototype.Lo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ii(t).ss({index:qi.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(_(e.batchId>=r),o=wi(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.Bo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ii(t).ss({index:qi.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.qo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ii(t).Zn(qi.userMutationsIndex,n).next((function(t){return t.map((function(t){return wi(e.serializer,t)}))}))},t.prototype.Cr=function(t,e){var n=this,r=Hi.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Oi(t).ss({range:i},(function(r,i,a){var s=r[0],u=r[2],c=di(r[1]);if(s===n.userId&&e.path.isEqual(c))return Ii(t).get(u).next((function(t){if(!t)throw m();_(t.userId===n.userId),o.push(wi(n.serializer,t))}));a.done()})).next((function(){return o}))},t.prototype.Mr=function(t,e){var n=this,r=new Tt(X),i=[];return e.forEach((function(e){var o=Hi.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Oi(t).ss({range:a},(function(t,i,o){var a=t[0],s=t[2],u=di(t[1]);a===n.userId&&e.path.isEqual(u)?r=r.add(s):o.done()}));i.push(s)})),vr.$n(i).next((function(){return n.Uo(t,r)}))},t.prototype.Qr=function(t,e){var n=this,r=e.path,i=r.length+1,o=Hi.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Tt(X);return Oi(t).ss({range:a},(function(t,e,o){var a=t[0],u=t[2],c=di(t[1]);a===n.userId&&r.T(c)?c.length===i&&(s=s.add(u)):o.done()})).next((function(){return n.Uo(t,s)}))},t.prototype.Uo=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Ii(t).get(e).next((function(t){if(null===t)throw m();_(t.userId===n.userId),r.push(wi(n.serializer,t))})))})),vr.$n(i).next((function(){return r}))},t.prototype.Qo=function(t,e){var n=this;return Ti(t.Wo,this.userId,e).next((function(r){return t.Vr((function(){n.jo(e.batchId)})),vr.forEach(r,(function(e){return n.Co.Ko(t,e)}))}))},t.prototype.jo=function(t){delete this.No[t]},t.prototype.Go=function(t){var e=this;return this.$o(t).next((function(n){if(!n)return vr.resolve();var r=IDBKeyRange.lowerBound(Hi.prefixForUser(e.userId)),i=[];return Oi(t).ss({range:r},(function(t,n,r){if(t[0]===e.userId){var o=di(t[1]);i.push(o)}else r.done()})).next((function(){_(0===i.length)}))}))},t.prototype.zo=function(t,e){return Si(t,this.userId,e)},t.prototype.Ho=function(t){var e=this;return Ai(t).get(this.userId).next((function(t){return t||new Vi(e.userId,-1,"")}))},t}();function Si(t,e,n){var r=Hi.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Oi(t).ss({range:o,ns:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(a=!0),r.done()})).next((function(){return a}))}function Ti(t,e,n){var r=t.store(qi.store),i=t.store(Hi.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.ss({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){_(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Hi.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return vr.$n(o).next((function(){return c}))}function Ii(t){return co.Un(t,qi.store)}function Oi(t){return co.Un(t,Hi.store)}function Ai(t){return co.Un(t,Vi.store)}var xi=function(){function t(t,e){this.serializer=t,this.Sr=e}return t.prototype.Tr=function(t,e,n){return Pi(t).put(Di(e),n)},t.prototype.Ir=function(t,e){var n=Pi(t),r=Di(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Yo(t,r)}))},t.prototype.Ar=function(t,e){var n=this;return Pi(t).get(Di(e)).next((function(t){return n.Jo(t)}))},t.prototype.Xo=function(t,e){var n=this;return Pi(t).get(Di(e)).next((function(t){var e=n.Jo(t);return e?{Zo:e,size:Ri(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=xt();return this.ta(t,e,(function(t,e){var i=n.Jo(e);r=r.rt(t,i)})).next((function(){return r}))},t.prototype.ea=function(t,e){var n=this,r=xt(),i=new Ct(O.i);return this.ta(t,e,(function(t,e){var o=n.Jo(e);o?(r=r.rt(t,o),i=i.rt(t,Ri(e))):(r=r.rt(t,null),i=i.rt(t,0))})).next((function(){return{na:r,sa:i}}))},t.prototype.ta=function(t,e,n){if(e.m())return vr.resolve();var r=IDBKeyRange.bound(e.first().path.A(),e.last().path.A()),i=e.lt(),o=i.Et();return Pi(t).ss({range:r},(function(t,e,r){for(var a=O.$(t);o&&O.i(o,a)<0;)n(o,null),o=i.Et();o&&o.isEqual(a)&&(n(o,e),o=i.It()?i.Et():null),o?r.Jn(o.path.A()):r.done()})).next((function(){for(;o;)n(o,null),o=i.It()?i.Et():null}))},t.prototype.Or=function(t,e,n){var r=this,i=Pt(),o=e.path.length+1,a={};if(n.isEqual(ut.min())){var s=e.path.A();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.A(),c=gi(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Wi.collectionReadTimeIndex}return Pi(t).ss(a,(function(t,n,a){if(t.length===o){var s=vi(r.serializer,n);e.path.T(s.key.path)?s instanceof An&&Yn(e,s)&&(i=i.rt(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.ia=function(t,e){var n=this,r=At(),i=gi(e),o=Pi(t),a=IDBKeyRange.lowerBound(i,!0);return o.ss({index:Wi.readTimeIndex,range:a},(function(t,e){var o=vi(n.serializer,e);r=r.rt(o.key,o),i=e.readTime})).next((function(){return{ra:r,readTime:mi(i)}}))},t.prototype.oa=function(t){var e=Pi(t),n=ut.min();return e.ss({index:Wi.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=mi(e.readTime)),r.done()})).next((function(){return n}))},t.prototype.aa=function(e){return new t.ca(this,!!e&&e.ua)},t.prototype.ha=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ni(t).get(Qi.key).next((function(t){return _(!!t),t}))},t.prototype.Yo=function(t,e){return Ni(t).put(Qi.key,e)},t.prototype.Jo=function(t){if(t){var e=vi(this.serializer,t);return e instanceof xn&&e.version.isEqual(ut.min())?null:e}return null},t}();function Ni(t){return co.Un(t,Qi.store)}function Pi(t){return co.Un(t,Wi.store)}function Di(t){return t.path.A()}function Ri(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw m();e=t.noDocument}return JSON.stringify(e).length}xi.ca=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).la=e,r.ua=n,r._a=new at((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return r.__extends(e,t),e.prototype.gr=function(t){var e=this,n=[],r=0,i=new Tt((function(t,e){return X(t.R(),e.R())}));return this.dr.forEach((function(o,a){var s=e._a.get(o);if(a){var u=yi(e.la.serializer,a,e.readTime);i=i.add(o.path.h());var c=Ri(u);r+=c-s,n.push(e.la.Tr(t,o,u))}else if(r-=s,e.ua){var l=yi(e.la.serializer,new xn(o,ut.min()),e.readTime);n.push(e.la.Tr(t,o,l))}else n.push(e.la.Ir(t,o))})),i.forEach((function(r){n.push(e.la.Sr.ko(t,r))})),n.push(this.la.updateMetadata(t,r)),vr.$n(n)},e.prototype.Rr=function(t,e){var n=this;return this.la.Xo(t,e).next((function(t){return null===t?(n._a.set(e,0),null):(n._a.set(e,t.size),t.Zo)}))},e.prototype.Pr=function(t,e){var n=this;return this.la.ea(t,e).next((function(t){var e=t.na;return t.sa.forEach((function(t,e){n._a.set(t,e)})),e}))},e}($r);var Li=function(){function t(){this.fa=new ji}return t.prototype.ko=function(t,e){return this.fa.add(e),vr.resolve()},t.prototype.Ur=function(t,e){return vr.resolve(this.fa.getEntries(e))},t}(),ji=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t._(),n=t.h(),r=this.index[e]||new Tt(S.i),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t._(),n=t.h(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Tt(S.i)).A()},t}(),Fi=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;_(n<r&&n>=0&&r<=10);var o=new br(e);n<1&&r>=1&&(function(t){t.createObjectStore(Ui.store)}(t),function(t){t.createObjectStore(Vi.store,{keyPath:Vi.keyPath}),t.createObjectStore(qi.store,{keyPath:qi.keyPath,autoIncrement:!0}).createIndex(qi.userMutationsIndex,qi.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Hi.store)}(t),Zi(t),function(t){t.createObjectStore(Wi.store)}(t));var a=vr.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ki.store),t.deleteObjectStore(Gi.store),t.deleteObjectStore(Yi.store)}(t),Zi(t)),a=a.next((function(){return function(t){var e=t.store(Yi.store),n=new Yi(0,0,ut.min().X(),0);return e.put(Yi.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(qi.store).Zn().next((function(n){t.deleteObjectStore(qi.store),t.createObjectStore(qi.store,{keyPath:qi.keyPath,autoIncrement:!0}).createIndex(qi.userMutationsIndex,qi.userMutationsKeyPath,{unique:!0});var r=e.store(qi.store),i=n.map((function(t){return r.put(t)}));return vr.$n(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Ji.store,{keyPath:Ji.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Qi.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Wi.store);e.createIndex(Wi.readTimeIndex,Wi.readTimeIndexPath,{unique:!1}),e.createIndex(Wi.collectionReadTimeIndex,Wi.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.rewriteCanonicalIds(o)}))),a},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Wi.store).ss((function(t,n){e+=Ri(n)})).next((function(){var n=new Qi(e);return t.store(Qi.store).put(Qi.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Vi.store),r=t.store(qi.store);return n.Zn().next((function(n){return vr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Zn(qi.userMutationsIndex,i).next((function(r){return vr.forEach(r,(function(r){_(r.userId===n.userId);var i=wi(e.serializer,r);return Ti(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Ki.store),n=t.store(Wi.store);return t.store(Yi.store).get(Yi.key).next((function(t){var r=[];return n.ss((function(n,i){var o=new S(n),a=function(t){return[0,li(t)]}(o);r.push(e.get(a).next((function(n){return n?vr.resolve():function(n){return e.put(new Ki(0,li(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return vr.$n(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Xi.store,{keyPath:Xi.keyPath});var n=e.store(Xi.store),r=new ji,i=function(t){if(r.add(t)){var e=t._(),i=t.h();return n.put({collectionId:e,parent:li(i)})}};return e.store(Wi.store).ss({ns:!0},(function(t,e){var n=new S(t);return i(n.h())})).next((function(){return e.store(Hi.store).ss({ns:!0},(function(t,e){var n=di(t[1]);return i(n.h())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Gi.store);return n.ss((function(t,r){var i=Ei(r),o=Ci(e.serializer,i);return n.put(o)}))},t}(),Mi=function(t,e){this.seconds=t,this.nanoseconds=e},Ui=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ui.store="owner",Ui.key="owner";var Vi=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Vi.store="mutationQueues",Vi.keyPath="userId";var qi=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};qi.store="mutations",qi.keyPath="batchId",qi.userMutationsIndex="userMutationsIndex",qi.userMutationsKeyPath=["userId","batchId"];var Hi=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,li(e)]},t.key=function(t,e,n){return[t,li(e),n]},t}();Hi.store="documentMutations",Hi.PLACEHOLDER=new Hi;var Bi=function(t,e){this.path=t,this.readTime=e},zi=function(t,e){this.path=t,this.version=e},Wi=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Wi.store="remoteDocuments",Wi.readTimeIndex="readTimeIndex",Wi.readTimeIndexPath="readTime",Wi.collectionReadTimeIndex="collectionReadTimeIndex",Wi.collectionReadTimeIndexPath=["parentPath","readTime"];var Qi=function(t){this.byteSize=t};Qi.store="remoteDocumentGlobal",Qi.key="remoteDocumentGlobalKey";var Gi=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Gi.store="targets",Gi.keyPath="targetId",Gi.queryTargetsIndexName="queryTargetsIndex",Gi.queryTargetsKeyPath=["canonicalId","targetId"];var Ki=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ki.store="targetDocuments",Ki.keyPath=["targetId","path"],Ki.documentTargetsIndex="documentTargetsIndex",Ki.documentTargetsKeyPath=["path","targetId"];var Yi=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Yi.key="targetGlobalKey",Yi.store="targetGlobal";var Xi=function(t,e){this.collectionId=t,this.parent=e};function Zi(t){t.createObjectStore(Ki.store,{keyPath:Ki.keyPath}).createIndex(Ki.documentTargetsIndex,Ki.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Gi.store,{keyPath:Gi.keyPath}).createIndex(Gi.queryTargetsIndexName,Gi.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Yi.store)}Xi.store="collectionParents",Xi.keyPath=["collectionId","parent"];var Ji=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ji.store="clientMetadata",Ji.keyPath="clientId";var $i=r.__spreadArrays(r.__spreadArrays(r.__spreadArrays([Vi.store,qi.store,Hi.store,Wi.store,Gi.store,Ui.store,Yi.store,Ki.store],[Ji.store]),[Qi.store]),[Xi.store]),to=function(){function t(){this.da=new ji}return t.prototype.ko=function(t,e){var n=this;if(!this.da.has(e)){var r=e._(),i=e.h();t.Vr((function(){n.da.add(e)}));var o={collectionId:r,parent:li(i)};return eo(t).put(o)}return vr.resolve()},t.prototype.Ur=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[J(e),""],!1,!0);return eo(t).Zn(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(di(o.parent))}return n}))},t}();function eo(t){return co.Un(t,Xi.store)}var no=function(){function t(t){this.wa=t}return t.prototype.next=function(){return this.wa+=2,this.wa},t.ma=function(){return new t(0)},t.Ta=function(){return new t(-1)},t}(),ro=function(){function t(t,e){this.Co=t,this.serializer=e}return t.prototype.Ea=function(t){var e=this;return this.Ia(t).next((function(n){var r=new no(n.highestTargetId);return n.highestTargetId=r.next(),e.Aa(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ra=function(t){return this.Ia(t).next((function(t){return ut.Y(new st(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Pa=function(t){return this.Ia(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.ga=function(t,e,n){var r=this;return this.Ia(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.X()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Aa(t,i)}))},t.prototype.ya=function(t,e){var n=this;return this.Va(t,e).next((function(){return n.Ia(t).next((function(r){return r.targetCount+=1,n.pa(e,r),n.Aa(t,r)}))}))},t.prototype.ba=function(t,e){return this.Va(t,e)},t.prototype.va=function(t,e){var n=this;return this.Sa(t,e.targetId).next((function(){return io(t).delete(e.targetId)})).next((function(){return n.Ia(t)})).next((function(e){return _(e.targetCount>0),e.targetCount-=1,n.Aa(t,e)}))},t.prototype.Vo=function(t,e,n){var r=this,i=0,o=[];return io(t).ss((function(a,s){var u=Ei(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.va(t,u)))})).next((function(){return vr.$n(o)})).next((function(){return i}))},t.prototype.De=function(t,e){return io(t).ss((function(t,n){var r=Ei(n);e(r)}))},t.prototype.Ia=function(t){return oo(t).get(Yi.key).next((function(t){return _(null!==t),t}))},t.prototype.Aa=function(t,e){return oo(t).put(Yi.key,e)},t.prototype.Va=function(t,e){return io(t).put(Ci(this.serializer,e))},t.prototype.pa=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Da=function(t){return this.Ia(t).next((function(t){return t.targetCount}))},t.prototype.Ca=function(t,e){var n=pt(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return io(t).ss({range:r,index:Gi.queryTargetsIndexName},(function(t,n,r){var o=Ei(n);vt(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Na=function(t,e,n){var r=this,i=[],o=ao(t);return e.forEach((function(e){var a=li(e.path);i.push(o.put(new Ki(n,a))),i.push(r.Co.Fa(t,n,e))})),vr.$n(i)},t.prototype.$a=function(t,e,n){var r=this,i=ao(t);return vr.forEach(e,(function(e){var o=li(e.path);return vr.$n([i.delete([n,o]),r.Co.xa(t,n,e)])}))},t.prototype.Sa=function(t,e){var n=ao(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ka=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ao(t),i=Lt();return r.ss({range:n,ns:!0},(function(t,e,n){var r=di(t[1]),o=new O(r);i=i.add(o)})).next((function(){return i}))},t.prototype.zo=function(t,e){var n=li(e.path),r=IDBKeyRange.bound([n],[J(n)],!1,!0),i=0;return ao(t).ss({index:Ki.documentTargetsIndex,ns:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.qe=function(t,e){return io(t).get(e).next((function(t){return t?Ei(t):null}))},t}();function io(t){return co.Un(t,Gi.store)}function oo(t){return co.Un(t,Yi.store)}function ao(t){return co.Un(t,Ki.store)}var so="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",uo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wo=e,r.Ma=n,r}return r.__extends(e,t),e}(ei),co=function(){function t(e,n,r,i,o,a,s,u,c,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this._n=o,this.window=a,this.document=s,this.Oa=c,this.La=f,this.Ba=null,this.qa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ua=null,this.inForeground=!1,this.Qa=null,this.Wa=null,this.ja=Number.NEGATIVE_INFINITY,this.Ka=function(t){return Promise.resolve()},!t.On())throw new h(l.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Co=new fo(this,i),this.Ga=n+"main",this.serializer=new pi(u),this.za=new yr(this.Ga,10,new Fi(this.serializer)),this.Ha=new ro(this.Co,this.serializer),this.Sr=new to,this.br=new xi(this.serializer,this.Sr),this.window&&this.window.localStorage?this.Ya=this.window.localStorage:(this.Ya=null,!1===f&&v("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Un=function(t,e){if(t instanceof uo)return yr.Un(t.Wo,e);throw m()},t.prototype.start=function(){var t=this;return this.Ja().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new h(l.FAILED_PRECONDITION,so);return t.Xa(),t.Za(),t.tc(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Ha.Pa(e)}))})).then((function(e){t.Ba=new Vr(e,t.Oa)})).then((function(){t.qa=!0})).catch((function(e){return t.za&&t.za.close(),Promise.reject(e)}))},t.prototype.ec=function(t){var e=this;return this.Ka=function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){return this.Ti?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.nc=function(t){var e=this;this.za.jn((function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.sc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this._n.ds((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.Ti?[4,this.Ja()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Ja=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return ho(e).put(new Ji(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.ic(e).next((function(e){e||(t.isPrimary=!1,t._n.Ds((function(){return t.Ka(!1)})))}))})).next((function(){return t.rc(e)})).next((function(n){return t.isPrimary&&!n?t.oc(e).next((function(){return!1})):!!n&&t.ac(e).next((function(){return!0}))}))})).catch((function(e){if(_r(e))return p("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return p("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t._n.Ds((function(){return t.Ka(e)})),t.isPrimary=e}))},t.prototype.ic=function(t){var e=this;return lo(t).get(Ui.key).next((function(t){return vr.resolve(e.cc(t))}))},t.prototype.uc=function(t){return ho(t).delete(this.clientId)},t.prototype.hc=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.lc(this.ja,18e5)?[3,2]:(this.ja=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Un(e,Ji.store);return n.Zn().next((function(t){var e=o._c(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return vr.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=r.sent(),this.Ya)for(n=0,i=e;n<i.length;n++)this.Ya.removeItem(this.fc(i[n].clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.tc=function(){var t=this;this.Wa=this._n.gn("client_metadata_refresh",4e3,(function(){return t.Ja().then((function(){return t.hc()})).then((function(){return t.tc()}))}))},t.prototype.cc=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.rc=function(t){var e=this;return this.La?vr.resolve(!0):lo(t).get(Ui.key).next((function(n){if(null!==n&&e.lc(n.leaseTimestampMs,5e3)&&!e.dc(n.ownerId)){if(e.cc(n)&&e.networkEnabled)return!0;if(!e.cc(n)){if(!n.allowTabSynchronization)throw new h(l.FAILED_PRECONDITION,so);return!1}}return!(!e.networkEnabled||!e.inForeground)||ho(t).Zn().next((function(t){return void 0===e._c(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&p("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Si=function(){return r.__awaiter(this,void 0,void 0,(function(){var t=this;return r.__generator(this,(function(e){switch(e.label){case 0:return this.qa=!1,this.wc(),this.Wa&&(this.Wa.cancel(),this.Wa=null),this.mc(),this.Tc(),[4,this.za.runTransaction("readwrite",[Ui.store,Ji.store],(function(e){var n=new uo(e,Vr.oi);return t.oc(n).next((function(){return t.uc(n)}))}))];case 1:return e.sent(),this.za.close(),this.Ec(),[2]}}))}))},t.prototype._c=function(t,e){var n=this;return t.filter((function(t){return n.lc(t.updateTimeMs,e)&&!n.dc(t.clientId)}))},t.prototype.Vi=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return ho(e).Zn().next((function(e){return t._c(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ti",{get:function(){return this.qa},enumerable:!1,configurable:!0}),t.prototype.Ic=function(t){return ki.Fo(t,this.serializer,this.Sr,this.Co)},t.prototype.Ac=function(){return this.Ha},t.prototype.Rc=function(){return this.br},t.prototype.Pc=function(){return this.Sr},t.prototype.runTransaction=function(t,e,n){var r,i=this;return p("IndexedDbPersistence","Starting transaction:",t),this.za.runTransaction("readonly"===e?"readonly":"readwrite",$i,(function(o){return r=new uo(o,i.Ba?i.Ba.next():Vr.oi),"readwrite-primary"===e?i.ic(r).next((function(t){return!!t||i.rc(r)})).next((function(e){if(!e)throw v("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i._n.Ds((function(){return i.Ka(!1)})),new h(l.FAILED_PRECONDITION,ti);return n(r)})).next((function(t){return i.ac(r).next((function(){return t}))})):i.gc(r).next((function(){return n(r)}))})).then((function(t){return r.pr(),t}))},t.prototype.gc=function(t){var e=this;return lo(t).get(Ui.key).next((function(t){if(null!==t&&e.lc(t.leaseTimestampMs,5e3)&&!e.dc(t.ownerId)&&!e.cc(t)&&!(e.La||e.allowTabSynchronization&&t.allowTabSynchronization))throw new h(l.FAILED_PRECONDITION,so)}))},t.prototype.ac=function(t){var e=new Ui(this.clientId,this.allowTabSynchronization,Date.now());return lo(t).put(Ui.key,e)},t.On=function(){return yr.On()},t.prototype.oc=function(t){var e=this,n=lo(t);return n.get(Ui.key).next((function(t){return e.cc(t)?(p("IndexedDbPersistence","Releasing primary lease."),n.delete(Ui.key)):vr.resolve()}))},t.prototype.lc=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(v("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xa=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Qa=function(){t._n.ds((function(){return t.inForeground="visible"===t.document.visibilityState,t.Ja()}))},this.document.addEventListener("visibilitychange",this.Qa),this.inForeground="visible"===this.document.visibilityState)},t.prototype.mc=function(){this.Qa&&(this.document.removeEventListener("visibilitychange",this.Qa),this.Qa=null)},t.prototype.Za=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Ua=function(){e.wc(),e._n.ds((function(){return e.Si()}))},this.window.addEventListener("unload",this.Ua))},t.prototype.Tc=function(){this.Ua&&(this.window.removeEventListener("unload",this.Ua),this.Ua=null)},t.prototype.dc=function(t){var e;try{var n=null!==(null===(e=this.Ya)||void 0===e?void 0:e.getItem(this.fc(t)));return p("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return v("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wc=function(){if(this.Ya)try{this.Ya.setItem(this.fc(this.clientId),String(Date.now()))}catch(r){v("Failed to set zombie client id.",r)}},t.prototype.Ec=function(){if(this.Ya)try{this.Ya.removeItem(this.fc(this.clientId))}catch(r){}},t.prototype.fc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function lo(t){return co.Un(t,Ui.store)}function ho(t){return co.Un(t,Ji.store)}var fo=function(){function t(t,e){this.db=t,this.do=new ci(this,e)}return t.prototype.Ro=function(t){var e=this.yc(t);return this.db.Ac().Da(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.yc=function(t){var e=0;return this.yo(t,(function(t){e++})).next((function(){return e}))},t.prototype.De=function(t,e){return this.db.Ac().De(t,e)},t.prototype.yo=function(t,e){return this.Vc(t,(function(t,n){return e(n)}))},t.prototype.Fa=function(t,e,n){return po(t,n)},t.prototype.xa=function(t,e,n){return po(t,n)},t.prototype.Vo=function(t,e,n){return this.db.Ac().Vo(t,e,n)},t.prototype.Ko=function(t,e){return po(t,e)},t.prototype.bc=function(t,e){return function(t,e){var n=!1;return Ai(t).rs((function(r){return Si(t,r,e).next((function(t){return t&&(n=!0),vr.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.po=function(t,e){var n=this,r=this.db.Rc().aa(),i=[],o=0;return this.Vc(t,(function(a,s){if(s<=e){var u=n.bc(t,a).next((function(e){if(!e)return o++,r.Ar(t,a).next((function(){return r.Ir(a),ao(t).delete([0,li(a.path)])}))}));i.push(u)}})).next((function(){return vr.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.nt(t.Ma);return this.db.Ac().ba(t,n)},t.prototype.vc=function(t,e){return po(t,e)},t.prototype.Vc=function(t,e){var n,r=ao(t),i=Vr.oi;return r.ss({index:Ki.documentTargetsIndex},(function(t,r){var o=r.path,a=r.sequenceNumber;0===t[0]?(i!==Vr.oi&&e(new O(di(n)),i),i=a,n=o):i=Vr.oi})).next((function(){i!==Vr.oi&&e(new O(di(n)),i)}))},t.prototype.vo=function(t){return this.db.Rc().ha(t)},t}();function po(t,e){return ao(t).put(function(t,e){return new Ki(0,li(t.path),e)}(e,t.Ma))}function vo(t,e){var n=t.projectId;return t.W||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var yo=function(){function t(t,e,n){this.persistence=t,this.Sc=e,this.Dc=new Ct(X),this.Cc=new at((function(t){return pt(t)}),vt),this.Nc=ut.min(),this.vr=t.Ic(n),this.Fc=t.Rc(),this.Ha=t.Ac(),this.$c=new ni(this.Fc,this.vr,this.persistence.Pc()),this.Sc.xc(this.$c)}return t.prototype.Eo=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.bo(n,e.Dc)}))},t}();function go(t,e){var n=b(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Fc.aa({ua:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=vr.resolve();return o.forEach((function(t){a=a.next((function(){return r.Ar(e,t)})).next((function(e){var o=e,a=n._r.get(t);_(null!==a),(!o||o.version.L(a)<0)&&(o=i.ar(t,o,n))&&r.Tr(o,n.lr)}))})),a.next((function(){return t.vr.Qo(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.vr.Go(t)})).next((function(){return n.$c.$r(t,r)}))}))}function mo(t){var e=b(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Ha.Ra(t)}))}function _o(t,e){var n=b(t),r=e.et,i=n.Dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Fc.aa({ua:!0});i=n.Dc;var a=[];e.Gt.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.Ha.$a(t,e.ne,o).next((function(){return n.Ha.Na(t,e.te,o)})));var u=e.resumeToken;if(u.O()>0){var c=s.st(u,r).nt(t.Ma);i=i.rt(o,c),function(t,e,n){return _(e.resumeToken.O()>0),0===t.resumeToken.O()||e.et.J()-t.et.J()>=3e8||n.te.size+n.ee.size+n.ne.size>0}(s,c,e)&&a.push(n.Ha.ba(t,c))}}}));var s=At(),u=Lt();if(e.Ht.forEach((function(t,e){u=u.add(t)})),a.push(o.getEntries(t,u).next((function(i){e.Ht.forEach((function(u,c){var l=i.get(u);c instanceof xn&&c.version.isEqual(ut.min())?(o.Ir(u,r),s=s.rt(u,c)):null==l||c.version.L(l.version)>0||0===c.version.L(l.version)&&l.hasPendingWrites?(o.Tr(c,r),s=s.rt(u,c)):p("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.Yt.has(u)&&a.push(n.persistence.Co.vc(t,u))}))}))),!r.isEqual(ut.min())){var c=n.Ha.Ra(t).next((function(e){return n.Ha.ga(t,t.Ma,r)}));a.push(c)}return vr.$n(a).next((function(){return o.apply(t)})).next((function(){return n.$c.kr(t,s)}))})).then((function(t){return n.Dc=i,t}))}function bo(t,e){var n=b(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.vr.Lo(t,e)}))}function wo(t,e){var n=b(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Ha.Ca(t,e).next((function(i){return i?vr.resolve(r=i):n.Ha.Ea(t).next((function(i){return r=new _t(e,i,0,t.Ma),n.Ha.ya(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Dc.get(t.targetId);return(null===r||t.et.L(r.et)>0)&&(n.Dc=n.Dc.rt(t.targetId,t),n.Cc.set(e,t.targetId)),t}))}function Eo(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:i=b(t),o=i.Dc.get(e),a=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",a,(function(t){return i.persistence.Co.removeTarget(t,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!_r(s=r.sent()))throw s;return p("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return i.Dc=i.Dc.remove(e),i.Cc.delete(o.target),[2]}}))}))}function Co(t,e,n){var r=b(t),i=ut.min(),o=Lt();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=b(t),i=r.Cc.get(n);return void 0!==i?vr.resolve(r.Dc.get(i)):r.Ha.Ca(e,n)}(r,t,Hn(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ha.ka(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Sc.Or(t,e,n?i:ut.min(),n?o:Lt())})).next((function(t){return{documents:t,kc:o}}))}))}function ko(t,e){var n=b(t),r=b(n.Ha),i=n.Dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.qe(t,e).next((function(t){return t?t.target:null}))}))}function So(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){if(t.code!==l.FAILED_PRECONDITION||t.message!==ti)throw t;return p("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var To=function(){function t(){this.Mc=new Tt(Io.Oc),this.Lc=new Tt(Io.Bc)}return t.prototype.m=function(){return this.Mc.m()},t.prototype.Fa=function(t,e){var n=new Io(t,e);this.Mc=this.Mc.add(n),this.Lc=this.Lc.add(n)},t.prototype.qc=function(t,e){var n=this;t.forEach((function(t){return n.Fa(t,e)}))},t.prototype.xa=function(t,e){this.Uc(new Io(t,e))},t.prototype.Qc=function(t,e){var n=this;t.forEach((function(t){return n.xa(t,e)}))},t.prototype.Wc=function(t){var e=this,n=new O(new S([])),r=new Io(n,t),i=new Io(n,t+1),o=[];return this.Lc.Nt([r,i],(function(t){e.Uc(t),o.push(t.key)})),o},t.prototype.jc=function(){var t=this;this.Mc.forEach((function(e){return t.Uc(e)}))},t.prototype.Uc=function(t){this.Mc=this.Mc.delete(t),this.Lc=this.Lc.delete(t)},t.prototype.Kc=function(t){var e=new O(new S([])),n=new Io(e,t),r=new Io(e,t+1),i=Lt();return this.Lc.Nt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.zo=function(t){var e=new Io(t,0),n=this.Mc.$t(e);return null!==n&&t.isEqual(n.key)},t}(),Io=function(){function t(t,e){this.key=t,this.Gc=e}return t.Oc=function(t,e){return O.i(t.key,e.key)||X(t.Gc,e.Gc)},t.Bc=function(t,e){return X(t.Gc,e.Gc)||O.i(t.key,e.key)},t}(),Oo=function(t,e){this.user=e,this.type="OAuth",this.zc={},this.zc.Authorization="Bearer "+t},Ao=function(){function t(){this.Hc=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.Yc=function(){},t.prototype.Jc=function(t){this.Hc=t,t(Ur.UNAUTHENTICATED)},t.prototype.Xc=function(){this.Hc=null},t}(),xo=function(){function t(t){var e=this;this.Zc=null,this.currentUser=Ur.UNAUTHENTICATED,this.tu=!1,this.eu=0,this.Hc=null,this.forceRefresh=!1,this.Zc=function(){e.eu++,e.currentUser=e.nu(),e.tu=!0,e.Hc&&e.Hc(e.currentUser)},this.eu=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Zc):(this.Zc(null),t.get().then((function(t){e.auth=t,e.Zc&&e.auth.addAuthTokenListener(e.Zc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.eu,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.eu!==e?(p("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(_("string"==typeof n.accessToken),new Oo(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.Yc=function(){this.forceRefresh=!0},t.prototype.Jc=function(t){this.Hc=t,this.tu&&t(this.currentUser)},t.prototype.Xc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Zc),this.Zc=null,this.Hc=null},t.prototype.nu=function(){var t=this.auth&&this.auth.getUid();return _(null===t||"string"==typeof t),new Ur(t)},t}(),No=function(){function t(t,e){this.su=t,this.iu=e,this.type="FirstParty",this.user=Ur.ei}return Object.defineProperty(t.prototype,"zc",{get:function(){var t={"X-Goog-AuthUser":this.iu},e=this.su.auth.ru([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Po=function(){function t(t,e){this.su=t,this.iu=e}return t.prototype.getToken=function(){return Promise.resolve(new No(this.su,this.iu))},t.prototype.Jc=function(t){t(Ur.ei)},t.prototype.Xc=function(){},t.prototype.Yc=function(){},t}(),Do=function(){function t(t,e,n,r,i,o){this._n=t,this.ou=n,this.au=r,this.cu=i,this.listener=o,this.state=0,this.uu=0,this.hu=null,this.stream=null,this.gs=new pr(t,e)}return t.prototype.lu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype._u=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.fu()},t.prototype.stop=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.lu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.du=function(){this.state=0,this.gs.reset()},t.prototype.wu=function(){var t=this;this._u()&&null===this.hu&&(this.hu=this._n.gn(this.ou,6e4,(function(){return t.mu()})))},t.prototype.Tu=function(t){this.Eu(),this.stream.send(t)},t.prototype.mu=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this._u()?[2,this.close(0)]:[2]}))}))},t.prototype.Eu=function(){this.hu&&(this.hu.cancel(),this.hu=null)},t.prototype.close=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return this.Eu(),this.gs.cancel(),this.uu++,3!==t?this.gs.reset():e&&e.code===l.RESOURCE_EXHAUSTED?(v(e.toString()),v("Using maximum backoff delay to prevent overloading the backend."),this.gs.An()):e&&e.code===l.UNAUTHENTICATED&&this.cu.Yc(),null!==this.stream&&(this.Iu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Au(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Iu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.Ru(this.uu),n=this.uu;this.cu.getToken().then((function(e){t.uu===n&&t.Pu(e)}),(function(n){e((function(){var e=new h(l.UNKNOWN,"Fetching auth token failed: "+n.message);return t.gu(e)}))}))},t.prototype.Pu=function(t){var e=this,n=this.Ru(this.uu);this.stream=this.yu(t),this.stream.Vu((function(){n((function(){return e.state=2,e.listener.Vu()}))})),this.stream.Au((function(t){n((function(){return e.gu(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.fu=function(){var t=this;this.state=4,this.gs.Rn((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.gu=function(t){return p("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.Ru=function(t){var e=this;return function(n){e._n.ds((function(){return e.uu===t?n():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ro=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,a}return r.__extends(e,t),e.prototype.yu=function(t){return this.au.pu("Listen",t)},e.prototype.onMessage=function(t){this.gs.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:m()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Ue?(_(void 0===e||"string"==typeof e),$.fromBase64String(e||"")):(_(void 0===e||e instanceof Uint8Array),$.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(t){var e=void 0===t.code?l.UNKNOWN:Et(t.code);return new h(e,t.message||"")}(a);n=new Wt(r,i,o,s||null)}else if("documentChange"in e){var u=e.documentChange,c=Ie(t,u.document.name),f=Ce(u.document.updateTime),d=new Sn({mapValue:{fields:u.document.fields}}),p=new An(c,f,d,{});n=new Bt(u.targetIds||[],u.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){var v=e.documentDelete,y=Ie(t,v.document),g=v.readTime?Ce(v.readTime):ut.min(),b=new xn(y,g);n=new Bt([],v.removedTargetIds||[],b.key,b)}else if("documentRemove"in e){var w=e.documentRemove,E=Ie(t,w.document);n=new Bt([],w.removedTargetIds||[],E,null)}else{if(!("filter"in e))return m();var C=e.filter,k=new bt(C.count||0);n=new zt(C.targetId,k)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return ut.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ut.min():e.readTime?Ce(e.readTime):ut.min()}(t);return this.listener.bu(e,n)},e.prototype.vu=function(t){var e={};e.database=xe(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=yt(r)?{documents:Le(t,r)}:{query:je(t,r)}).targetId=e.targetId,e.resumeToken.O()>0&&(n.resumeToken=we(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return m()}}(0,e.tt);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.Tu(e)},e.prototype.Su=function(t){var e={};e.database=xe(this.serializer),e.removeTarget=t,this.Tu(e)},e}(Do),Lo=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,a.Du=!1,a}return r.__extends(e,t),Object.defineProperty(e.prototype,"Cu",{get:function(){return this.Du},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Du=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.Iu=function(){this.Du&&this.Nu([])},e.prototype.yu=function(t){return this.au.pu("Write",t)},e.prototype.onMessage=function(t){if(_(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Du){this.gs.reset();var e=function(t,e){return t&&t.length>0?(_(void 0!==e),t.map((function(t){return function(t,e){var n=Ce(t.updateTime?t.updateTime:e);n.isEqual(ut.min())&&(n=Ce(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new un(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Ce(t.commitTime);return this.listener.Fu(n,e)}return _(!t.writeResults||0===t.writeResults.length),this.Du=!0,this.listener.$u()},e.prototype.xu=function(){var t={};t.database=xe(this.serializer),this.Tu(t)},e.prototype.Nu=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return De(e.serializer,t)}))};this.Tu(n)},e}(Do),jo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.au=n,i.serializer=r,i.ku=!1,i}return r.__extends(e,t),e.prototype.Mu=function(){if(this.ku)throw new h(l.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ou=function(t,e,n){var r=this;return this.Mu(),this.credentials.getToken().then((function(i){return r.au.Ou(t,e,n,i)})).catch((function(t){throw t.code===l.UNAUTHENTICATED&&r.credentials.Yc(),t}))},e.prototype.Lu=function(t,e,n){var r=this;return this.Mu(),this.credentials.getToken().then((function(i){return r.au.Lu(t,e,n,i)})).catch((function(t){throw t.code===l.UNAUTHENTICATED&&r.credentials.Yc(),t}))},e.prototype.terminate=function(){this.ku=!1},e}((function(){})),Fo=function(){function t(t,e){this.os=t,this.fi=e,this.state="Unknown",this.Bu=0,this.qu=null,this.Uu=!0}return t.prototype.Qu=function(){var t=this;0===this.Bu&&(this.Wu("Unknown"),this.qu=this.os.gn("online_state_timeout",1e4,(function(){return t.qu=null,t.ju("Backend didn't respond within 10 seconds."),t.Wu("Offline"),Promise.resolve()})))},t.prototype.Ku=function(t){"Online"===this.state?this.Wu("Unknown"):(this.Bu++,this.Bu>=1&&(this.Gu(),this.ju("Connection failed 1 times. Most recent error: "+t.toString()),this.Wu("Offline")))},t.prototype.set=function(t){this.Gu(),this.Bu=0,"Online"===t&&(this.Uu=!1),this.Wu(t)},t.prototype.Wu=function(t){t!==this.state&&(this.state=t,this.fi(t))},t.prototype.ju=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Uu?(v(e),this.Uu=!1):p("OnlineStateTracker",e)},t.prototype.Gu=function(){null!==this.qu&&(this.qu.cancel(),this.qu=null)},t}(),Mo=function(){function t(t,e,n,i,o){var a=this;this.zu=t,this.Hu=e,this.os=n,this.Yu=[],this.Ju=new Map,this.Xu=null,this.Zu=new Set,this.th={},this.eh=o,this.eh.nh((function(t){n.ds((function(){return r.__awaiter(a,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return Yo(this)?(p("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return(e=b(t)).Zu.add(4),[4,qo(e)];case 1:return n.sent(),e.sh.du(),e.ih.du(),e.rh.set("Unknown"),e.Zu.delete(4),[4,Vo(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.rh=new Fo(n,i),this.ih=function(t,e,n){var r=b(t);return r.Mu(),new Ro(e,r.au,r.credentials,r.serializer,n)}(this.Hu,n,{Vu:Zo.bind(null,this),Au:Jo.bind(null,this),bu:$o.bind(null,this)}),this.sh=function(t,e,n){var r=b(t);return r.Mu(),new Lo(e,r.au,r.credentials,r.serializer,n)}(this.Hu,n,{Vu:oa.bind(null,this),Au:ua.bind(null,this),$u:aa.bind(null,this),Fu:sa.bind(null,this)})}return t.prototype.start=function(){return Uo(this)},t}();function Uo(t){var e=b(t);return e.Zu.delete(0),Vo(e)}function Vo(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return Yo(t)?(Ko(t)?Go(t):t.rh.set("Unknown"),[4,na(t)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}function qo(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,t.sh.stop()];case 1:return e.sent(),[4,t.ih.stop()];case 2:return e.sent(),t.Yu.length>0&&(p("RemoteStore","Stopping write stream with "+t.Yu.length+" pending writes"),t.Yu=[]),Xo(t),[2]}}))}))}function Ho(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return e=b(t),p("RemoteStore","RemoteStore shutting down."),e.Zu.add(5),[4,qo(e)];case 1:return n.sent(),e.eh.Si(),e.rh.set("Unknown"),[2]}}))}))}function Bo(t,e){var n=b(t);n.Ju.has(e.targetId)||(n.Ju.set(e.targetId,e),Ko(n)?Go(n):n.ih._u()&&Wo(n,e))}function zo(t,e){var n=b(t);n.Ju.delete(e),n.ih._u()&&Qo(n,e),0===n.Ju.size&&(n.ih._u()?n.ih.wu():Yo(n)&&n.rh.set("Unknown"))}function Wo(t,e){t.Xu.Ee(e.targetId),t.ih.vu(e)}function Qo(t,e){t.Xu.Ee(e),t.ih.Su(e)}function Go(t){t.Xu=new Gt({Be:function(e){return t.th.Be(e)},qe:function(e){return t.Ju.get(e)||null}}),t.ih.start(),t.rh.Qu()}function Ko(t){return Yo(t)&&!t.ih.lu()&&t.Ju.size>0}function Yo(t){return 0===b(t).Zu.size}function Xo(t){t.Xu=null}function Zo(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return t.Ju.forEach((function(e,n){Wo(t,e)})),[2]}))}))}function Jo(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){return Xo(t),Ko(t)?(t.rh.Ku(e),Go(t)):t.rh.set("Unknown"),[2]}))}))}function $o(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a;return r.__generator(this,(function(s){switch(s.label){case 0:if(t.rh.set("Online"),!(e instanceof Wt&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?t.Ju.has(a=o[i])?[4,t.th.oh(a,n)]:[3,3]:[3,5];case 2:r.sent(),t.Ju.delete(a),t.Xu.removeTarget(a),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return i=s.sent(),p("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,ta(t,i)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Bt?t.Xu.pe(e):e instanceof zt?t.Xu.$e(e):t.Xu.Se(e),n.isEqual(ut.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,mo(t.zu)];case 8:return o=s.sent(),n.L(o)>=0?[4,function(t,e){var n=t.Xu.Me(e);return n.Gt.forEach((function(n,r){if(n.resumeToken.O()>0){var i=t.Ju.get(r);i&&t.Ju.set(r,i.st(n.resumeToken,e))}})),n.zt.forEach((function(e){var n=t.Ju.get(e);if(n){t.Ju.set(e,n.st($.B,n.et)),Qo(t,e);var r=new _t(n.target,e,1,n.sequenceNumber);Wo(t,r)}})),t.th.ah(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return p("RemoteStore","Failed to raise snapshot:",a=s.sent()),[4,ta(t,a)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function ta(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i=this;return r.__generator(this,(function(o){switch(o.label){case 0:if(!_r(e))throw e;return t.Zu.add(1),[4,qo(t)];case 1:return o.sent(),t.rh.set("Offline"),n||(n=function(){return mo(t.zu)}),t.os.Ds((function(){return r.__awaiter(i,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return p("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Zu.delete(1),[4,Vo(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function ea(t,e){return e().catch((function(n){return ta(t,n,e)}))}function na(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:e=b(t),n=e.Yu.length>0?e.Yu[e.Yu.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return Yo(t)&&t.Yu.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,bo(e.zu,n)];case 3:return null===(i=r.sent())?(0===e.Yu.length&&e.sh.wu(),[3,7]):(n=i.batchId,function(t,e){t.Yu.push(e),t.sh._u()&&t.sh.Cu&&t.sh.Nu(e.mutations)}(e,i),[3,6]);case 4:return o=r.sent(),[4,ta(e,o)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return ra(e)&&ia(e),[2]}}))}))}function ra(t){return Yo(t)&&!t.sh.lu()&&t.Yu.length>0}function ia(t){t.sh.start()}function oa(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return t.sh.xu(),[2]}))}))}function aa(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){for(e=0,n=t.Yu;e<n.length;e++)t.sh.Nu(n[e].mutations);return[2]}))}))}function sa(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return i=t.Yu.shift(),o=Jr.from(i,e,n),[4,ea(t,(function(){return t.th.uh(o)}))];case 1:return r.sent(),[4,na(t)];case 2:return r.sent(),[2]}}))}))}function ua(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return e&&t.sh.Cu?[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return wt(i=e.code)&&i!==l.ABORTED?(n=t.Yu.shift(),t.sh.du(),[4,ea(t,(function(){return t.th.hh(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,na(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return ra(t)&&ia(t),[2]}}))}))}function ca(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return n=b(t),e?(n.Zu.delete(2),[4,Vo(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Zu.add(2),[4,qo(n)]);case 3:r.sent(),n.rh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}var la=function(t){this.key=t},ha=function(t){this.key=t},fa=function(){function t(t,e){this.query=t,this.lh=e,this._h=null,this.Zt=!1,this.fh=Lt(),this.Qt=Lt(),this.dh=Xn(t),this.wh=new Mt(this.dh)}return Object.defineProperty(t.prototype,"mh",{get:function(){return this.lh},enumerable:!1,configurable:!0}),t.prototype.Th=function(t,e){var n=this,r=e?e.Eh:new Ut,i=e?e.wh:this.wh,o=e?e.Qt:this.Qt,a=i,s=!1,u=jn(this.query)&&i.size===this.query.limit?i.last():null,c=Fn(this.query)&&i.size===this.query.limit?i.first():null;if(t.ut((function(t,e){var l=i.get(t),h=e instanceof An?e:null;h&&(h=Yn(n.query,h)?h:null);var f=!!l&&n.Qt.has(l.key),d=!!h&&(h.Ye||n.Qt.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Ih(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.dh(h,u)>0||c&&n.dh(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),jn(this.query)||Fn(this.query))for(;a.size>this.query.limit;){var l=jn(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{wh:a,Eh:r,Ah:s,Qt:o}},t.prototype.Ih=function(t,e){return t.Ye&&e.hasCommittedMutations&&!e.Ye},t.prototype.gr=function(t,e,n){var r=this,i=this.wh;this.wh=t.wh,this.Qt=t.Qt;var o=t.Eh.qt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return m()}};return n(t)-n(e)}(t.type,e.type)||r.dh(t.doc,e.doc)})),this.Rh(n);var a=e?this.Ph():[],s=0===this.fh.size&&this.Zt?1:0,u=s!==this._h;return this._h=s,0!==o.length||u?{snapshot:new Vt(this.query,t.wh,i,o,t.Qt,0===s,u,!1),gh:a}:{gh:a}},t.prototype.Us=function(t){return this.Zt&&"Offline"===t?(this.Zt=!1,this.gr({wh:this.wh,Eh:new Ut,Qt:this.Qt,Ah:!1},!1)):{gh:[]}},t.prototype.yh=function(t){return!this.lh.has(t)&&!!this.wh.has(t)&&!this.wh.get(t).Ye},t.prototype.Rh=function(t){var e=this;t&&(t.te.forEach((function(t){return e.lh=e.lh.add(t)})),t.ee.forEach((function(t){})),t.ne.forEach((function(t){return e.lh=e.lh.delete(t)})),this.Zt=t.Zt)},t.prototype.Ph=function(){var t=this;if(!this.Zt)return[];var e=this.fh;this.fh=Lt(),this.wh.forEach((function(e){t.yh(e.key)&&(t.fh=t.fh.add(e.key))}));var n=[];return e.forEach((function(e){t.fh.has(e)||n.push(new ha(e))})),this.fh.forEach((function(t){e.has(t)||n.push(new la(t))})),n},t.prototype.Vh=function(t){this.lh=t.kc,this.fh=Lt();var e=this.Th(t.documents);return this.gr(e,!0)},t.prototype.ph=function(){return Vt.Kt(this.query,this.wh,this.Qt,0===this._h)},t}(),da=function(t,e,n){this.query=t,this.targetId=e,this.view=n},pa=function(t){this.key=t,this.bh=!1},va=function(){function t(t,e,n,r,i){this.zu=t,this.Sh=e,this.Dh=n,this.currentUser=r,this.Ch=i,this.Nh=null,this.Fh=new at((function(t){return Gn(t)}),Qn),this.$h=new Map,this.xh=[],this.kh=new Ct(O.i),this.Mh=new Map,this.Oh=new To,this.Lh={},this.Bh=new Map,this.qh=no.Ta(),this.onlineState="Unknown",this.Uh=void 0}return Object.defineProperty(t.prototype,"Qh",{get:function(){return!0===this.Uh},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){this.Nh=t},t.prototype.Wh=function(t){},t}();function ya(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return(n=Ha(t)).Wh("listen()"),(o=n.Fh.get(e))?(n.Dh.Mi(o.targetId),i=o.view.ph(),[3,4]):[3,1];case 1:return[4,wo(n.zu,Hn(e))];case 2:return a=r.sent(),s=n.Dh.Mi(a.targetId),[4,ga(n,e,a.targetId,"current"===s)];case 3:i=r.sent(),n.Qh&&Bo(n.Sh,a),r.label=4;case 4:return[2,i]}}))}))}function ga(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s,u,c,l;return r.__generator(this,(function(h){switch(h.label){case 0:return t.jh=function(e,n,i){return function(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return(o=e.view.Th(n)).Ah?[4,Co(t.zu,e.query,!1).then((function(t){return e.view.Th(t.documents,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return a=i&&i.Gt.get(e.targetId),s=e.view.gr(o,t.Qh,a),[2,(Oa(t,e.targetId,s.gh),s.snapshot)]}}))}))}(t,e,n,i)},[4,Co(t.zu,e,!0)];case 1:return o=h.sent(),a=new fa(e,o.kc),s=a.Th(o.documents),u=Ht.Xt(n,i&&"Offline"!==t.onlineState),c=a.gr(s,t.Qh,u),Oa(t,n,c.gh),l=new da(e,n,a),[2,(t.Fh.set(e,l),t.$h.has(n)?t.$h.get(n).push(e):t.$h.set(n,[e]),c.snapshot)]}}))}))}function ma(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return(n=b(t)).Wh("unlisten()"),i=n.Fh.get(e),(o=n.$h.get(i.targetId)).length>1?[2,(n.$h.set(i.targetId,o.filter((function(t){return!Qn(t,e)}))),void n.Fh.delete(e))]:n.Qh?(n.Dh.Li(i.targetId),n.Dh.Ni(i.targetId)?[3,2]:[4,Eo(n.zu,i.targetId,!1).then((function(){n.Dh.qi(i.targetId),zo(n.Sh,i.targetId),Ta(n,i.targetId)})).catch(So)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return Ta(n,i.targetId),[4,Eo(n.zu,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function _a(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:(n=b(t)).Wh("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,_o(n.zu,e)];case 2:return i=r.sent(),e.Gt.forEach((function(t,e){var r=n.Mh.get(e);r&&(_(t.te.size+t.ee.size+t.ne.size<=1),t.te.size>0?r.bh=!0:t.ee.size>0?_(r.bh):t.ne.size>0&&(_(r.bh),r.bh=!1))})),[4,Na(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,So(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function ba(t,e,n){var r=b(t);if(r.Qh&&0===n||!r.Qh&&1===n){r.Wh("applyOnlineStateChange()");var i=[];r.Fh.forEach((function(t,n){var r=n.view.Us(e);r.snapshot&&i.push(r.snapshot)})),r.Nh.Kh(e),r.Nh.bu(i),r.onlineState=e,r.Qh&&r.Dh.ji(e)}}function wa(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:return(i=b(t)).Wh("rejectListens()"),i.Dh.Ui(e,"rejected",n),o=i.Mh.get(e),(a=o&&o.key)?(s=(s=new Ct(O.i)).rt(a,new xn(a,ut.min())),u=Lt().add(a),c=new qt(ut.min(),new Map,new Tt(X),s,u),[4,_a(i,c)]):[3,2];case 1:return r.sent(),i.kh=i.kh.remove(a),i.Mh.delete(e),xa(i),[3,4];case 2:return[4,Eo(i.zu,e,!1).then((function(){return Ta(i,e,n)})).catch(So)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function Ea(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:(n=b(t)).Wh("applySuccessfulWrite()"),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,go(n.zu,e)];case 2:return o=r.sent(),Sa(n,i,null),ka(n,i),n.Dh.xi(i,"acknowledged"),[4,Na(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,So(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Ca(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:(i=b(t)).Wh("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=b(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.vr.Mo(t,e).next((function(e){return _(null!==e),r=e.keys(),n.vr.Qo(t,e)})).next((function(){return n.vr.Go(t)})).next((function(){return n.$c.$r(t,r)}))}))}(i.zu,e)];case 2:return o=r.sent(),Sa(i,e,n),ka(i,e),i.Dh.xi(e,"rejected",n),[4,Na(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,So(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function ka(t,e){(t.Bh.get(e)||[]).forEach((function(t){t.resolve()})),t.Bh.delete(e)}function Sa(t,e,n){var r=b(t),i=r.Lh[r.currentUser.Zs()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lh[r.currentUser.Zs()]=i}}function Ta(t,e,n){void 0===n&&(n=null),t.Dh.Li(e);for(var r=0,i=t.$h.get(e);r<i.length;r++){var o=i[r];t.Fh.delete(o),n&&t.Nh.Gh(o,n)}t.$h.delete(e),t.Qh&&t.Oh.Wc(e).forEach((function(e){t.Oh.zo(e)||Ia(t,e)}))}function Ia(t,e){var n=t.kh.get(e);null!==n&&(zo(t.Sh,n),t.kh=t.kh.remove(e),t.Mh.delete(n),xa(t))}function Oa(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof la?(t.Oh.Fa(o.key,e),Aa(t,o)):o instanceof ha?(p("SyncEngine","Document no longer in limbo: "+o.key),t.Oh.xa(o.key,e),t.Oh.zo(o.key)||Ia(t,o.key)):m()}}function Aa(t,e){var n=e.key;t.kh.get(n)||(p("SyncEngine","New document in limbo: "+n),t.xh.push(n),xa(t))}function xa(t){for(;t.xh.length>0&&t.kh.size<t.Ch;){var e=t.xh.shift(),n=t.qh.next();t.Mh.set(n,new pa(e)),t.kh=t.kh.rt(e,n),Bo(t.Sh,new _t(Hn(Ln(e.path)),n,2,Vr.oi))}}function Na(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s;return r.__generator(this,(function(u){switch(u.label){case 0:return i=b(t),o=[],a=[],s=[],i.Fh.forEach((function(t,r){s.push(i.jh(r,e,n).then((function(t){if(t){i.Qh&&i.Dh.Ui(r.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=ri.Gr(r.targetId,t);a.push(e)}})))})),[4,Promise.all(s)];case 1:return u.sent(),i.Nh.bu(o),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,c,l;return r.__generator(this,(function(r){switch(r.label){case 0:n=b(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return vr.forEach(e,(function(e){return vr.forEach(e.jr,(function(r){return n.persistence.Co.Fa(t,e.targetId,r)})).next((function(){return vr.forEach(e.Kr,(function(r){return n.persistence.Co.xa(t,e.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!_r(i=r.sent()))throw i;return p("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,a=e;o<a.length;o++)u=(s=a[o]).targetId,s.fromCache||(c=n.Dc.get(u),l=c.it(c.et),n.Dc=n.Dc.rt(u,l));return[2]}}))}))}(i.zu,a)];case 2:return u.sent(),[2]}}))}))}function Pa(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(o){switch(o.label){case 0:return(n=b(t)).currentUser.isEqual(e)?[3,3]:(p("SyncEngine","User change. New user:",e.Zs()),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return n=b(t),i=n.vr,o=n.$c,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n.vr.qo(t).next((function(a){return r=a,i=n.persistence.Ic(e),o=new ni(n.Fc,i,n.persistence.Pc()),i.qo(t)})).next((function(e){for(var n=[],i=[],a=Lt(),s=0,u=r;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)a=a.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];i.push(p.batchId);for(var v=0,y=p.mutations;v<y.length;v++)a=a.add(y[v].key)}return o.$r(t,a).next((function(t){return{zh:t,Hh:n,Yh:i}}))}))}))];case 1:return a=r.sent(),[2,(n.vr=i,n.$c=o,n.Sc.xc(n.$c),a)]}}))}))}(n.zu,e)]);case 1:return i=o.sent(),n.currentUser=e,function(t,e){t.Bh.forEach((function(t){t.forEach((function(t){t.reject(new h(l.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Bh.clear()}(n),n.Dh.Wi(e,i.Hh,i.Yh),[4,Na(n,i.zh)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function Da(t,e){var n=b(t),r=n.Mh.get(e);if(r&&r.bh)return Lt().add(r.key);var i=Lt(),o=n.$h.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=n.Fh.get(s[a]);i=i.xt(u.view.mh)}return i}function Ra(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,Co((n=b(t)).zu,e.query,!0)];case 1:return i=r.sent(),o=e.view.Vh(i),[2,(n.Qh&&Oa(n,e.targetId,o.gh),o)]}}))}))}function La(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return(o=b(t)).Wh("applyBatchState()"),[4,function(t,e){var n=b(t),r=b(n.vr);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Oo(t,e).next((function(e){return e?n.$c.$r(t,e):vr.resolve(null)}))}))}(o.zu,e)];case 1:return null===(a=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,na(o.Sh)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Sa(o,e,i||null),function(t,e){b(b(t).vr).jo(e)}(o.zu,e)):m(),r.label=4;case 4:return[4,Na(o,a)];case 5:return r.sent(),[3,7];case 6:p("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}}))}))}function ja(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:return Ha(n=b(t)),Ba(n),!0!==e||!0===n.Uh?[3,3]:(i=n.Dh.Di(),[4,Fa(n,i.A())]);case 1:return o=r.sent(),n.Uh=!0,[4,ca(n.Sh,!0)];case 2:for(r.sent(),a=0,s=o;a<s.length;a++)Bo(n.Sh,s[a]);return[3,7];case 3:return!1!==e||!1===n.Uh?[3,7]:(u=[],c=Promise.resolve(),n.$h.forEach((function(t,e){n.Dh.Bi(e)?u.push(e):c=c.then((function(){return Ta(n,e),Eo(n.zu,e,!0)})),zo(n.Sh,e)})),[4,c]);case 4:return r.sent(),[4,Fa(n,u)];case 5:return r.sent(),function(t){var e=b(t);e.Mh.forEach((function(t,n){zo(e.Sh,n)})),e.Oh.jc(),e.Mh=new Map,e.kh=new Ct(O.i)}(n),n.Uh=!1,[4,ca(n.Sh,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function Fa(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,c,l,h,f,d,p,v;return r.__generator(this,(function(r){switch(r.label){case 0:n=b(t),i=[],o=[],a=0,s=e,r.label=1;case 1:return a<s.length?(c=void 0,(l=n.$h.get(u=s[a]))&&0!==l.length?[4,wo(n.zu,Hn(l[0]))]:[3,7]):[3,13];case 2:c=r.sent(),h=0,f=l,r.label=3;case 3:return h<f.length?(d=n.Fh.get(f[h]),[4,Ra(n,d)]):[3,6];case 4:(p=r.sent()).snapshot&&o.push(p.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,ko(n.zu,u)];case 8:return v=r.sent(),[4,wo(n.zu,v)];case 9:return c=r.sent(),[4,ga(n,Ma(v),u,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return a++,[3,1];case 13:return[2,(n.Nh.bu(o),i)]}}))}))}function Ma(t){return Rn(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ua(t){var e=b(t);return b(b(e.zu).persistence).Vi()}function Va(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return(o=b(t)).Uh?(p("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.$h.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,function(t){var e=b(t),n=b(e.Fc);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n.ia(t,e.Nc)})).then((function(t){var n=t.ra;return e.Nc=t.readTime,n}))}(o.zu)];case 3:return a=r.sent(),s=qt.Jt(e,"current"===n),[4,Na(o,a,s)];case 4:return r.sent(),[3,8];case 5:return[4,Eo(o.zu,e,!0)];case 6:return r.sent(),Ta(o,e,i),[3,8];case 7:m(),r.label=8;case 8:return[2]}}))}))}function qa(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f;return r.__generator(this,(function(d){switch(d.label){case 0:if(!(i=Ha(t)).Uh)return[3,10];o=0,a=e,d.label=1;case 1:return o<a.length?i.$h.has(s=a[o])?(p("SyncEngine","Adding an already active target "+s),[3,5]):[4,ko(i.zu,s)]:[3,6];case 2:return u=d.sent(),[4,wo(i.zu,u)];case 3:return c=d.sent(),[4,ga(i,Ma(u),c.targetId,!1)];case 4:d.sent(),Bo(i.Sh,c),d.label=5;case 5:return o++,[3,1];case 6:l=function(t){return r.__generator(this,(function(e){switch(e.label){case 0:return i.$h.has(t)?[4,Eo(i.zu,t,!1).then((function(){zo(i.Sh,t),Ta(i,t)})).catch(So)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,d.label=7;case 7:return h<f.length?[5,l(f[h])]:[3,10];case 8:d.sent(),d.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ha(t){var e=b(t);return e.Sh.th.ah=_a.bind(null,e),e.Sh.th.Be=Da.bind(null,e),e.Sh.th.oh=wa.bind(null,e),e}function Ba(t){var e=b(t);return e.Sh.th.uh=Ea.bind(null,e),e.Sh.th.hh=Ca.bind(null,e),e}var za=function(){function t(){}return t.prototype.xc=function(t){this.Jh=t},t.prototype.Or=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.rn.length||1===t.rn.length&&t.rn[0].field.p())}(e)||n.isEqual(ut.min())?this.Xh(t,e):this.Jh.$r(t,r).next((function(a){var s=i.Zh(e,a);return(jn(e)||Fn(e))&&i.Ah(e.on,s,r,n)?i.Xh(t,e):(d()<=o.LogLevel.DEBUG&&p("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Kn(e)),i.Jh.Or(t,e,n).next((function(t){return s.forEach((function(e){t=t.rt(e.key,e)})),t})))}))},t.prototype.Zh=function(t,e){var n=new Tt(Xn(t));return e.forEach((function(e,r){r instanceof An&&Yn(t,r)&&(n=n.add(r))})),n},t.prototype.Ah=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.L(r)>0)},t.prototype.Xh=function(t,e){return d()<=o.LogLevel.DEBUG&&p("IndexFreeQueryEngine","Using full collection scan to execute query:",Kn(e)),this.Jh.Or(t,e,ut.min())},t}(),Wa=function(){function t(t,e){this.Sr=t,this.Co=e,this.vr=[],this.tl=1,this.el=new Tt(Io.Oc)}return t.prototype.$o=function(t){return vr.resolve(0===this.vr.length)},t.prototype.xo=function(t,e,n,r){var i=this.tl;this.tl++;var o=new Zr(i,e,n,r);this.vr.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.el=this.el.add(new Io(u.key,i)),this.Sr.ko(t,u.key.path.h())}return vr.resolve(o)},t.prototype.Mo=function(t,e){return vr.resolve(this.nl(e))},t.prototype.Lo=function(t,e){var n=this.sl(e+1),r=n<0?0:n;return vr.resolve(this.vr.length>r?this.vr[r]:null)},t.prototype.Bo=function(){return vr.resolve(0===this.vr.length?-1:this.tl-1)},t.prototype.qo=function(t){return vr.resolve(this.vr.slice())},t.prototype.Cr=function(t,e){var n=this,r=new Io(e,0),i=new Io(e,Number.POSITIVE_INFINITY),o=[];return this.el.Nt([r,i],(function(t){var e=n.nl(t.Gc);o.push(e)})),vr.resolve(o)},t.prototype.Mr=function(t,e){var n=this,r=new Tt(X);return e.forEach((function(t){var e=new Io(t,0),i=new Io(t,Number.POSITIVE_INFINITY);n.el.Nt([e,i],(function(t){r=r.add(t.Gc)}))})),vr.resolve(this.il(r))},t.prototype.Qr=function(t,e){var n=e.path,r=n.length+1,i=n;O.F(i)||(i=i.child(""));var o=new Io(new O(i),0),a=new Tt(X);return this.el.Ft((function(t){var e=t.key.path;return!!n.T(e)&&(e.length===r&&(a=a.add(t.Gc)),!0)}),o),vr.resolve(this.il(a))},t.prototype.il=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.nl(t);null!==r&&n.push(r)})),n},t.prototype.Qo=function(t,e){var n=this;_(0===this.rl(e.batchId,"removed")),this.vr.shift();var r=this.el;return vr.forEach(e.mutations,(function(i){var o=new Io(i.key,e.batchId);return r=r.delete(o),n.Co.Ko(t,i.key)})).next((function(){n.el=r}))},t.prototype.jo=function(t){},t.prototype.zo=function(t,e){var n=new Io(e,0),r=this.el.$t(n);return vr.resolve(e.isEqual(r&&r.key))},t.prototype.Go=function(t){return vr.resolve()},t.prototype.rl=function(t,e){return this.sl(t)},t.prototype.sl=function(t){return 0===this.vr.length?0:t-this.vr[0].batchId},t.prototype.nl=function(t){var e=this.sl(t);return e<0||e>=this.vr.length?null:this.vr[e]},t}(),Qa=function(){function t(t,e){this.Sr=t,this.ol=e,this.docs=new Ct(O.i),this.size=0}return t.prototype.Tr=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ol(e);return this.docs=this.docs.rt(r,{Zo:e,size:a,readTime:n}),this.size+=a-o,this.Sr.ko(t,r.path.h())},t.prototype.Ir=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Ar=function(t,e){var n=this.docs.get(e);return vr.resolve(n?n.Zo:null)},t.prototype.getEntries=function(t,e){var n=this,r=xt();return e.forEach((function(t){var e=n.docs.get(t);r=r.rt(t,e?e.Zo:null)})),vr.resolve(r)},t.prototype.Or=function(t,e,n){for(var r=Pt(),i=new O(e.path.child("")),o=this.docs._t(i);o.It();){var a=o.Et(),s=a.value,u=s.Zo,c=s.readTime;if(!e.path.T(a.key.path))break;c.L(n)<=0||u instanceof An&&Yn(e,u)&&(r=r.rt(u.key,u))}return vr.resolve(r)},t.prototype.al=function(t,e){return vr.forEach(this.docs,(function(t){return e(t)}))},t.prototype.aa=function(e){return new t.ca(this)},t.prototype.ha=function(t){return vr.resolve(this.size)},t}();Qa.ca=function(t){function e(e){var n=this;return(n=t.call(this)||this).la=e,n}return r.__extends(e,t),e.prototype.gr=function(t){var e=this,n=[];return this.dr.forEach((function(r,i){i?n.push(e.la.Tr(t,i,e.readTime)):e.la.Ir(r)})),vr.$n(n)},e.prototype.Rr=function(t,e){return this.la.Ar(t,e)},e.prototype.Pr=function(t,e){return this.la.getEntries(t,e)},e}($r);var Ga=function(){function t(t){this.persistence=t,this.cl=new at((function(t){return pt(t)}),vt),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.ul=0,this.hl=new To,this.targetCount=0,this.ll=no.ma()}return t.prototype.De=function(t,e){return this.cl.forEach((function(t,n){return e(n)})),vr.resolve()},t.prototype.Ra=function(t){return vr.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Pa=function(t){return vr.resolve(this.ul)},t.prototype.Ea=function(t){return this.highestTargetId=this.ll.next(),vr.resolve(this.highestTargetId)},t.prototype.ga=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ul&&(this.ul=e),vr.resolve()},t.prototype.Va=function(t){this.cl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ll=new no(e),this.highestTargetId=e),t.sequenceNumber>this.ul&&(this.ul=t.sequenceNumber)},t.prototype.ya=function(t,e){return this.Va(e),this.targetCount+=1,vr.resolve()},t.prototype.ba=function(t,e){return this.Va(e),vr.resolve()},t.prototype.va=function(t,e){return this.cl.delete(e.target),this.hl.Wc(e.targetId),this.targetCount-=1,vr.resolve()},t.prototype.Vo=function(t,e,n){var r=this,i=0,o=[];return this.cl.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.cl.delete(a),o.push(r.Sa(t,s.targetId)),i++)})),vr.$n(o).next((function(){return i}))},t.prototype.Da=function(t){return vr.resolve(this.targetCount)},t.prototype.Ca=function(t,e){var n=this.cl.get(e)||null;return vr.resolve(n)},t.prototype.Na=function(t,e,n){return this.hl.qc(e,n),vr.resolve()},t.prototype.$a=function(t,e,n){this.hl.Qc(e,n);var r=this.persistence.Co,i=[];return r&&e.forEach((function(e){i.push(r.Ko(t,e))})),vr.$n(i)},t.prototype.Sa=function(t,e){return this.hl.Wc(e),vr.resolve()},t.prototype.ka=function(t,e){var n=this.hl.Kc(e);return vr.resolve(n)},t.prototype.zo=function(t,e){return vr.resolve(this.hl.zo(e))},t}(),Ka=function(){function t(t){var e=this;this._l={},this.Ba=new Vr(0),this.qa=!1,this.qa=!0,this.Co=t(this),this.Ha=new Ga(this),this.Sr=new Li,this.br=new Qa(this.Sr,(function(t){return e.Co.fl(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Si=function(){return this.qa=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ti",{get:function(){return this.qa},enumerable:!1,configurable:!0}),t.prototype.nc=function(){},t.prototype.sc=function(){},t.prototype.Pc=function(){return this.Sr},t.prototype.Ic=function(t){var e=this._l[t.Zs()];return e||(e=new Wa(this.Sr,this.Co),this._l[t.Zs()]=e),e},t.prototype.Ac=function(){return this.Ha},t.prototype.Rc=function(){return this.br},t.prototype.runTransaction=function(t,e,n){var r=this;p("MemoryPersistence","Starting transaction:",t);var i=new Ya(this.Ba.next());return this.Co.dl(),n(i).next((function(t){return r.Co.wl(i).next((function(){return t}))})).Nn().then((function(t){return i.pr(),t}))},t.prototype.ml=function(t,e){return vr.xn(Object.values(this._l).map((function(n){return function(){return n.zo(t,e)}})))},t}(),Ya=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ma=e,n}return r.__extends(e,t),e}(ei),Xa=function(){function t(t){this.persistence=t,this.Tl=new To,this.El=null}return t.Il=function(e){return new t(e)},Object.defineProperty(t.prototype,"Al",{get:function(){if(this.El)return this.El;throw m()},enumerable:!1,configurable:!0}),t.prototype.Fa=function(t,e,n){return this.Tl.Fa(n,e),this.Al.delete(n.toString()),vr.resolve()},t.prototype.xa=function(t,e,n){return this.Tl.xa(n,e),this.Al.add(n.toString()),vr.resolve()},t.prototype.Ko=function(t,e){return this.Al.add(e.toString()),vr.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Tl.Wc(e.targetId).forEach((function(t){return n.Al.add(t.toString())}));var r=this.persistence.Ac();return r.ka(t,e.targetId).next((function(t){t.forEach((function(t){return n.Al.add(t.toString())}))})).next((function(){return r.va(t,e)}))},t.prototype.dl=function(){this.El=new Set},t.prototype.wl=function(t){var e=this,n=this.persistence.Rc().aa();return vr.forEach(this.Al,(function(r){var i=O.D(r);return e.Rl(t,i).next((function(t){t||n.Ir(i)}))})).next((function(){return e.El=null,n.apply(t)}))},t.prototype.vc=function(t,e){var n=this;return this.Rl(t,e).next((function(t){t?n.Al.delete(e.toString()):n.Al.add(e.toString())}))},t.prototype.fl=function(t){return 0},t.prototype.Rl=function(t,e){var n=this;return vr.xn([function(){return vr.resolve(n.Tl.zo(e))},function(){return n.persistence.Ac().zo(t,e)},function(){return n.persistence.ml(t,e)}])},t}(),Za=function(){function t(t){this.Pl=t.Pl,this.gl=t.gl}return t.prototype.Vu=function(t){this.yl=t},t.prototype.Au=function(t){this.Vl=t},t.prototype.onMessage=function(t){this.pl=t},t.prototype.close=function(){this.gl()},t.prototype.send=function(t){this.Pl(t)},t.prototype.bl=function(){this.yl()},t.prototype.vl=function(t){this.Vl(t)},t.prototype.Sl=function(t){this.pl(t)},t}(),Ja={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},$a=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n}return r.__extends(e,t),e.prototype.xl=function(t,e,n,r){return new Promise((function(i,o){var a=new s.XhrIo;a.listenOnce(s.EventType.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case s.ErrorCode.NO_ERROR:var e=a.getResponseJson();p("Connection","XHR received:",JSON.stringify(e)),i(e);break;case s.ErrorCode.TIMEOUT:p("Connection",'RPC "'+t+'" timed out'),o(new h(l.DEADLINE_EXCEEDED,"Request time out"));break;case s.ErrorCode.HTTP_ERROR:var n=a.getStatus();if(p("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(l).indexOf(e)>=0?e:l.UNKNOWN}(r.status);o(new h(u,r.message))}else o(new h(l.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new h(l.UNAVAILABLE,"Connection failed."));break;default:m()}}finally{p("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);a.send(e,"POST",u,n,15)}))},e.prototype.pu=function(t,e){var n=[this.Cl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=s.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.$l(i.initMessageHeaders,e),a.isMobileCordova()||a.isReactNative()||a.isElectron()||a.isIE()||a.isUWP()||a.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");p("Connection","Creating WebChannel: "+o,i);var u=r.createWebChannel(o,i),c=!1,f=!1,d=new Za({Pl:function(t){f?p("Connection","Not sending because WebChannel is closed:",t):(c||(p("Connection","Opening WebChannel transport."),u.open(),c=!0),p("Connection","WebChannel sending:",t),u.send(t))},gl:function(){return u.close()}}),v=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return v(s.WebChannel.EventType.OPEN,(function(){f||p("Connection","WebChannel transport opened.")})),v(s.WebChannel.EventType.CLOSE,(function(){f||(f=!0,p("Connection","WebChannel transport closed"),d.vl())})),v(s.WebChannel.EventType.ERROR,(function(t){f||(f=!0,y("Connection","WebChannel transport errored:",t),d.vl(new h(l.UNAVAILABLE,"The operation could not be completed")))})),v(s.WebChannel.EventType.MESSAGE,(function(t){var e;if(!f){var n=t.data[0];_(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){p("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=gt[t];if(void 0!==e)return Et(e)}(i),a=r.message;void 0===o&&(o=l.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),f=!0,d.vl(new h(o,a)),u.close()}else p("Connection","WebChannel received:",n),d.Sl(n)}})),setTimeout((function(){d.bl()}),0),d},e}(function(){function t(t){this.Dl=t,this.U=t.U,this.Cl=(t.ssl?"https":"http")+"://"+t.host,this.Nl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}return t.prototype.Ou=function(t,e,n,r){var i=this.Fl(t,e);p("RestConnection","Sending: ",i,n);var o={};return this.$l(o,r),this.xl(t,i,o,n).then((function(t){return p("RestConnection","Received: ",t),t}),(function(e){throw y("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Lu=function(t,e,n,r){return this.Ou(t,e,n,r)},t.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.20.0",t["Content-Type"]="text/plain",e)for(var n in e.zc)e.zc.hasOwnProperty(n)&&(t[n]=e.zc[n])},t.prototype.Fl=function(t,e){return this.Cl+"/v1/"+e+":"+Ja[t]},t}()),ts=function(){function t(){var t=this;this.kl=function(){return t.Ml()},this.Ol=function(){return t.Ll()},this.Bl=[],this.ql()}return t.prototype.nh=function(t){this.Bl.push(t)},t.prototype.Si=function(){window.removeEventListener("online",this.kl),window.removeEventListener("offline",this.Ol)},t.prototype.ql=function(){window.addEventListener("online",this.kl),window.addEventListener("offline",this.Ol)},t.prototype.Ml=function(){p("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Bl;t<e.length;t++)(0,e[t])(0)},t.prototype.Ll=function(){p("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Bl;t<e.length;t++)(0,e[t])(1)},t.On=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),es=function(){function t(){}return t.prototype.nh=function(t){},t.prototype.Si=function(){},t}();function ns(t){return new ye(t,!0)}var rs="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",is=function(){function t(){}return t.prototype.initialize=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.Dh=this.Ul(t),this.persistence=this.Ql(t),[4,this.persistence.start()];case 1:return e.sent(),this.Wl=this.jl(t),this.zu=this.Kl(t),[2]}}))}))},t.prototype.jl=function(t){return null},t.prototype.Kl=function(t){return e=this.persistence,n=new za,new yo(e,n,t.Gl);var e,n},t.prototype.Ql=function(t){if(t.Hl.zl)throw new h(l.FAILED_PRECONDITION,rs);return new Ka(Xa.Il)},t.prototype.Ul=function(t){return new Xr},t.prototype.terminate=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.Wl&&this.Wl.stop(),[4,this.Dh.Si()];case 1:return t.sent(),[4,this.persistence.Si()];case 2:return t.sent(),[2]}}))}))},t.prototype.clearPersistence=function(t,e){throw new h(l.FAILED_PRECONDITION,rs)},t}(),os=function(t){function e(e){var n=this;return(n=t.call(this)||this).Yl=e,n}return r.__extends(e,t),e.prototype.initialize=function(e){return r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),[4,this.Yl.initialize(this,e)];case 2:return o.sent(),n=this.Yl._i,this.Dh instanceof Yr?(this.Dh._i={tr:La.bind(null,n),er:Va.bind(null,n),nr:qa.bind(null,n),Vi:Ua.bind(null,n)},[4,this.Dh.start()]):[3,4];case 3:o.sent(),o.label=4;case 4:return[4,this.persistence.ec((function(t){return r.__awaiter(i,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,ja(this.Yl._i,t)];case 1:return e.sent(),this.Wl&&(t&&!this.Wl.Ti?this.Wl.start(this.zu):t||this.Wl.stop()),[2]}}))}))}))];case 5:return o.sent(),[2]}}))}))},e.prototype.Ul=function(t){if(t.Hl.zl&&t.Hl.synchronizeTabs){var e=Sr();if(!Yr.On(e))throw new h(l.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=vo(t.Dl.U,t.Dl.persistenceKey);return new Yr(e,t.os,n,t.clientId,t.Gl)}return new Xr},e}(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.initialize=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){return e=b(t),n=b(e.Fc),[2,e.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return n.oa(t)})).then((function(t){e.Nc=t}))]}))}))}(this.zu)];case 2:return n.sent(),[2]}}))}))},e.prototype.jl=function(t){return new ui(this.persistence.Co.do,t.os)},e.prototype.Ql=function(t){var e=vo(t.Dl.U,t.Dl.persistenceKey),n=ns(t.Dl.U);return new co(t.Hl.synchronizeTabs,e,t.clientId,si.oo(t.Hl.cacheSizeBytes),t.os,Sr(),Tr(),n,this.Dh,t.Hl.La)},e.prototype.Ul=function(t){return new Xr},e.prototype.clearPersistence=function(t,e){return function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return yr.On()?[4,yr.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(vo(t,e))},e}(is)),as=function(){function t(){}return t.prototype.initialize=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.zu?[3,2]:(this.zu=t.zu,this.Dh=t.Dh,this.Hu=this.Jl(e),this.Sh=this.Xl(e),this._i=this.Zl(e),this.t_=this.e_(e),this._i.subscribe({bu:Rr.bind(null,this.t_),Gh:Lr.bind(null,this.t_),Kh:jr.bind(null,this.t_)}),this.Dh.fi=function(t){return ba(n._i,t,1)},this.Sh.th.n_=Pa.bind(null,this._i),[4,ca(this.Sh,this._i.Qh)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new Nr},t.prototype.Jl=function(t){var e=ns(t.Dl.U),n=new $a(t.Dl);return function(t,e,n){return new jo(t,e,n)}(t.credentials,n,e)},t.prototype.Xl=function(t){var e,n,r,i,o,a=this;return e=this.zu,n=this.Hu,r=t.os,i=function(t){return ba(a._i,t,0)},o=ts.On()?new ts:new es,new Mo(e,n,r,i,o)},t.prototype.Zl=function(t){return function(t,e,n,r,i,o){var a=new va(t,e,n,r,i);return o&&(a.Uh=!0),a}(this.zu,this.Sh,this.Dh,t.Gl,t.Ch,!t.Hl.zl||!t.Hl.synchronizeTabs)},t.prototype.terminate=function(){return Ho(this.Sh)},t}();function ss(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var us=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),cs=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new h(l.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+G(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(D("FieldPath","string",e,t[e]),0===t[e].length)throw new h(l.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.r_=new I(t)},ls=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return r.__extends(e,t),e.documentId=function(){return new e(I.v().R())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z("isEqual","FieldPath",1,t);return this.r_.isEqual(t.r_)},e}(cs),hs=new RegExp("[~\\*/\\[\\]]"),fs=function(){this.o_=this},ds=function(t){function e(e){var n=this;return(n=t.call(this)||this).a_=e,n}return r.__extends(e,t),e.prototype.c_=function(t){if(2!==t.u_)throw t.h_(1===t.u_?this.a_+"() can only appear at the top level of your update data":this.a_+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(fs);function ps(t,e,n){return new Is({u_:3,l_:e.settings.l_,methodName:t.a_,__:n},e.U,e.serializer,e.ignoreUndefinedProperties)}var vs=function(t){function e(e){var n=this;return(n=t.call(this)||this).a_=e,n}return r.__extends(e,t),e.prototype.c_=function(t){return new sn(t.path,new Ze)},e.prototype.isEqual=function(t){return t instanceof e},e}(fs),ys=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).a_=e,r.f_=n,r}return r.__extends(e,t),e.prototype.c_=function(t){var e=ps(this,t,!0),n=this.f_.map((function(t){return Ds(t,e)})),r=new Je(n);return new sn(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(fs),gs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).a_=e,r.f_=n,r}return r.__extends(e,t),e.prototype.c_=function(t){var e=ps(this,t,!0),n=this.f_.map((function(t){return Ds(t,e)})),r=new tn(n);return new sn(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(fs),ms=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).a_=e,r.d_=n,r}return r.__extends(e,t),e.prototype.c_=function(t){var e=new nn(t.serializer,_e(t.serializer,this.d_));return new sn(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(fs),_s=function(t){function e(){return t.call(this)||this}return r.__extends(e,t),e.delete=function(){return A("FieldValue.delete",arguments),new bs(new ds("FieldValue.delete"))},e.serverTimestamp=function(){return A("FieldValue.serverTimestamp",arguments),new bs(new vs("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return N("FieldValue.arrayUnion",arguments,1),new bs(new ys("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return N("FieldValue.arrayRemove",arguments,1),new bs(new gs("FieldValue.arrayRemove",t))},e.increment=function(t){return D("FieldValue.increment","number",1,t),x("FieldValue.increment",arguments,1),new bs(new ms("FieldValue.increment",t))},e}(fs),bs=function(t){function e(e){var n=this;return(n=t.call(this)||this).o_=e,n.a_=e.a_,n}return r.__extends(e,t),e.prototype.c_=function(t){return this.o_.c_(t)},e.prototype.isEqual=function(t){return t instanceof e&&this.o_.isEqual(t.o_)},e}(_s),ws=function(){function t(t,e){if(x("GeoPoint",arguments,2),D("GeoPoint","number",1,t),D("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new h(l.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new h(l.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.w_=t,this.m_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.m_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.w_===t.w_&&this.m_===t.m_},t.prototype.toJSON=function(){return{latitude:this.w_,longitude:this.m_}},t.prototype.H=function(t){return X(this.w_,t.w_)||X(this.m_,t.m_)},t}(),Es=/^__.*__$/,Cs=function(t,e,n){this.T_=t,this.E_=e,this.I_=n},ks=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.A_=function(t,e){var n=[];return n.push(null!==this.Qe?new mn(t,this.data,this.Qe,e):new gn(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new bn(t,this.fieldTransforms)),n},t}(),Ss=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.A_=function(t,e){var n=[new mn(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new bn(t,this.fieldTransforms)),n},t}();function Ts(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw m()}}var Is=function(){function t(t,e,n,r,i,o){this.settings=t,this.U=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.R_(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u_",{get:function(){return this.settings.u_},enumerable:!1,configurable:!0}),t.prototype.P_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.g_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.P_({path:n,__:!1});return r.y_(t),r},t.prototype.V_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.P_({path:n,__:!1});return r.R_(),r},t.prototype.p_=function(t){return this.P_({path:void 0,__:!0})},t.prototype.h_=function(t){return Us(t,this.settings.methodName,this.settings.b_||!1,this.path,this.settings.l_)},t.prototype.contains=function(t){return void 0!==this.Qe.find((function(e){return t.T(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.T(e.field)}))},t.prototype.R_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.y_(this.path.get(t))},t.prototype.y_=function(t){if(0===t.length)throw this.h_("Document fields must not be empty");if(Ts(this.u_)&&Es.test(t))throw this.h_('Document fields cannot begin and end with "__"')},t}(),Os=function(){function t(t,e,n){this.U=t,this.ignoreUndefinedProperties=e,this.serializer=n||ns(t)}return t.prototype.v_=function(t,e,n,r){return void 0===r&&(r=!1),new Is({u_:t,methodName:e,l_:n,path:I.g(),__:!1,b_:r},this.U,this.serializer,this.ignoreUndefinedProperties)},t}();function As(t,e,n,r,i,o){void 0===o&&(o={});var a=t.v_(o.merge||o.mergeFields?2:0,e,n,i);js("Data must be an object, but it was:",a,r);var s,u,c=Rs(r,a);if(o.merge)s=new an(a.Qe),u=a.fieldTransforms;else if(o.mergeFields){for(var f=[],d=0,p=o.mergeFields;d<p.length;d++){var v=p[d],y=void 0;if(v instanceof cs)y=v.r_;else{if("string"!=typeof v)throw m();y=Ms(e,v,n)}if(!a.contains(y))throw new h(l.INVALID_ARGUMENT,"Field '"+y+"' is specified in your field mask but missing from your input data.");Vs(f,y)||f.push(y)}s=new an(f),u=a.fieldTransforms.filter((function(t){return s.He(t.field)}))}else s=null,u=a.fieldTransforms;return new ks(new Sn(c),s,u)}function xs(t,e,n,r){var i=t.v_(1,e,n);js("Data must be an object, but it was:",i,r);var o=[],a=new Tn;E(r,(function(t,r){var s=Ms(e,t,n),u=i.V_(s);if(r instanceof fs&&r.o_ instanceof ds)o.push(s);else{var c=Ds(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new an(o);return new Ss(a.Je(),s,i.fieldTransforms)}function Ns(t,e,n,r,i,o){var a=t.v_(1,e,n),s=[Fs(e,r,n)],u=[i];if(o.length%2!=0)throw new h(l.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Fs(e,o[c])),u.push(o[c+1]);for(var f=[],d=new Tn,p=s.length-1;p>=0;--p)if(!Vs(f,s[p])){var v=s[p],y=u[p],g=a.V_(v);if(y instanceof fs&&y.o_ instanceof ds)f.push(v);else{var m=Ds(y,g);null!=m&&(f.push(v),d.set(v,m))}}var _=new an(f);return new Ss(d.Je(),_,a.fieldTransforms)}function Ps(t,e,n,r){return void 0===r&&(r=!1),Ds(n,t.v_(r?4:3,e))}function Ds(t,e){if(Ls(t))return js("Unsupported field value:",e,t),Rs(t,e);if(t instanceof fs)return function(t,e){if(!Ts(e.u_))throw e.h_(t.a_+"() can only be used with update() and set()");if(!e.path)throw e.h_(t.a_+"() is not currently supported inside arrays");var n=t.c_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.__&&4!==e.u_)throw e.h_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Ds(o[i],e.p_(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _e(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=st.fromDate(t);return{timestampValue:be(e.serializer,n)}}if(t instanceof st){var r=new st(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:be(e.serializer,r)}}if(t instanceof ws)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tt)return{bytesValue:we(e.serializer,t.q)};if(t instanceof Cs){var i=e.U,o=t.T_;if(!o.isEqual(i))throw e.h_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:ke(t.T_||e.U,t.E_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.h_("Unsupported field value: "+q(t))}(t,e)}function Rs(t,e){var n={};return C(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):E(t,(function(t,r){var i=Ds(r,e.g_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ls(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof st||t instanceof ws||t instanceof tt||t instanceof Cs||t instanceof fs)}function js(t,e,n){if(!Ls(n)||!V(n)){var r=q(n);throw e.h_("an object"===r?t+" a custom object":t+" "+r)}}function Fs(t,e,n){if(e instanceof cs)return e.r_;if("string"==typeof e)return Ms(t,e);throw Us("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Ms(t,e,n){try{return function(t){if(t.search(hs)>=0)throw new h(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ls.bind.apply(ls,r.__spreadArrays([void 0],t.split("."))))}catch(r){throw new h(l.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).r_}catch(e){throw Us((i=e)instanceof Error?i.message:i.toString(),t,!1,void 0,n)}var i}function Us(t,e,n,r,i){var o=r&&!r.m(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new h(l.INVALID_ARGUMENT,(s+=". ")+t+u)}function Vs(t,e){return t.some((function(t){return t.isEqual(e)}))}var qs=function(){function t(t){this.Hu=t,this.S_=new Map,this.mutations=[],this.D_=!1,this.C_=null,this.N_=new Set}return t.prototype.F_=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:if(this.x_(),this.mutations.length>0)throw new h(l.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return n=b(t),i=xe(n.serializer)+"/documents",o={documents:e.map((function(t){return Te(n.serializer,t)}))},[4,n.Lu("BatchGetDocuments",i,o)];case 1:return a=r.sent(),s=new Map,a.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){_(!!e.found);var n=Ie(t,e.found.name),r=Ce(e.found.updateTime),i=new Sn({mapValue:{fields:e.found.fields}});return new An(n,r,i,{})}(t,e):"missing"in e?function(t,e){_(!!e.missing),_(!!e.readTime);var n=Ie(t,e.missing),r=Ce(e.readTime);return new xn(n,r)}(t,e):m()}(n.serializer,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());_(!!e),u.push(e)})),u)]}}))}))}(this.Hu,t)];case 1:return[2,((e=i.sent()).forEach((function(t){t instanceof xn||t instanceof An?n.k_(t):m()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.A_(t,this.Ke(t))),this.N_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.A_(t,this.M_(t)))}catch(t){this.C_=t}this.N_.add(t.toString())},t.prototype.delete=function(t){this.write([new Cn(t,this.Ke(t))]),this.N_.add(t.toString())},t.prototype.commit=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(this.x_(),this.C_)throw this.C_;return t=this.S_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=O.D(n);e.mutations.push(new kn(r,e.Ke(r)))})),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return n=b(t),i=xe(n.serializer)+"/documents",o={writes:e.map((function(t){return De(n.serializer,t)}))},[4,n.Ou("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.Hu,this.mutations)];case 1:return n.sent(),this.D_=!0,[2]}}))}))},t.prototype.k_=function(t){var e;if(t instanceof An)e=t.version;else{if(!(t instanceof xn))throw m();e=ut.min()}var n=this.S_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new h(l.ABORTED,"Document version changed between two reads.")}else this.S_.set(t.key.toString(),e)},t.prototype.Ke=function(t){var e=this.S_.get(t.toString());return!this.N_.has(t.toString())&&e?cn.updateTime(e):cn.Ge()},t.prototype.M_=function(t){var e=this.S_.get(t.toString());if(!this.N_.has(t.toString())&&e){if(e.isEqual(ut.min()))throw new h(l.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cn.updateTime(e)}return cn.exists(!0)},t.prototype.write=function(t){this.x_(),this.mutations=this.mutations.concat(t)},t.prototype.x_=function(){},t}(),Hs=function(){function t(t,e,n,r){this.os=t,this.Hu=e,this.updateFunction=n,this.hs=r,this.O_=5,this.gs=new pr(this.os,"transaction_retry")}return t.prototype.run=function(){this.L_()},t.prototype.L_=function(){var t=this;this.gs.Rn((function(){return r.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return r.__generator(this,(function(r){return t=new qs(this.Hu),(e=this.B_(t))&&e.then((function(e){n.os.ds((function(){return t.commit().then((function(){n.hs.resolve(e)})).catch((function(t){n.q_(t)}))}))})).catch((function(t){n.q_(t)})),[2]}))}))}))},t.prototype.B_=function(t){try{var e=this.updateFunction(t);return!ct(e)&&e.catch&&e.then?e:(this.hs.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.hs.reject(t),null}},t.prototype.q_=function(t){var e=this;this.O_>0&&this.U_(t)?(this.O_-=1,this.os.ds((function(){return e.L_(),Promise.resolve()}))):this.hs.reject(t)},t.prototype.U_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!wt(e)}return!1},t}(),Bs=function(){function t(t,e){this.credentials=t,this.os=e,this.clientId=Y.k(),this.Q_=new dr}return t.prototype.start=function(t,e,n,i){var o=this;this.W_(),this.Dl=t;var a=new dr,s=!1;return this.credentials.Jc((function(t){if(!s)return s=!0,p("FirestoreClient","Initializing. user=",t.uid),o.j_(e,n,i,t,a).then(o.Q_.resolve,o.Q_.reject);o.os.Ds((function(){return function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return(n=b(t)).os.Fs(),p("RemoteStore","RemoteStore received new credentials"),i=Yo(n),n.Zu.add(3),[4,qo(n)];case 1:return r.sent(),i&&n.rh.set("Unknown"),[4,n.th.n_(e)];case 2:return r.sent(),n.Zu.delete(3),[4,Vo(n)];case 3:return r.sent(),[2]}}))}))}(o.Sh,t)}))})),this.os.ds((function(){return o.Q_.promise})),a.promise},t.prototype.enableNetwork=function(){var t=this;return this.W_(),this.os.enqueue((function(){return t.persistence.sc(!0),Uo(t.Sh)}))},t.prototype.j_=function(t,e,n,i,o){return r.__awaiter(this,void 0,void 0,(function(){var a,s,u=this;return r.__generator(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,t.initialize(a={os:this.os,Dl:this.Dl,clientId:this.clientId,credentials:this.credentials,Gl:i,Ch:100,Hl:n})];case 1:return c.sent(),[4,e.initialize(t,a)];case 2:return c.sent(),this.persistence=t.persistence,this.Dh=t.Dh,this.zu=t.zu,this.Wl=t.Wl,this.Hu=e.Hu,this.Sh=e.Sh,this._i=e._i,this.K_=e.t_,this.K_.qs=ya.bind(null,this._i),this.K_.Ws=ma.bind(null,this._i),this.persistence.nc((function(){return r.__awaiter(u,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),o.resolve(),[3,4];case 3:if(s=c.sent(),o.reject(s),!this.G_(s))throw s;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),this.j_(new is,new as,{zl:!1},i,o))];case 4:return[2]}}))}))},t.prototype.G_=function(t){return"FirebaseError"===t.name?t.code===l.FAILED_PRECONDITION||t.code===l.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.W_=function(){if(this.os.Vs)throw new h(l.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.W_(),this.os.enqueue((function(){return t.persistence.sc(!1),function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return(e=b(t)).Zu.add(0),[4,qo(e)];case 1:return n.sent(),e.rh.set("Offline"),[2]}}))}))}(t.Sh)}))},t.prototype.terminate=function(){var t=this;this.os.Ss();var e=new dr;return this.os.ps((function(){return r.__awaiter(t,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.Wl&&this.Wl.stop(),[4,Ho(this.Sh)];case 1:return r.sent(),[4,this.Dh.Si()];case 2:return r.sent(),[4,this.persistence.Si()];case 3:return r.sent(),this.credentials.Xc(),e.resolve(),[3,5];case 4:return t=r.sent(),n=Ar(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}}))}))})),e.promise},t.prototype.waitForPendingWrites=function(){var t=this;this.W_();var e=new dr;return this.os.ds((function(){return function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:Yo((n=b(t)).Sh)||p("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=b(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.vr.Bo(t)}))}(n.zu)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.Bh.get(i)||[]).push(e),n.Bh.set(i,o),[3,4]);case 3:return a=r.sent(),s=Ar(a,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}(t._i,e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.W_();var i=new us(n),o=new Mr(t,i,e);return this.os.ds((function(){return Pr(r.K_,o)})),function(){i.i_(),r.os.ds((function(){return Dr(r.K_,o)}))}},t.prototype.z_=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.W_(),[4,this.Q_.promise];case 1:return[2,(e.sent(),function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o=this;return r.__generator(this,(function(a){switch(a.label){case 0:return i=new dr,[4,t.enqueue((function(){return r.__awaiter(o,void 0,void 0,(function(){var t,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=b(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.$c.Dr(t,e)}))}(e,n)];case 1:return(t=r.sent())instanceof An?i.resolve(t):t instanceof xn?i.resolve(null):i.reject(new h(l.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=r.sent(),a=Ar(o,"Failed to get document '"+n+" from cache"),i.reject(a),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(a.sent(),i.promise)]}}))}))}(this.os,this.zu,t))]}}))}))},t.prototype.H_=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return this.W_(),[4,this.Q_.promise];case 1:return[2,(n.sent(),function(t,e,n,r){var i=new dr,o=zs(t,e,Ln(n.path),{includeMetadataChanges:!0,Js:!0},{next:function(t){o();var e=t.docs.has(n);!e&&t.fromCache?i.reject(new h(l.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&r&&"server"===r.source?i.reject(new h(l.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(t)},error:function(t){return i.reject(t)}});return i.promise}(this.os,this.K_,t,e))]}}))}))},t.prototype.Y_=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.W_(),[4,this.Q_.promise];case 1:return[2,(e.sent(),function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o=this;return r.__generator(this,(function(a){switch(a.label){case 0:return i=new dr,[4,t.enqueue((function(){return r.__awaiter(o,void 0,void 0,(function(){var t,o,a,s,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Co(e,n,!0)];case 1:return t=r.sent(),o=new fa(n,t.kc),a=o.Th(t.documents),s=o.gr(a,!1),i.resolve(s.snapshot),[3,3];case 2:return u=r.sent(),c=Ar(u,"Failed to execute query '"+n+" against cache"),i.reject(c),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(a.sent(),i.promise)]}}))}))}(this.os,this.zu,t))]}}))}))},t.prototype.J_=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return this.W_(),[4,this.Q_.promise];case 1:return[2,(n.sent(),function(t,e,n,r){var i=new dr,o=zs(t,e,n,{includeMetadataChanges:!0,Js:!0},{next:function(t){o(),t.fromCache&&r&&"server"===r.source?i.reject(new h(l.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}});return i.promise}(this.os,this.K_,t,e))]}}))}))},t.prototype.write=function(t){var e=this;this.W_();var n=new dr;return this.os.ds((function(){return function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:(i=Ba(t)).Wh("write()"),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=b(t),i=st.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Lt());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.$c.$r(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=pn(c,n.get(c.key));null!=l&&a.push(new mn(c.key,l,In(l.proto.mapValue),cn.exists(!0)))}return r.vr.xo(t,i,a,e)}))})).then((function(t){var e=t.hr(n);return{batchId:t.batchId,dr:e}}))}(i.zu,e)];case 2:return o=r.sent(),i.Dh.Fi(o.batchId),function(t,e,n){var r=t.Lh[t.currentUser.Zs()];r||(r=new Ct(X)),r=r.rt(e,n),t.Lh[t.currentUser.Zs()]=r}(i,o.batchId,n),[4,Na(i,o.dr)];case 3:return r.sent(),[4,na(i.Sh)];case 4:return r.sent(),[3,6];case 5:return a=r.sent(),s=Ar(a,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}(e._i,t,n)})),n.promise},t.prototype.U=function(){return this.Dl.U},t.prototype.X_=function(t){var e=this;this.W_();var n=new us(t);return this.os.ds((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,function(t,e){b(t).Bs.add(e),e.next()}(this.K_,n)]}))}))})),function(){n.i_(),e.os.ds((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,function(t,e){b(t).Bs.delete(e)}(this.K_,n)]}))}))}))}},Object.defineProperty(t.prototype,"Z_",{get:function(){return this.os.Vs},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.W_();var n=new dr;return this.os.ds((function(){return new Hs(e.os,e.Hu,t,n).run(),Promise.resolve()})),n.promise},t}();function zs(t,e,n,r,i){var o=new us(i),a=new Mr(n,o,r);return t.ds((function(){return Pr(e,a)})),function(){o.i_(),t.ds((function(){return Dr(e,a)}))}}var Ws=function(){function t(t,e,n,r,i){this.U=t,this.timestampsInSnapshots=e,this.tf=n,this.ef=r,this.nf=i}return t.prototype.sf=function(t){switch($t(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ae(t.integerValue||t.doubleValue);case 3:return this.if(t.timestampValue);case 4:return this.rf(t);case 5:return t.stringValue;case 6:return this.nf(se(t.bytesValue));case 7:return this.af(t.referenceValue);case 8:return this.cf(t.geoPointValue);case 9:return this.uf(t.arrayValue);case 10:return this.hf(t.mapValue);default:throw m()}},t.prototype.hf=function(t){var e=this,n={};return E(t.fields||{},(function(t,r){n[t]=e.sf(r)})),n},t.prototype.cf=function(t){return new ws(ae(t.latitude),ae(t.longitude))},t.prototype.uf=function(t){var e=this;return(t.values||[]).map((function(t){return e.sf(t)}))},t.prototype.rf=function(t){switch(this.tf){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Xt(n)?t(n):n}(t);return null==e?null:this.sf(e);case"estimate":return this.if(Zt(t));default:return null}},t.prototype.if=function(t){var e=oe(t),n=new st(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.af=function(t){var e=S.P(t);_(Qe(e));var n=new ot(e.get(1),e.get(3)),r=new O(e.u(5));return n.isEqual(this.U)||v("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.ef(r)},t}(),Qs=si.uo,Gs=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new h(l.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else L("settings","non-empty string","host",t.host),this.host=t.host,j("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(B("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),j("settings","object","credentials",t.credentials),this.credentials=t.credentials,j("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),j("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?v("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&v("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,j("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=si.lo;else{if(t.cacheSizeBytes!==Qs&&t.cacheSizeBytes<si.ho)throw new h(l.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+si.ho);this.cacheSizeBytes=t.cacheSizeBytes}j("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Ks=function(){function t(e,n,i,o){var a=this;if(void 0===i&&(i=new is),void 0===o&&(o=new as),this.lf=i,this._f=o,this.ff=null,this.df=new Or,this.INTERNAL={delete:function(){return r.__awaiter(a,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.wf(),[4,this.mf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var s=e;this.ff=s,this.T_=t.Tf(s),this.Ef=s.name,this.If=new xo(n)}else{var u=e;if(!u.projectId)throw new h(l.INVALID_ARGUMENT,"Must provide projectId");this.T_=new ot(u.projectId,u.database),this.Ef="[DEFAULT]",this.If=new Ao}this.Af=new Gs({})}return Object.defineProperty(t.prototype,"Rf",{get:function(){return this.Pf||(this.Pf=new Os(this.T_,this.Af.ignoreUndefinedProperties)),this.Pf},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){x("Firestore.settings",arguments,1),D("Firestore.settings","object",1,t),t.merge&&delete(t=Object.assign(Object.assign({},this.Af),t)).merge;var e=new Gs(t);if(this.mf&&!this.Af.isEqual(e))throw new h(l.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.Af=e,void 0!==e.credentials&&(this.If=function(t){if(!t)return new Ao;switch(t.type){case"gapi":var e=t.gf;return _(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Po(e,t.iu||"0");case"provider":return t.gf;default:throw new h(l.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.wf(),this.mf.enableNetwork()},t.prototype.disableNetwork=function(){return this.wf(),this.mf.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.mf)throw new h(l.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&v("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new h(l.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.yf(this.lf,this._f,{zl:!0,cacheSizeBytes:this.Af.cacheSizeBytes,synchronizeTabs:r,La:i})},t.prototype.clearPersistence=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){if(void 0!==this.mf&&!this.mf.Z_)throw new h(l.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new dr,[2,(this.df.ps((function(){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.lf.clearPersistence(this.T_,this.Ef)];case 1:return n.sent(),t.resolve(),[3,3];case 2:return e=n.sent(),t.reject(e),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Vf",{get:function(){return this.wf(),this.mf.Z_},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.wf(),this.mf.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){return this.wf(),ss(t)?this.mf.X_(t):(D("Firestore.onSnapshotsInSync","function",1,t),this.mf.X_({next:t}))},t.prototype.wf=function(){return this.mf||this.yf(new is,new as,{zl:!1}),this.mf},t.prototype.pf=function(){return new it(this.T_,this.Ef,this.Af.host,this.Af.ssl,this.Af.experimentalForceLongPolling)},t.prototype.yf=function(t,e,n){var r=this.pf();return this.mf=new Bs(this.If,this.df),this.mf.start(r,t,e,n)},t.Tf=function(t){if(!Object.prototype.hasOwnProperty.call(t.options,"projectId"))throw new h(l.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e=t.options.projectId;if(!e||"string"!=typeof e)throw new h(l.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ot(e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.ff)throw new h(l.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ff},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return x("Firestore.collection",arguments,1),D("Firestore.collection","non-empty string",1,t),this.wf(),new cu(S.P(t),this,null)},t.prototype.doc=function(t){return x("Firestore.doc",arguments,1),D("Firestore.doc","non-empty string",1,t),this.wf(),Zs.bf(S.P(t),this,null)},t.prototype.collectionGroup=function(t){if(x("Firestore.collectionGroup",arguments,1),D("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new h(l.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.wf(),new su(function(t){return new Dn(S.g(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return x("Firestore.runTransaction",arguments,1),D("Firestore.runTransaction","function",1,t),this.wf().transaction((function(n){return t(new Ys(e,n))}))},t.prototype.batch=function(){return this.wf(),new Xs(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(d()){case o.LogLevel.DEBUG:return"debug";case o.LogLevel.ERROR:return"error";case o.LogLevel.SILENT:return"silent";case o.LogLevel.WARN:return"warn";case o.LogLevel.INFO:return"info";case o.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){x("Firestore.setLogLevel",arguments,1),M("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),f.setLogLevel(t)},t.prototype.vf=function(){return this.Af.timestampsInSnapshots},t.prototype.Sf=function(){return this.Af},t}(),Ys=function(){function t(t,e){this.Df=t,this.Cf=e}return t.prototype.get=function(t){var e=this;x("Transaction.get",arguments,1);var n=du("Transaction.get",t,this.Df);return this.Cf.F_([n.E_]).then((function(t){if(!t||1!==t.length)return m();var r=t[0];if(r instanceof xn)return new $s(e.Df,n.E_,null,!1,!1,n.I_);if(r instanceof An)return new $s(e.Df,n.E_,r,!1,!1,n.I_);throw m()}))},t.prototype.set=function(t,e,n){P("Transaction.set",arguments,2,3);var r=du("Transaction.set",t,this.Df);n=lu("Transaction.set",n);var i=vu(r.I_,e,n),o=As(this.Df.Rf,"Transaction.set",r.E_,i,null!==r.I_,n);return this.Cf.set(r.E_,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof ls?(N("Transaction.update",arguments,3),r=du("Transaction.update",t,this.Df),i=Ns(this.Df.Rf,"Transaction.update",r.E_,e,n,o)):(x("Transaction.update",arguments,2),r=du("Transaction.update",t,this.Df),i=xs(this.Df.Rf,"Transaction.update",r.E_,e)),this.Cf.update(r.E_,i),this},t.prototype.delete=function(t){x("Transaction.delete",arguments,1);var e=du("Transaction.delete",t,this.Df);return this.Cf.delete(e.E_),this},t}(),Xs=function(){function t(t){this.Df=t,this.Nf=[],this.Ff=!1}return t.prototype.set=function(t,e,n){P("WriteBatch.set",arguments,2,3),this.$f();var r=du("WriteBatch.set",t,this.Df);n=lu("WriteBatch.set",n);var i=vu(r.I_,e,n),o=As(this.Df.Rf,"WriteBatch.set",r.E_,i,null!==r.I_,n);return this.Nf=this.Nf.concat(o.A_(r.E_,cn.Ge())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.$f(),"string"==typeof e||e instanceof ls?(N("WriteBatch.update",arguments,3),r=du("WriteBatch.update",t,this.Df),i=Ns(this.Df.Rf,"WriteBatch.update",r.E_,e,n,o)):(x("WriteBatch.update",arguments,2),r=du("WriteBatch.update",t,this.Df),i=xs(this.Df.Rf,"WriteBatch.update",r.E_,e)),this.Nf=this.Nf.concat(i.A_(r.E_,cn.exists(!0))),this},t.prototype.delete=function(t){x("WriteBatch.delete",arguments,1),this.$f();var e=du("WriteBatch.delete",t,this.Df);return this.Nf=this.Nf.concat(new Cn(e.E_,cn.Ge())),this},t.prototype.commit=function(){return this.$f(),this.Ff=!0,this.Nf.length>0?this.Df.wf().write(this.Nf):Promise.resolve()},t.prototype.$f=function(){if(this.Ff)throw new h(l.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Zs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.T_,e,r)||this).E_=e,i.firestore=n,i.I_=r,i.mf=i.firestore.wf(),i}return r.__extends(e,t),e.bf=function(t,n,r){if(t.length%2!=0)throw new h(l.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.R()+" has "+t.length);return new e(new O(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.E_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new cu(this.E_.path.h(),this.firestore,this.I_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.E_.path.R()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(x("DocumentReference.collection",arguments,1),D("DocumentReference.collection","non-empty string",1,t),!t)throw new h(l.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=S.P(t);return new cu(this.E_.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw z("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.E_.isEqual(t.E_)&&this.I_===t.I_},e.prototype.set=function(t,e){P("DocumentReference.set",arguments,1,2),e=lu("DocumentReference.set",e);var n=vu(this.I_,t,e),r=As(this.firestore.Rf,"DocumentReference.set",this.E_,n,null!==this.I_,e);return this.mf.write(r.A_(this.E_,cn.Ge()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof ls?(N("DocumentReference.update",arguments,2),n=Ns(this.firestore.Rf,"DocumentReference.update",this.E_,t,e,r)):(x("DocumentReference.update",arguments,1),n=xs(this.firestore.Rf,"DocumentReference.update",this.E_,t)),this.mf.write(n.A_(this.E_,cn.exists(!0)))},e.prototype.delete=function(){return x("DocumentReference.delete",arguments,0),this.mf.write([new Cn(this.E_,cn.Ge())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];P("DocumentReference.onSnapshot",arguments,1,4);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||ss(i[s])||(B("DocumentReference.onSnapshot",a=i[s],["includeMetadataChanges"]),j("DocumentReference.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++);var u={includeMetadataChanges:a.includeMetadataChanges};if(ss(i[s])){var c=i[s];i[s]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[s+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[s+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else D("DocumentReference.onSnapshot","function",s,i[s]),R("DocumentReference.onSnapshot","function",s+1,i[s+1]),R("DocumentReference.onSnapshot","function",s+2,i[s+2]);var l={next:function(t){i[s]&&i[s](r.xf(t))},error:i[s+1],complete:i[s+2]};return this.mf.listen(Ln(this.E_.path),u,l)},e.prototype.get=function(t){var e=this;P("DocumentReference.get",arguments,0,1),fu("DocumentReference.get",t);var n=this.firestore.wf();return t&&"cache"===t.source?n.z_(this.E_).then((function(t){return new $s(e.firestore,e.E_,t,!0,t instanceof An&&t.Ye,e.I_)})):n.H_(this.E_,t).then((function(t){return e.xf(t)}))},e.prototype.withConverter=function(t){return new e(this.E_,this.firestore,t)},e.prototype.xf=function(t){var e=t.docs.get(this.E_);return new $s(this.firestore,this.E_,e,t.fromCache,t.hasPendingWrites,this.I_)},e}(Cs),Js=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),$s=function(){function t(t,e,n,r,i,o){this.Df=t,this.E_=e,this.kf=n,this.Mf=r,this.Of=i,this.I_=o}return t.prototype.data=function(t){var e=this;if(P("DocumentSnapshot.data",arguments,0,1),t=hu("DocumentSnapshot.data",t),this.kf){if(this.I_){var n=new tu(this.Df,this.E_,this.kf,this.Mf,this.Of,null);return this.I_.fromFirestore(n,t)}return new Ws(this.Df.T_,this.Df.vf(),t.serverTimestamps||"none",(function(t){return new Zs(t,e.Df,null)}),(function(t){return new rt(t)})).sf(this.kf.sn())}},t.prototype.get=function(t,e){var n=this;if(P("DocumentSnapshot.get",arguments,1,2),e=hu("DocumentSnapshot.get",e),this.kf){var r=this.kf.data().field(Fs("DocumentSnapshot.get",t,this.E_));if(null!==r)return new Ws(this.Df.T_,this.Df.vf(),e.serverTimestamps||"none",(function(t){return new Zs(t,n.Df,n.I_)}),(function(t){return new rt(t)})).sf(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.E_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Zs(this.E_,this.Df,this.I_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.kf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Js(this.Of,this.Mf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","DocumentSnapshot",1,e);return this.Df===e.Df&&this.Mf===e.Mf&&this.E_.isEqual(e.E_)&&(null===this.kf?null===e.kf:this.kf.isEqual(e.kf))&&this.I_===e.I_},t}(),tu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}($s);function eu(t,e,n,r,i,o,a){var s;if(i.p()){if("array-contains"===o||"array-contains-any"===o)throw new h(l.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){iu(a,o);for(var u=[],c=0,f=a;c<f.length;c++)u.push(ru(r,t,f[c]));s={arrayValue:{values:u}}}else s=ru(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||iu(a,o),s=Ps(n,e,a,"in"===o||"not-in"===o);var d=Zn.create(i,o,s);return function(t,e){if(e.un()){var n=Un(t);if(null!==n&&!n.isEqual(e.field))throw new h(l.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Mn(t);null!==r&&ou(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new h(l.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,d),d}function nu(t,e,n){if(null!==t.startAt)throw new h(l.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new h(l.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new lr(e,n);return function(t,e){if(null===Mn(t)){var n=Un(t);null!==n&&ou(0,n,e.field)}}(t,r),r}function ru(t,e,n){if("string"==typeof n){if(""===n)throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vn(e)&&-1!==n.indexOf("/"))throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(S.P(n));if(!O.F(r))throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ue(t,new O(r))}if(n instanceof Cs)return ue(t,n.E_);throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+q(n)+".")}function iu(t,e){if(!Array.isArray(t)||0===t.length)throw new h(l.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new h(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(t.indexOf(null)>=0)throw new h(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new h(l.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function ou(t,e,n){if(!n.isEqual(e))throw new h(l.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function au(t){if(Fn(t)&&0===t.rn.length)throw new h(l.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var su=function(){function t(t,e,n){this.Lf=t,this.firestore=e,this.I_=n}return t.prototype.where=function(e,n,r){var i;x("Query.where",arguments,3),H("Query.where",3,r),i="not-in"===n||"!="===n?n:M("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,n);var o=Fs("Query.where",e),a=eu(this.Lf,"Query.where",this.firestore.Rf,this.firestore.T_,o,i,r);return new t(function(t,e){var n=t.filters.concat([e]);return new Dn(t.path,t.collectionGroup,t.rn.slice(),n,t.limit,t.on,t.startAt,t.endAt)}(this.Lf,a),this.firestore,this.I_)},t.prototype.orderBy=function(e,n){var r;if(P("Query.orderBy",arguments,1,2),R("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new h(l.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Fs("Query.orderBy",e),o=nu(this.Lf,i,r);return new t(function(t,e){var n=t.rn.concat([e]);return new Dn(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.on,t.startAt,t.endAt)}(this.Lf,o),this.firestore,this.I_)},t.prototype.limit=function(e){return x("Query.limit",arguments,1),D("Query.limit","number",1,e),W("Query.limit",1,e),new t(Bn(this.Lf,e,"F"),this.firestore,this.I_)},t.prototype.limitToLast=function(e){return x("Query.limitToLast",arguments,1),D("Query.limitToLast","number",1,e),W("Query.limitToLast",1,e),new t(Bn(this.Lf,e,"L"),this.firestore,this.I_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.startAt",arguments,1);var i=this.Bf("Query.startAt",e,n,!0);return new t(zn(this.Lf,i),this.firestore,this.I_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.startAfter",arguments,1);var i=this.Bf("Query.startAfter",e,n,!1);return new t(zn(this.Lf,i),this.firestore,this.I_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.endBefore",arguments,1);var i=this.Bf("Query.endBefore",e,n,!0);return new t(Wn(this.Lf,i),this.firestore,this.I_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];N("Query.endAt",arguments,1);var i=this.Bf("Query.endAt",e,n,!1);return new t(Wn(this.Lf,i),this.firestore,this.I_)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","Query",1,e);return this.firestore===e.firestore&&Qn(this.Lf,e.Lf)&&this.I_===e.I_},t.prototype.withConverter=function(e){return new t(this.Lf,this.firestore,e)},t.prototype.Bf=function(t,e,n,i){if(H(t,1,e),e instanceof $s)return x(t,r.__spreadArrays([e],n),1),function(t,e,n,r,i){if(!r)throw new h(l.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=qn(t);a<s.length;a++){var u=s[a];if(u.field.p())o.push(ue(e,r.key));else{var c=r.field(u.field);if(Xt(c))throw new h(l.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var f=u.field.R();throw new h(l.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ar(o,i)}(this.Lf,this.firestore.T_,t,e.kf,i);var o=[e].concat(n);return function(t,e,n,r,i,o){var a=t.rn;if(i.length>a.length)throw new h(l.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.p()){if("string"!=typeof c)throw new h(l.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Vn(t)&&-1!==c.indexOf("/"))throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var f=t.path.child(S.P(c));if(!O.F(f))throw new h(l.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var d=new O(f);s.push(ue(e,d))}else{var p=Ps(n,r,c);s.push(p)}}return new ar(s,o)}(this.Lf,this.firestore.T_,this.firestore.Rf,t,o,i)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];P("Query.onSnapshot",arguments,1,4);var a={},s=0;if("object"!=typeof i[s]||ss(i[s])||(B("Query.onSnapshot",a=i[s],["includeMetadataChanges"]),j("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++),ss(i[s])){var u=i[s];i[s]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[s+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[s+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else D("Query.onSnapshot","function",s,i[s]),R("Query.onSnapshot","function",s+1,i[s+1]),R("Query.onSnapshot","function",s+2,i[s+2]);var c={next:function(t){i[s]&&i[s](new uu(r.firestore,r.Lf,t,r.I_))},error:i[s+1],complete:i[s+2]};return au(this.Lf),this.firestore.wf().listen(this.Lf,a,c)},t.prototype.get=function(t){var e=this;P("Query.get",arguments,0,1),fu("Query.get",t),au(this.Lf);var n=this.firestore.wf();return(t&&"cache"===t.source?n.Y_(this.Lf):n.J_(this.Lf,t)).then((function(t){return new uu(e.firestore,e.Lf,t,e.I_)}))},t}(),uu=function(){function t(t,e,n,r){this.Df=t,this.qf=e,this.Uf=n,this.I_=r,this.Qf=null,this.Wf=null,this.metadata=new Js(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Uf.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Uf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;P("QuerySnapshot.forEach",arguments,1,2),D("QuerySnapshot.forEach","function",1,t),this.Uf.docs.forEach((function(r){t.call(e,n.jf(r,n.metadata.fromCache,n.Uf.Qt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new su(this.qf,this.Df,this.I_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(B("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),j("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Uf.jt)throw new h(l.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Qf&&this.Wf===e||(this.Qf=function(t,e,n){if(t.Ut.m()){var r=0;return t.docChanges.map((function(e){return{type:"added",doc:n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),oldIndex:-1,newIndex:r++}}))}var i=t.Ut;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Qt.has(e.doc.key)),o=-1,a=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(a=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:pu(e.type),doc:r,oldIndex:o,newIndex:a}}))}(this.Uf,e,this.jf.bind(this)),this.Wf=e),this.Qf},t.prototype.isEqual=function(e){if(!(e instanceof t))throw z("isEqual","QuerySnapshot",1,e);return this.Df===e.Df&&Qn(this.qf,e.qf)&&this.Uf.isEqual(e.Uf)&&this.I_===e.I_},t.prototype.jf=function(t,e,n){return new tu(this.Df,t.key,t,e,n,this.I_)},t}(),cu=function(t){function e(e,n,r){var i=this;if((i=t.call(this,Ln(e),n,r)||this).Kf=e,e.length%2!=1)throw new h(l.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.R()+" has "+e.length);return i}return r.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Lf.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.Lf.path.h();return t.m()?null:new Zs(new O(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Lf.path.R()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){P("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Y.k()),D("CollectionReference.doc","non-empty string",1,t);var e=S.P(t);return Zs.bf(this.Lf.path.child(e),this.firestore,this.I_)},e.prototype.add=function(t){x("CollectionReference.add",arguments,1),D("CollectionReference.add","object",1,this.I_?this.I_.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.Kf,this.firestore,t)},e}(su);function lu(t,e){if(void 0===e)return{merge:!1};if(B(t,e,["merge","mergeFields"]),j(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+q(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new h(l.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+q(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof ls}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new h(l.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function hu(t,e){return void 0===e?{}:(B(t,e,["serverTimestamps"]),F(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function fu(t,e){R(t,"object",1,e),e&&(B(t,e,["source"]),F(t,0,"source",e.source,["default","server","cache"]))}function du(t,e,n){if(e instanceof Cs){if(e.firestore!==n)throw new h(l.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw z(t,"DocumentReference",1,e)}function pu(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return m()}}function vu(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var yu={Firestore:Ks,GeoPoint:ws,Timestamp:st,Blob:rt,Transaction:Ys,WriteBatch:Xs,DocumentReference:Zs,DocumentSnapshot:$s,Query:su,QueryDocumentSnapshot:tu,QuerySnapshot:uu,CollectionReference:cu,FieldPath:ls,FieldValue:_s,setLogLevel:Ks.setLogLevel,CACHE_SIZE_UNLIMITED:Qs};function gu(t){!function(t,e){t.INTERNAL.registerComponent(new u.Component("firestore",(function(t){return function(t,e){var n=new as,r=new os(n);return new Ks(t,e,r,n)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},yu)))}(t),t.registerVersion("@firebase/firestore","1.16.7")}gu(c.default),e.__PRIVATE_registerFirestore=gu},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),a=n("2QA8"),u=n("2fFW"),f=n("NJ4a"),p=function(t){h(n,t);var e=d(n);function n(t,r,o){var a;switch(s(this,n),(a=e.call(this)).syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=i.a;break;case 1:if(!t){a.destination=i.a;break}if("object"==typeof t){t instanceof n?(a.syncErrorThrowable=t.syncErrorThrowable,a.destination=t,t.add(v(a))):(a.syncErrorThrowable=!0,a.destination=new y(v(a),t));break}default:a.syncErrorThrowable=!0,a.destination=new y(v(a),t,r,o)}return a}return c(n,[{key:a.a,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,l(g(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}],[{key:"create",value:function(t,e,r){var i=new n(t,e,r);return i.syncErrorThrowable=!1,i}}]),n}(o.a),y=function(t){h(n,t);var e=d(n);function n(t,o,a,u){var c,l;s(this,n),(c=e.call(this))._parentSubscriber=t;var h=v(c);return Object(r.a)(o)?l=o:o&&(l=o.next,a=o.error,u=o.complete,o!==i.a&&(h=Object.create(o),Object(r.a)(h.unsubscribe)&&c.add(h.unsubscribe.bind(h)),h.unsubscribe=c.unsubscribe.bind(v(c)))),c._context=h,c._next=l,c._error=a,c._complete=u,c}return c(n,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,n=u.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(f.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(f.a)(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};u.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),u.a.useDeprecatedSynchronousErrorHandling)throw n;Object(f.a)(n)}}},{key:"__tryOrSetError",value:function(t,e,n){if(!u.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return u.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(f.a)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),n}(p)},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}()},AytR:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={production:!0,firebaseConfig:{apiKey:"AIzaSyDvfSoIQwDtuvgpS2x2g0YJ2WS-CAfqMYI",authDomain:"portfolio-e1ec5.firebaseapp.com",databaseURL:"https://portfolio-e1ec5.firebaseio.com",projectId:"portfolio-e1ec5",storageBucket:"portfolio-e1ec5.appspot.com",messagingSenderId:"389650144053",appId:"1:389650144053:web:a620cf3cb416af458f8a7c",measurementId:"G-7SE07229M1"}}},Cfvw:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),a=n("kJWO"),s=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[a.a]}(t))return function(t,e){return new r.a((function(n){var r=new o.a;return r.add(e.schedule((function(){var i=t[a.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}))}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a((function(n){var r=new o.a;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}))}(t,e);if(Object(l.a)(t))return Object(s.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a((function(n){var r,i=new o.a;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(e.schedule((function(){r=t[u.a](),i.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}})))}))),i}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("3N8a"),i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC"),i=new r.a((function(t){return t.complete()}));function o(t){return t?function(t){return new r.a((function(e){return t.schedule((function(){return e.complete()}))}))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r,i=n("7o/Q"),o=n("2QA8"),a=n("gRHU"),u=n("kJWO"),l=n("SpAZ"),h=n("2fFW"),f=((r=function(){function t(e){s(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return c(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(t,e,n){var r=this.operator,s=function(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(a.a)}(t,e,n);if(s.add(r?r.call(s,this.source):this.source||h.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),h.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){h.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){var e=t,n=e.closed,r=e.destination,o=e.isStopped;if(n||o)return!1;t=r&&r instanceof i.a?r:null}return!0}(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var n=this;return new(e=d(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}}),r,e)}))}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:u.a,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?this:(0===(r=e).length?l.a:1===r.length?r[0]:function(t){return r.reduce((function(t,e){return e(t)}),t)})(this);var r}},{key:"toPromise",value:function(t){var e=this;return new(t=d(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))}}]),t}()).create=function(t){return new r(t)},r);function d(t){if(t||(t=h.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},IYfF:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r,i=n("JIr8"),o=n("vkgz"),a=n("2Vo4"),u=n("z6cu"),l=n("AytR"),h=function(){function t(e,n,r,i){s(this,t),this.email=e,this.id=n,this._tokenId=r,this._tokenExpTime=i}return c(t,[{key:"token",get:function(){return!this._tokenExpTime||new Date>this._tokenExpTime?null:this._tokenId}}]),t}(),f=n("fXoL"),d=n("tk/3"),p=n("tyNb"),v=((r=function(){function t(e,n){s(this,t),this.http=e,this.router=n,this.user=new a.a(null)}return c(t,[{key:"signUp",value:function(t,e){var n=this;return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key="+l.a.firebaseConfig.apiKey,{email:t,password:e,returnSecureToken:!0}).pipe(Object(i.a)(this.errorHandler),Object(o.a)((function(t){n.handleAuth(t.email,t.localId,t.idToken,+t.expiresIn)})))}},{key:"signIn",value:function(t,e){var n=this;return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key="+l.a.firebaseConfig.apiKey,{email:t,password:e,returnSecureToken:!0}).pipe(Object(i.a)(this.errorHandler),Object(o.a)((function(t){n.handleAuth(t.email,t.localId,t.idToken,+t.expiresIn)})))}},{key:"logout",value:function(){this.user.next(null),localStorage.removeItem("userData"),this.router.navigate(["signin"]),this.tokenExpTimer&&clearTimeout(this.tokenExpTimer),this.tokenExpTimer=null}},{key:"autoLogin",value:function(){var t=JSON.parse(localStorage.getItem("userData"));if(t){var e=new h(t.email,t.id,t._tokenId,new Date(t._tokenExpTime));if(e.token){this.user.next(e);var n=new Date(t._tokenExpTime).getTime()-(new Date).getTime();this.autoLogout(n)}}}},{key:"autoLogout",value:function(t){var e=this;this.tokenExpTimer=setTimeout((function(){e.logout()}),t)}},{key:"errorHandler",value:function(t){var e="Unknown Error!";if(t.error&&t.error.error){switch(t.error.error.message){case"EMAIL_EXISTS":e="Already has a registration with this email!";break;case"EMAIL_NOT_FOUND":e="Wrong email or password!";break;case"INVALID_PASSWORD":e="Wrong email or password!"}return Object(u.a)(e)}return Object(u.a)(e)}},{key:"handleAuth",value:function(t,e,n,r){var i=new Date((new Date).getTime()+1e3*r),o=new h(t,e,n,i);this.user.next(o),this.autoLogout(1e3*r),localStorage.setItem("userData",JSON.stringify(o))}}]),t}()).\u0275fac=function(t){return new(t||r)(f.Pb(d.a),f.Pb(p.c))},r.\u0275prov=f.Eb({token:r,factory:r.\u0275fac,providedIn:"root"}),r)},IjjT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=function(){var t=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.now;s(this,t),this.SchedulerAction=e,this.now=n}return c(t,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,t).schedule(n,e)}}]),t}();return t.now=function(){return Date.now()},t}(),i=function(t){h(n,t);var e=d(n);function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.now;return s(this,n),(i=e.call(this,t,(function(){return n.delegate&&n.delegate!==v(i)?n.delegate.now():o()}))).actions=[],i.active=!1,i.scheduled=void 0,i}return c(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(t,e,r):l(g(n.prototype),"schedule",this).call(this,t,e,r)}},{key:"flush",value:function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}}]),n}(r)},JIr8:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("zx2A");function i(t){return function(e){var n=new o(t),r=e.lift(n);return n.caught=r}}var o=function(){function t(e){s(this,t),this.selector=e}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.selector,this.caught))}}]),t}(),a=function(t){h(n,t);var e=d(n);function n(t,r,i){var o;return s(this,n),(o=e.call(this,t)).selector=r,o.caught=i,o}return c(n,[{key:"error",value:function(t){if(!this.isStopped){var e;try{e=this.selector(t,this.caught)}catch(a){return void l(g(n.prototype),"error",this).call(this,a)}this._unsubscribeAndRecycle();var i=new r.a(this);this.add(i);var o=Object(r.c)(e,i);o!==i&&this.add(o)}}}]),n}(r.b)},Kqap:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new o(t,e,n))}}var o=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s(this,t),this.accumulator=e,this.seed=n,this.hasSeed=r}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.accumulator,this.seed,this.hasSeed))}}]),t}(),a=function(t){h(n,t);var e=d(n);function n(t,r,i,o){var a;return s(this,n),(a=e.call(this,t)).accumulator=r,a._seed=i,a.hasSeed=o,a.index=0,a}return c(n,[{key:"_next",value:function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)}},{key:"seed",get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t}}]),n}(r.a)},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=e[e.length-1];return Object(r.a)(a)?(e.pop(),Object(o.a)(e,a)):Object(i.a)(e)}},Lhse:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout((function(){throw t}),0)}n.d(e,"a",(function(){return r}))},NSPt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("wj3C"),i=n("mAIw"),o=n("zVF4"),a=n("q/0M"),s=n("S+S0");var u,c,l=(c=r)&&"object"==typeof c&&"default"in c?c:{default:c},h=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),o.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:o.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),f=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return o.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),d=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(c){}return new f},p=d("localStorage"),v=d("sessionStorage"),y=new a.Logger("@firebase/database"),g=(u=1,function(){return u++}),m=function(t){var e=o.stringToByteArray(t),n=new o.Sha1;n.update(e);var r=n.digest();return o.base64.encodeByteArray(r)},_=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var a=e[i];Array.isArray(a)||a&&"object"==typeof a&&"number"==typeof a.length?r+=t.apply(null,a):r+="object"==typeof a?o.stringify(a):a,r+=" "}return r},b=null,w=!0,E=function(t,e){o.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(y.logLevel=a.LogLevel.VERBOSE,b=y.log.bind(y),e&&v.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,v.remove("logging_enabled"))},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===w&&(w=!1,null===b&&!0===v.get("logging_enabled")&&E(!0)),b){var n=_.apply(null,t);b(n)}},k=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];C.apply(void 0,i.__spread([t],e))}},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,i.__spread(t));y.error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,i.__spread(t));throw y.error(n),new Error(n)},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+_.apply(void 0,i.__spread(t));y.warn(n)},O=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},A="[MIN_NAME]",x="[MAX_NAME]",N=function(t,e){if(t===e)return 0;if(t===A||e===x)return-1;if(e===A||t===x)return 1;var n=Y(t),r=Y(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},P=function(t,e){return t===e?0:t<e?-1:1},D=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+o.stringify(e))},R=function t(e){if("object"!=typeof e||null===e)return o.stringify(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=o.stringify(n[a]),i+=":",i+=t(e[n[a]]);return i+"}"},L=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function j(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var F,M,U,V,q,H,B,z,W,Q,G=function(t){var e,n,r,i,a;o.assert(!O(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},K=new RegExp("^-?(0*)\\d{1,10}$"),Y=function(t){if(K.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},X=function(t){try{t()}catch(c){setTimeout((function(){throw I("Exception was thrown by user callback.",c.stack||""),c}),Math.floor(0))}},Z=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},J=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=N(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),$=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=o.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=o.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=o.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),tt=function(){function t(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=p.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&p.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(o.assert("string"==typeof t,"typeof type must == string"),o.assert("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return j(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),et=function(t){var e=nt(t),n=e.namespace;return"firebase.com"===e.domain&&T(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tt(e.host,e.secure,n,"ws"===e.scheme||"wss"===e.scheme,"",n!==e.subdomain),path:new J(e.pathString)}},nt=function(t){var e="",n="",r="",o="",a="",s=!0,u="https",l=443;if("string"==typeof t){var h=t.indexOf("//");h>=0&&(u=t.substring(0,h-1),t=t.substring(h+2));var f=t.indexOf("/");-1===f&&(f=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(f,d)),f<d&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(c){}e+="/"+i}return e}(t.substring(f,d)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=i.__values(t.split("&")),a=o.next();!a.done;a=o.next()){var s=a.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):I("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(h=e.indexOf(":"))>=0?(s="https"===u||"wss"===u,l=parseInt(e.substring(h+1),10)):h=e.length;var v=e.slice(0,h);if("localhost"===v.toLowerCase())n="localhost";else if(v.split(".").length<=2)n=v;else{var y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),a=r}"ns"in p&&(a=p.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:s,scheme:u,pathString:o,namespace:a}},rt=/[\[\].#$\/\u0000-\u001F\u007F]/,it=/[\[\].#$\u0000-\u001F\u007F]/,ot=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},st=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!O(t)||t&&"object"==typeof t&&o.contains(t,".sv")},ut=function(t,e,n,r,i){i&&void 0===n||ct(o.errorPrefix(t,e,i),n,r)},ct=function t(e,n,r){var i=r instanceof J?new $(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+i.toErrorString());if("function"==typeof n)throw new Error(e+"contains a function "+i.toErrorString()+" with contents = "+n.toString());if(O(n))throw new Error(e+"contains "+n.toString()+" "+i.toErrorString());if("string"==typeof n&&n.length>10485760/3&&o.stringLength(n)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var a=!1,s=!1;if(j(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!ot(n)))throw new Error(e+" contains an invalid key ("+n+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(n),t(e,r,i),i.pop()})),a&&s)throw new Error(e+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},lt=function(t,e,n,r,i){if(!i||void 0!==n){var a=o.errorPrefix(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(a+" must be an object containing the children to replace.");var s=[];j(n,(function(t,e){var n=new J(t);if(ct(a,e,r.child(n)),".priority"===n.getBack()&&!st(e))throw new Error(a+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ot(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(J.comparePaths);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&a.contains(r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(a,s)}},ht=function(t,e,n,r){if(!r||void 0!==n){if(O(n))throw new Error(o.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!st(n))throw new Error(o.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ft=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(o.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},dt=function(t,e,n,r){if(!(r&&void 0===n||ot(n)))throw new Error(o.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},pt=function(t,e,n,r){if(!(r&&void 0===n||at(n)))throw new Error(o.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},vt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pt(t,e,n,r)},yt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},gt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ot(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),at(t)}(r))throw new Error(o.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},mt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(o.errorPrefix(t,e,r)+"must be a boolean.")},_t=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){o.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),o.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new o.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){o.validateArgCount("OnDisconnect.remove",0,1,arguments.length),yt("OnDisconnect.remove",this.path_),o.validateCallback("OnDisconnect.remove",1,t,!0);var e=new o.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){o.validateArgCount("OnDisconnect.set",1,2,arguments.length),yt("OnDisconnect.set",this.path_),ut("OnDisconnect.set",1,t,this.path_,!1),o.validateCallback("OnDisconnect.set",2,e,!0);var n=new o.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){o.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),yt("OnDisconnect.setWithPriority",this.path_),ut("OnDisconnect.setWithPriority",1,t,this.path_,!1),ht("OnDisconnect.setWithPriority",2,e,!1),o.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new o.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(o.validateArgCount("OnDisconnect.update",1,2,arguments.length),yt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("OnDisconnect.update",1,t,this.path_,!1),o.validateCallback("OnDisconnect.update",2,e,!0);var i=new o.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),bt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return o.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),wt=(F="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",M=0,U=[],function(t){var e,n=t===M;M=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=F.charAt(t%64),t=Math.floor(t/64);o.assert(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===U[e];e--)U[e]=0;U[e]++}else for(e=0;e<12;e++)U[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=F.charAt(U[e]);return o.assert(20===i.length,"nextPushId: Length should be 20."),i}),Et=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ct=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Et(A,t),r=new Et(A,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Et.MIN},t}(),kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return V},set:function(t){V=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return N(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw o.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Et.MIN},e.prototype.maxPost=function(){return new Et(x,V)},e.prototype.makePost=function(t,e){return o.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new Et(t,V)},e.prototype.toString=function(){return".key"},e}(Ct),St=new kt,Tt=function(t){return"number"==typeof t?"number:"+G(t):"string:"+t},It=function(t){if(t.isLeafNode()){var e=t.val();o.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&o.contains(e,".sv"),"Priority must be a string or number.")}else o.assert(t===q||t.isEmpty(),"priority of unexpected type.");o.assert(t===q||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ot=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,o.assert(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),It(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return H},set:function(t){H=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(o.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Tt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?G(this.value_):this.value_,this.lazyHash_=m(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(o.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return o.assert(i>=0,"Unknown leaf type: "+n),o.assert(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),At=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?N(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Et.MIN},e.prototype.maxPost=function(){return new Et(x,new Ot("[PRIORITY-POST]",z))},e.prototype.makePost=function(t,e){var n=B(t);return new Et(e,new Ot("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ct)),xt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Nt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Dt.EMPTY_NODE,this.right=null!=o?o:Dt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Dt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Dt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Pt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Nt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Dt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Nt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Nt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new xt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new xt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new xt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new xt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Pt,t}(),Rt=Math.log(2),Lt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Rt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),jt=function(t,e,n,r){t.sort(e);var i=function(e){for(var r=null,i=null,o=t.length,a=function(e,r){var i=o-e,a=o;o-=e;var u=function e(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=t[r],a=n?n(o):o,new Nt(a,o.node,Nt.BLACK,null,null);var u=parseInt(s/2,10)+r,c=e(r,u),l=e(u+1,i);return o=t[u],a=n?n(o):o,new Nt(a,o.node,Nt.BLACK,c,l)}(i+1,a),c=t[i],l=n?n(c):c;s(new Nt(l,c.node,r,null,u))},s=function(t){r?(r.left=t,r=t):(i=t,r=t)},u=0;u<e.count;++u){var c=e.nextBitIsOne(),l=Math.pow(2,e.count-(u+1));c?a(l,Nt.BLACK):(a(l,Nt.BLACK),a(l,Nt.RED))}return i}(new Lt(t.length));return new Dt(r||e,i)},Ft={},Mt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return o.assert(Ft&&At,"ChildrenNode.ts has not been loaded"),W=W||new t({".priority":Ft},{".priority":At})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=o.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Dt?e:null},t.prototype.hasIndex=function(t){return o.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){o.assert(e!==St,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,a=[],s=!1,u=n.getIterator(Et.Wrap),c=u.getNext();c;)s=s||e.isDefinedOn(c.node),a.push(c),c=u.getNext();r=s?jt(a,e.getCompare()):Ft;var l=e.toString(),h=i.__assign({},this.indexSet_);h[l]=e;var f=i.__assign({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(o.map(this.indexes_,(function(t,i){var a=o.safeGet(r.indexSet_,i);if(o.assert(a,"Missing index implementation for "+i),t===Ft){if(a.isDefinedOn(e.node)){for(var s=[],u=n.getIterator(Et.Wrap),c=u.getNext();c;)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),jt(s,a.getCompare())}return Ft}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Et(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(o.map(this.indexes_,(function(t){if(t===Ft)return t;var r=n.get(e.name);return r?t.remove(new Et(e.name,r)):t})),this.indexSet_)},t}();function Ut(t,e){return N(t.name,e.name)}function Vt(t,e){return N(t,e)}var qt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&It(this.priorityNode_),this.children_.isEmpty()&&o.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Q||(Q=new t(new Dt(Vt),null,Mt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Q},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Q:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(o.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Et(e,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Q:this.priorityNode_;return new t(i,s,a)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;o.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(At,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Tt(this.getPriority().val())+":"),this.forEachChild(At,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":m(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Et(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Et(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Et(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Et.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Et.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ht?-1:0},t.prototype.withIndex=function(e){if(e===St||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===St||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(At),r=e.getIterator(At),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===St?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Ht=new(function(t){function e(){return t.call(this,new Dt(Vt),qt.EMPTY_NODE,Mt.Default)||this}return i.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return qt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(qt));function Bt(t,e){if(void 0===e&&(e=null),null===t)return qt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),o.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Ot(t,Bt(e));if(t instanceof Array){var n=qt.EMPTY_NODE;return j(t,(function(e,r){if(o.contains(t,e)&&"."!==e.substring(0,1)){var i=Bt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Bt(e))}var r=[],i=!1;if(j(t,(function(t,e){if("."!==t.substring(0,1)){var n=Bt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Et(t,n)))}})),0===r.length)return qt.EMPTY_NODE;var a=jt(r,Ut,(function(t){return t.name}),Vt);if(i){var s=jt(r,At.getCompare());return new qt(a,Bt(e),new Mt({".priority":s},{".priority":At}))}return new qt(a,Bt(e),Mt.Default)}Object.defineProperties(Et,{MIN:{value:new Et(A,qt.EMPTY_NODE)},MAX:{value:new Et(x,Ht)}}),kt.__EMPTY_NODE=qt.EMPTY_NODE,Ot.__childrenNodeConstructor=qt,q=Ht,z=Ht,function(t){B=t}(Bt);var zt,Wt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?N(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Et.MIN},e.prototype.maxPost=function(){return Et.MAX},e.prototype.makePost=function(t,e){var n=Bt(t);return new Et(e,n)},e.prototype.toString=function(){return".value"},e}(Ct)),Qt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,o.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return i.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?N(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Bt(t),r=qt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Et(e,r)},e.prototype.maxPost=function(){var t=qt.EMPTY_NODE.updateChild(this.indexPath_,Ht);return new Et(x,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ct),Gt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return o.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return o.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return o.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return o.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){o.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),pt("DataSnapshot.child",1,e,!1);var n=new J(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,At)},t.prototype.hasChild=function(t){o.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),pt("DataSnapshot.hasChild",1,t,!1);var e=new J(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return o.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(o.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),o.validateCallback("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),At))}))},t.prototype.hasChildren=function(){return o.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return o.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return o.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Kt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+o.stringify(this.snapshot.exportVal())},t}(),Yt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Xt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Kt("value",this,new Gt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){o.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Zt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return o.contains(this.callbacks_,e="children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.createEvent=function(t,e){o.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Kt(t.type,this,new Gt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){o.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var a=r[0],s=i[0];return!(s!==a||e.callbacks_[a]&&this.callbacks_[s]&&e.callbacks_[a]!==this.callbacks_[s])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Jt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return o.assert(zt,"Reference.ts has not been loaded"),zt},set:function(t){zt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===St){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==A)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===At){if(null!=e&&!st(e)||null!=n&&!st(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(o.assert(t.getIndex()instanceof Qt||t.getIndex()===Wt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return o.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){o.validateArgCount("Query.on",2,4,arguments.length),ft("Query.on",1,e,!1),o.validateCallback("Query.on",2,n,!1);var a=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,a.cancel,a.context);else{var s={};s[e]=n,this.onChildEvent(s,a.cancel,a.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Xt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Zt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){o.validateArgCount("Query.off",0,3,arguments.length),ft("Query.off",1,t,!0),o.validateCallback("Query.off",2,e,!0),o.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var a=e||null;r=new Xt(a,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Zt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var a=this;o.validateArgCount("Query.once",1,4,arguments.length),ft("Query.once",1,e,!1),o.validateCallback("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.Deferred;c.promise.catch((function(){}));var l=function t(r){u&&(u=!1,a.off(e,t),n&&n.bind(s.context)(r),c.resolve(r))};return this.on(e,l,(function(t){a.off(e,l),s.cancel&&s.cancel.bind(s.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(o.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(o.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(o.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');pt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new J(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Qt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){o.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(St);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){o.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(At);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){o.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Wt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),o.validateArgCount("Query.startAt",0,2,arguments.length),ut("Query.startAt",1,e,this.path,!0),dt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),o.validateArgCount("Query.endAt",0,2,arguments.length),ut("Query.endAt",1,e,this.path,!0),dt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(o.validateArgCount("Query.equalTo",1,2,arguments.length),ut("Query.equalTo",1,t,this.path,!1),dt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return o.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return o.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=R(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(o.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),a=this.queryIdentifier()===e.queryIdentifier();return r&&i&&a},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,o.validateCallback(t,3,r.cancel,!0),r.context=n,o.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(o.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),$t=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),te=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ee=function(t,e,n){return t&&"object"==typeof t?(o.assert(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ne(t[".sv"],e,n):"object"==typeof t[".sv"]?re(t[".sv"],e):void o.assert(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ne=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:o.assert(!1,"Unexpected server value: "+t)}},re=function(t,e,n){t.hasOwnProperty("increment")||o.assert(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&o.assert(!1,"Unexpected increment value: "+r);var i=e.node();if(o.assert(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!=typeof a?r:a+r},ie=function(t,e,n,r){return ae(e,new te(n,t),r)},oe=function(t,e,n){return ae(t,new $t(e),n)};function ae(t,e,n){var r,i=t.getPriority().val(),o=ee(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=ee(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Ot(s,Bt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Ot(o))),u.forEachChild(At,(function(t,i){var o=ae(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var se,ue,ce=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(At,(function(t,e){n.remember(new J(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new J(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),le=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),he=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,o.assert(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),fe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=le.ACK_USER_WRITE,this.source=he.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return o.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new J(e));return new t(J.Empty,n,this.revert)}return o.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),de=function(){function t(t,e){void 0===e&&(se||(se=new Dt(P)),e=se),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return j(e,(function(t,e){n=n.set(new J(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:J.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new J(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(J.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,J.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,J.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(J.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),pe=function(){function t(t,e){this.source=t,this.path=e,this.type=le.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,J.Empty):new t(this.source,this.path.popFront())},t}(),ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=le.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,J.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ye=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=le.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new J(e));return n.isEmpty()?null:n.value?new ve(this.source,J.Empty,n.value):new t(this.source,J.Empty,n)}return o.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ge=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),me=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new ge(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new ge(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ge(qt.EMPTY_NODE,!1,!1),new ge(qt.EMPTY_NODE,!1,!1)),t}(),_e=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),be=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,a){o.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(_e.childRemovedChange(e,s)):o.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(_e.childAddedChange(e,n)):a.trackChildChange(_e.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(At,(function(t,r){e.hasChild(t)||n.trackChildChange(_e.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(At,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(_e.childChangedChange(e,r,i))}else n.trackChildChange(_e.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?qt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),we=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;o.assert(e===_e.CHILD_ADDED||e===_e.CHILD_CHANGED||e===_e.CHILD_REMOVED,"Only child changes supported for tracking"),o.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===_e.CHILD_ADDED&&i===_e.CHILD_REMOVED)this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_ADDED)this.changeMap.delete(n);else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_CHANGED)this.changeMap.set(n,_e.childRemovedChange(n,r.oldSnap));else if(e===_e.CHILD_CHANGED&&i===_e.CHILD_ADDED)this.changeMap.set(n,_e.childAddedChange(n,t.snapshotNode));else{if(e!==_e.CHILD_CHANGED||i!==_e.CHILD_CHANGED)throw o.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ee=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ce=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ge(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),ke=function(t,e){this.viewCache=t,this.changes=e},Se=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){o.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),o.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var a,s,u=new we;if(n.type===le.OVERWRITE){var c=n;c.source.fromUser?a=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(o.assert(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),a=this.applyServerOverwrite_(e,c.path,c.snap,r,i,s,u))}else if(n.type===le.MERGE){var l=n;l.source.fromUser?a=this.applyUserMerge_(e,l.path,l.children,r,i,u):(o.assert(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.getServerCache().isFiltered(),a=this.applyServerMerge_(e,l.path,l.children,r,i,s,u))}else if(n.type===le.ACK_USER_WRITE){var h=n;a=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==le.LISTEN_COMPLETE)throw o.assertionError("Unknown operation type: "+n.type);a=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,a,f),new ke(a,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(_e.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var a=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,u=void 0;if(e.isEmpty())if(o.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof qt?c:qt.EMPTY_NODE);s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){o.assert(1===e.getLength(),"Can't have a priority with additional path components");var d=a.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);s=null!=p?this.filter_.updatePriority(d,p):a.getNode()}else{var v=e.popFront(),y=void 0;if(a.isCompleteForChild(f)){u=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,a.getNode(),u);y=null!=g?a.getNode().getImmediateChild(f).updateChild(v,g):a.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());s=null!=y?this.filter_.updateChild(a.getNode(),f,y,v,r,i):a.getNode()}}return t.updateEventSnap(s,a.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,a){var s,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),d=u.getNode().getImmediateChild(h).updateChild(f,n);s=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,Ee,null)}var p=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new Ce(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,v,a)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var a,s,u=t.getEventCache(),c=new Ce(r,t,i);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):qt.EMPTY_NODE}if(f.equals(d))a=t;else{var v=this.filter_.updateChild(u.getNode(),l,d,h,c,o);a=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,a){var s=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:de.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new J(e),h,r,i,o,a)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new J(e),f,r,i,o,a)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),r,i,a,o);if(e.isEmpty()){var u=de.Empty;return s.getNode().forEachChild(St,(function(t,e){u=u.set(new J(t),e)})),this.applyServerMerge_(t,e,u,r,i,a,o)}return t}var c=de.Empty;return n.foreach((function(t,n){var r=e.child(t);s.isCompleteForPath(r)&&(c=c.set(t,s.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,a,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ee,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var a;if(null!=n.shadowingWrite(e))return t;var s=new Ce(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();o.assert(h instanceof qt,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,e.popFront(),s,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,qt.EMPTY_NODE,e.popFront(),s,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(a=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,a,i))}return a=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(J.Empty),t.updateEventSnap(c,a,this.filter_.filtersNodes())},t}(),Te=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===_e.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(_e.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,_e.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,_e.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,_e.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,_e.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,_e.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,a=n.filter((function(t){return t.type===e}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw o.assertionError("Should only compare child_ events.");var n=new Et(t.childName,t.snapshotNode),r=new Et(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Ie=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new be(n.getIndex()),i=n.getNodeFilter();this.processor_=new Se(i);var o=e.getServerCache(),a=e.getEventCache(),s=r.updateFullNode(qt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(qt.EMPTY_NODE,a.getNode(),null),c=new ge(s,o.isFullyInitialized(),r.filtersNodes()),l=new ge(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new me(l,c),this.eventGenerator_=new Te(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){o.assert(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)}))}if(t){for(var i=[],a=0;a<this.eventRegistrations_.length;++a){var s=this.eventRegistrations_[a];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(a+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===le.MERGE&&null!==t.source.queryId&&(o.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),o.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),o.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(At,(function(t,e){n.push(_e.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(_e.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Oe=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return o.assert(ue,"Reference.ts has not been loaded"),ue},set:function(t){o.assert(!ue,"__referenceConstructor has already been defined"),ue=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,a,s=t.source.queryId;if(null!==s){var u=this.views.get(s);return o.assert(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=i.__values(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof qt?(s=n.calcCompleteEventChildren(r),u=!1):(s=qt.EMPTY_NODE,u=!1);var c=new me(new ge(s,u,!1),new ge(r,i,!1));a=new Ie(t,c),this.views.set(o,a)}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,a,s=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===s)try{for(var h=i.__values(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=i.__read(f.value,2),v=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(v),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(y){o={error:y}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}else(d=this.views.get(s))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(s),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=i.__values(this.views.values()),o=r.next();!o.done;o=r.next()){var a=o.value;a.getQuery().getQueryParams().loadsAllData()||n.push(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=i.__values(this.views.values()),a=o.next();!a.done;a=o.next())r=r||a.value.getCompleteServerCache(t)}catch(s){e={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=i.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(a){t={error:a}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Ae=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new de(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=J.relativePath(i,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(i,o))}var s=new de(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return j(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,de.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(J.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(At,(function(e,n){t.push(new Et(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Et(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new de(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,a){".priority"===n?(o.assert(null!==a.value,"Priority writes must always be leaf nodes"),i=a.value):r=t(e.child(n),a,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(J.Empty,this.writeTree_,t)},t.Empty=new t(new de(null)),t}(),xe=function(){function t(){this.visibleWrites_=Ae.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ne(t,this)},t.prototype.addOverwrite=function(t,e,n,r){o.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){o.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));o.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,a=!1,s=this.allWrites_.length-1;i&&s>=0;){var u=this.allWrites_[s];u.visible&&(s>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(a=!0)),s--}return!!i&&(a?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):j(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(J.Empty)?t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e).apply(n||qt.EMPTY_NODE):null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var s=this.visibleWrites_.childCompoundWrite(e);return s.isEmpty()?n:null!=n||s.hasCompleteWrite(J.Empty)?s.apply(n||qt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=qt.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(At,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(At,(function(t,e){var r=i.childCompoundWrite(new J(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){o.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var a=this.visibleWrites_.childCompoundWrite(i);return a.isEmpty()?r.getChild(e):a.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(J.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,J.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ae.Empty,i=0;i<t.length;++i){var a=t[i];if(e(a)){var s=a.path,u=void 0;if(a.snap)n.contains(s)?(u=J.relativePath(n,s),r=r.addWrite(u,a.snap)):s.contains(n)&&(u=J.relativePath(s,n),r=r.addWrite(J.Empty,a.snap.getChild(u)));else{if(!a.children)throw o.assertionError("WriteRecord should have .snap or .children");if(n.contains(s))u=J.relativePath(n,s),r=r.addWrites(u,a.children);else if(s.contains(n))if((u=J.relativePath(s,n)).isEmpty())r=r.addWrites(J.Empty,a.children);else{var c=o.safeGet(a.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(J.Empty,l)}}}}}return r},t}(),Ne=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Pe=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=de.Empty,this.pendingWriteTree_=new xe,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ve(he.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=de.fromObject(e);return this.applyOperationToSyncPoints_(new ye(he.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=de.Empty;return null!=n.snap?r=r.set(J.Empty,!0):j(n.children,(function(t,e){r=r.set(new J(t),e)})),this.applyOperationToSyncPoints_(new fe(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ve(he.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=de.fromObject(e);return this.applyOperationToSyncPoints_(new ye(he.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new pe(he.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=J.relativePath(a,e),c=new ve(he.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),a=o.path,s=o.queryId,u=J.relativePath(a,e),c=de.fromObject(n),l=new ye(he.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,a=i.queryId,s=J.relativePath(o,e),u=new pe(he.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,a=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=J.relativePath(t,r);i=i||e.getCompleteServerCache(n),a=a||e.hasCompleteView()}));var s,u=this.syncPointTree_.get(r);u?(a=a||u.hasCompleteView(),i=i||u.getCompleteServerCache(J.Empty)):(u=new Oe,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?s=!0:(s=!1,i=qt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(J.Empty);n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);o.assert(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,s);if(!c&&!a){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var v=d[p],y=v.getQuery(),g=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),g.hashFn,g.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=J.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),j(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),a=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,a.hashFn,a.onComplete),u=this.syncPointTree_.subtree(r);if(i)o.assert(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),j(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||qt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return o.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new J(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);o.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(J.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(J.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(J.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(J.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(J.Empty));var a=[];return e.children.inorderTraversal((function(e,o){var s=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))})),o&&(a=a.concat(o.applyOperation(t,r,n))),a},t.nextQueryTag_=1,t}(),De=function(){function t(){this.rootNode_=qt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Re=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),o.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return o.deepCopy(this.counters_)},t}(),Le=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Re),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),je=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=i.__assign({},t);return this.last_&&j(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Fe=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new je(t);var n=1e4+2e4*Math.random();Z(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;j(e,(function(e,i){i>0&&o.contains(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Z(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Me=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Ue(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Ue=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();b&&C("event: "+e.toString()),X(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Ve=function(){function t(t){this.allowedEvents_=t,this.listeners_={},o.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=i.__spread(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){o.assert(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),qe=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return i.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return o.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Ve),He=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||o.isMobileCordova()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return i.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return o.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Ve),Be=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&X((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),ze=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=k(t),this.stats_=Le.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Be(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(o.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new We((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=i.__read(t,5),o=r[0],a=r[1],s=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===o)n.id=a,n.password=s;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=i.__read(t,2),o=r[0],a=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,a)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(o.isNodeSdk()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=o.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=o.base64Encode(e),r=L(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!o.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=o.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),We=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,o.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=g(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(c){C("frame writing exception"),c.stack&&C(c.stack),C(c)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||C("No IE domain setting required")}catch(c){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;o.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){C("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(c){}}),Math.floor(1))},t}(),Qe="",Ge=null;"undefined"!=typeof MozWebSocket?Ge=MozWebSocket:"undefined"!=typeof WebSocket&&(Ge=WebSocket);var Ke=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=k(this.connId),this.stats_=Le.getCollection(n),this.connURL=t.connectionURL_(n,i,o)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!o.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if(o.isNodeSdk()){var r={headers:{"User-Agent":"Firebase/5/"+Qe+"/"+process.platform+"/"+(o.CONSTANTS.NODE_ADMIN?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,a=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;a&&(r.proxy={origin:a}),this.mySock=new Ge(this.connURL,[],r)}else this.mySock=new Ge(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(c){this.log_("Error instantiating WebSocket.");var s=c.message||c.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ge&&!t.forceDisallow_},t.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=o.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(o.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=o.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=L(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(c){this.log_("Exception thrown from WebSocket.send():",c.message||c.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Ye=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[ze,Ke]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Ke&&Ke.isAvailable(),a=o&&!Ke.previouslyFailed();if(e.webSocketOnly&&(o||I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[Ke];else{var s=this.transports_=[];try{for(var u=i.__values(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Xe=function(){function t(t,e,n,r,i,o,a,s){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=k("c:"+this.id+":"),this.transportManager_=new Ye(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Z((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=D("t",t),n=D("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=D("t",t),n=D("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=D("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?S("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&I("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Z((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Z((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Ze=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Je=function(t){function e(n,r,i,a,s,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=s,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=k("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingPutCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!o.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),qe.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&He.getInstance().on("online",l.onOnline_,l),l}return i.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(o.stringify(i)),o.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),a=t.path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),o.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),o.assert(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&o.contains(t,"w")){var n=o.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();I("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||o.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=o.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),o.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+o.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):S("Unrecognized action received from server: "+o.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;o.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,a=this,s=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,r())};this.realtime_={close:l,sendRequest:function(t){o.assert(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then((function(e){u?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),a.authToken_=e&&e.accessToken,c=new Xe(i,a.repoInfo_,a.applicationId_,t,n,r,(function(t){I(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),s))})).then(null,(function(t){a.log_("Failed to get token: "+t),u||(o.CONSTANTS.NODE_ADMIN&&I(t),l())}))}},e.prototype.interrupt=function(t){C("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){C("Resuming connection for reason: "+t),delete this.interruptReasons_[t],o.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return R(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new J(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){C("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=i.__values(this.listens.values()),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,i.__values(s.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";o.CONSTANTS.NODE_ADMIN?e="admin_node":o.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+Qe.replace(/\./g,"-")]=1,o.isMobileCordova()?t["framework.cordova"]=1:o.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=He.getInstance().currentlyOnline();return o.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Ze),$e=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=k("p:rest:"),i.listens_={},i}return i.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(o.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var a=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&a.onDataUpdate_(s,n,!1,r),o.safeGet(a.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var a=i&&i.accessToken;a&&(e.auth=a);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+o.querystring(e);r.log_("Sending REST request for "+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=o.jsonEval(u.responseText)}catch(c){I("Failed to parse JSON response for "+s+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&I("Got unsuccessful REST response for "+s+" Status: "+u.status),n(u.status);n=null}},u.open("GET",s,!0),u.send()}))},e}(Ze),tn=function(){function t(t,e,n,r){var i=this;if(this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Me,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ce,this.persistentConnection_=null,this.stats_=Le.getCollection(t),e||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new $e(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var a=n.options.databaseAuthVariableOverride;if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{o.stringify(a)}catch(c){throw new Error("Invalid authOverride provided: "+c)}}this.persistentConnection_=new Je(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,a),this.server_=this.persistentConnection_}r.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=Le.getOrCreateReporter(t,(function(){return new Fe(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new De,this.infoSyncTree_=new Pe({startListening:function(t,e,n,r){var o=[],a=i.infoData_.getNode(t.path);return a.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Pe({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new J(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new J(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var a=[];if(r)if(n){var s=o.map(e,(function(t){return Bt(t)}));a=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var u=Bt(e);a=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=o.map(e,(function(t){return Bt(t)}));a=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=Bt(e);a=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;a.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,a)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;j(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new J("/.info/"+t),r=Bt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=Bt(e,n),s=this.serverSyncTree_.calcCompleteEventCache(t),u=oe(a,s,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),a.val(!0),(function(e,n){var o="ok"===e;o||I("set at "+t+" failed: "+e);var a=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,a),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),a={};if(j(e,(function(e,n){i=!1,a[e]=ie(t.child(e),Bt(n),r.serverSyncTree_,o)})),i)C("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||I("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,i)})),j(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new ce;this.onDisconnect_.forEachTree(J.Empty,(function(r,i){var o=ie(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(J.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new ce,this.eventQueue_.raiseEventsForChangedPath(J.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Bt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Bt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(o.isEmpty(e))return C("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&j(e,(function(e,n){var i=Bt(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new je(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);j(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),C.apply(void 0,i.__spread([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&X((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new dn(this))},enumerable:!1,configurable:!0}),t}(),en=function(){function t(e){this.indexedFilter_=new be(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Et(e,n))||(n=qt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=qt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(qt.EMPTY_NODE);var i=this;return e.forEachChild(At,(function(t,e){i.matches(new Et(t,e))||(r=r.updateImmediateChild(t,qt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),nn=function(){function t(t){this.rangedFilter_=new en(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Et(e,n))||(n=qt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=qt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(qt.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,qt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(t,e){return s(e,t)}}else a=this.index_.getCompare();var u=t;o.assert(u.numChildren()===this.limit_,"");var c=new Et(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(_e.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(_e.childRemovedChange(e,f));var v=u.updateImmediateChild(e,qt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(_e.childAddedChange(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?t:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(_e.childRemovedChange(l.name,l.node)),i.trackChildChange(_e.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,qt.EMPTY_NODE)):t},t}(),rn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=At}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return o.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return o.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:A},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return o.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return o.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return o.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==At&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===At},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new be(this.getIndex()):this.hasLimit()?new nn(this):new en(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===At?e=n.PRIORITY_INDEX:this.index_===Wt?e=n.VALUE_INDEX:this.index_===St?e=n.KEY_INDEX:(o.assert(this.index_ instanceof Qt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=o.stringify(e),this.startSet_&&(r[n.START_AT]=o.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+o.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=o.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+o.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),on=function(t){function e(e,n){if(!(e instanceof tn))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,rn.DEFAULT,!1)||this}return i.__extends(e,t),e.prototype.getKey=function(){return o.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return o.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof J||(null===this.path.getFront()?vt("Reference.child",1,t,!1):pt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){o.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){o.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){o.validateArgCount("Reference.set",1,2,arguments.length),yt("Reference.set",this.path),ut("Reference.set",1,t,this.path,!1),o.validateCallback("Reference.set",2,e,!0);var n=new o.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(o.validateArgCount("Reference.update",1,2,arguments.length),yt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("Reference.update",1,t,this.path,!1),o.validateCallback("Reference.update",2,e,!0);var i=new o.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(o.validateArgCount("Reference.setWithPriority",2,3,arguments.length),yt("Reference.setWithPriority",this.path),ut("Reference.setWithPriority",1,t,this.path,!1),ht("Reference.setWithPriority",2,e,!1),o.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return o.validateArgCount("Reference.remove",0,1,arguments.length),yt("Reference.remove",this.path),o.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(o.validateArgCount("Reference.transaction",1,3,arguments.length),yt("Reference.transaction",this.path),o.validateCallback("Reference.transaction",1,t,!1),o.validateCallback("Reference.transaction",2,e,!0),mt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.Deferred;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new bt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){o.validateArgCount("Reference.setPriority",1,2,arguments.length),yt("Reference.setPriority",this.path),ht("Reference.setPriority",1,t,!1),o.validateCallback("Reference.setPriority",2,e,!0);var n=new o.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){o.validateArgCount("Reference.push",0,2,arguments.length),yt("Reference.push",this.path),ut("Reference.push",1,t,this.path,!0),o.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=wt(r),a=this.child(i),s=this.child(i);return n=null!=t?a.set(t,e).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),a},e.prototype.onDisconnect=function(){return yt("Reference.onDisconnect",this.path),new _t(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Jt);Jt.__referenceConstructor=on,Oe.__referenceConstructor=on;var an=function(){this.children={},this.childCount=0,this.value=null},sn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new an),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof J?e:new J(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,o.safeGet(r.node_.children,i)||new an),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){o.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;j(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new J(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=o.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),un=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});tn.MAX_TRANSACTION_RETRIES_=25,tn.prototype.transactionsInit_=function(){this.transactionQueueTree_=new sn},tn.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},a=new on(this,t);a.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:g(),applyLocally:r,retryCount:0,unwatcher:function(){a.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var l=new Gt(s.currentInputSnapshot,new on(this,s.path),At);s.onComplete(null,!1,l)}}else{ct("transaction failed: Data returned ",c,s.path),s.status=un.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(s),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&o.contains(c,".priority")?(d=o.safeGet(c,".priority"),o.assert(st(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||qt.EMPTY_NODE).getPriority().val(),d=d;var p=this.generateServerValues(),v=Bt(c,d),y=oe(v,u,p);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,y,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},tn.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||qt.EMPTY_NODE},tn.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);o.assert(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===un.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},tn.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),a=i,s=i.hash(),u=0;u<e.length;u++){var c=e[u];o.assert(c.status===un.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=un.SENT,c.retryCount++;var l=J.relativePath(t,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<e.length;a++){if(e[a].status=un.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new on(n,e[a].path),c=new Gt(s,u,At);o.push(e[a].onComplete.bind(null,null,!0,c))}e[a].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),a=0;a<o.length;a++)X(o[a])}else{if("datastale"===r)for(a=0;a<e.length;a++)e[a].status=e[a].status===un.SENT_NEEDS_ABORT?un.NEEDS_ABORT:un.RUN;else for(I("transaction at "+f.toString()+" failed: "+r),a=0;a<e.length;a++)e[a].status=un.NEEDS_ABORT,e[a].abortReason=r;n.rerunTransactions_(t)}}),s)},tn.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},tn.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===un.RUN})).map((function(t){return t.currentWriteId})),a=0;a<t.length;a++){var s=t[a],u=J.relativePath(e,s.path),c=!1,l=void 0;if(o.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===un.NEEDS_ABORT)c=!0,l=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===un.RUN)if(s.retryCount>=tn.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,i);s.currentInputSnapshot=h;var f=t[a].update(h.val());if(void 0!==f){ct("transaction failed: Data returned ",f,s.path);var d=Bt(f);"object"==typeof f&&null!=f&&o.contains(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=s.currentWriteId,v=this.generateServerValues(),y=oe(d,h,v);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,y,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[a].status=un.COMPLETED,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete))if("nodata"===l){var g=new on(this,t[a].path),m=new Gt(t[a].currentInputSnapshot,g,At);n.push(t[a].onComplete.bind(null,null,!1,m))}else n.push(t[a].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),a=0;a<n.length;a++)X(n[a]);this.sendReadyTransactions_()}},tn.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},tn.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},tn.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},tn.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==un.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},tn.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},tn.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,a=0;a<e.length;a++)e[a].status===un.SENT_NEEDS_ABORT||(e[a].status===un.SENT?(o.assert(i===a-1,"All SENT items should be at beginning of queue."),i=a,e[a].status=un.SENT_NEEDS_ABORT,e[a].abortReason="set"):(o.assert(e[a].status===un.RUN,"Unexpected transaction status in abort"),e[a].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[a].currentWriteId,!0)),e[a].onComplete&&n.push(e[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),a=0;a<n.length;a++)X(n[a])}};var cn,ln=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';I(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),hn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),fn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return cn||(cn=new t),cn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=i.__values(Object.keys(this.repos_)),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,i.__values(Object.keys(this.repos_[s]))),c=u.next();!c.done;c=u.next())this.repos_[s][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=i.__values(Object.keys(this.repos_)),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,i.__values(Object.keys(this.repos_[s]))),c=u.next();!c.done;c=u.next())this.repos_[s][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.databaseFromApp=function(t,e,n){var r=n||t.options.databaseURL;void 0===r&&(t.options.projectId||T("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",t.options.projectId),r=t.options.projectId+"-default-rtdb.firebaseio.com");var i,a=et(r),s=a.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(i=!0,s=(a=et(r="http://"+u+"?ns="+s.namespace)).repoInfo):i=!a.repoInfo.secure;var c=o.CONSTANTS.NODE_ADMIN&&i?new hn:new ln(t,e);return gt("Invalid Firebase Database URL",1,a),a.path.isEmpty()||T("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(s,t,c).database},t.prototype.deleteRepo=function(t){var e=o.safeGet(this.repos_,t.app.name);e&&o.safeGet(e,t.repoInfo_.toURLString())===t||T("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e,n){var r=o.safeGet(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=o.safeGet(r,t.toURLString());return i&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new tn(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),dn=function(){function t(t){this.repo_=t,t instanceof tn||T("Don't call new Database() directly - please use firebase.database()."),this.root_=new on(t,J.Empty),this.INTERNAL=new pn(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),o.validateArgCount("database.ref",0,1,arguments.length),t instanceof on?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),o.validateArgCount(e,1,1,arguments.length);var n=et(t);gt(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&T(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&T("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){o.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){o.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),pn=function(){function t(t){this.database=t}return t.prototype.delete=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.database.checkDeleted_("delete"),fn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),vn=Object.freeze({__proto__:null,forceLongPolling:function(){Ke.forceDisallow(),ze.forceAllow()},forceWebSockets:function(){ze.forceDisallow()},isWebSocketsAvailable:function(){return Ke.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),yn=Je;Je.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Je.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var gn=Object.freeze({__proto__:null,DataConnection:yn,RealTimeConnection:Xe,hijackHash:function(t){var e=Je.prototype.put;return Je.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Je.prototype.put=e}},ConnectionTarget:tt,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){fn.getInstance().forceRestClient(t)}}),mn=dn.ServerValue;function _n(e){Qe=e.SDK_VERSION;var n=e.INTERNAL.registerComponent(new s.Component("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return fn.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:on,Query:Jt,Database:dn,DataSnapshot:Gt,enableLogging:E,INTERNAL:vn,ServerValue:mn,TEST_ACCESS:gn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.6.12"),o.isNodeSdk()&&(t.exports=n)}_n(l.default),e.DataSnapshot=Gt,e.Database=dn,e.OnDisconnect=_t,e.Query=Jt,e.Reference=on,e.ServerValue=mn,e.enableLogging=E,e.registerDatabase=_n},"S+S0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mAIw"),i=n("zVF4"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(l){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=r.__read(o.value,2),s=a[1],u=this.normalizeInstanceIdentifier(a[0]);try{var c=this.getOrInitializeService(u);s.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(r.__spread(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),s=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=s,e.Provider=a},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),a=n("kJWO"),s=n("I55L"),u=n("c2HN"),c=n("XoHu"),l=function(t){if(t&&"function"==typeof t[a.a])return l=t,function(t){var e=l[a.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(s.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,i.a),t};if(t&&"function"==typeof t[o.a])return e=t,function(t){for(var n=e[o.a]();;){var r=void 0;try{r=n.next()}catch(i){return t.error(i),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,l,h=Object(c.a)(t)?"an invalid object":"'".concat(t,"'");throw new TypeError("You provided ".concat(h," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},"T/S4":function(t,e,n){"use strict";n.d(e,"a",(function(){return F}));var o=n("Wcq6"),a=n("fXoL"),u=n("D0XW"),l=n("HDdC"),h=n("Cfvw"),f=n("LRne"),d=n("lJxs"),p=n("Kqap"),v=n("pLZG"),y=n("pxpQ"),g=n("spgP"),m=n("ofXK"),_=n("wj3C"),b=n.n(_),w=n("6Joi");function E(t,e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.a;return new l.a((function(n){var r;return null!=e?e.schedule((function(){r=t.onSnapshot(n)})):r=t.onSnapshot(n),function(){null!=r&&r()}}))}(t,e)}function C(t,e){return E(t,e).pipe(Object(d.a)((function(t){return{payload:t,type:"query"}})))}function k(t,e){return C(t,e).pipe(Object(d.a)((function(t){return t.payload.docChanges().map((function(t){return{type:t.type,payload:t}}))})))}function S(t,e,n){return C(t,n).pipe(Object(d.a)((function(t){return t.payload.docChanges()})),Object(p.a)((function(t,n){return function(t,e,n){return e.forEach((function(e){n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))})),t}(t,n,e)}),[]),Object(d.a)((function(t){return t.map((function(t){return{type:t.type,payload:t}}))})))}function T(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}var I=function(){function t(e,n,r){s(this,t),this.ref=e,this.query=n,this.afs=r}return c(t,[{key:"stateChanges",value:function(t){return t&&0!==t.length?k(this.query,this.afs.schedulers.outsideAngular).pipe(Object(d.a)((function(e){return e.filter((function(e){return t.indexOf(e.type)>-1}))})),Object(v.a)((function(t){return t.length>0})),this.afs.keepUnstableUntilFirst):k(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe(Object(p.a)((function(t,e){return[].concat(i(t),i(e))}),[]))}},{key:"snapshotChanges",value:function(t){var e=T(t);return S(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return C(this.query,this.afs.schedulers.outsideAngular).pipe(Object(d.a)((function(e){return e.payload.docs.map((function(e){return t.idField?Object.assign(Object.assign({},e.data()),r({},t.idField,e.id)):e.data()}))})),this.afs.keepUnstableUntilFirst)}},{key:"get",value:function(t){return Object(h.a)(this.query.get(t)).pipe(Object(y.a)(this.afs.schedulers.insideAngular))}},{key:"add",value:function(t){return this.ref.add(t)}},{key:"doc",value:function(t){return new O(this.ref.doc(t),this.afs)}}]),t}(),O=function(){function t(e,n){s(this,t),this.ref=e,this.afs=n}return c(t,[{key:"set",value:function(t,e){return this.ref.set(t,e)}},{key:"update",value:function(t){return this.ref.update(t)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(t,e){var n=D(this.ref.collection(t),e),r=n.ref,i=n.query;return new I(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return E(this.ref,this.afs.schedulers.outsideAngular).pipe(Object(d.a)((function(t){return{payload:t,type:"value"}}))).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){return this.snapshotChanges().pipe(Object(d.a)((function(t){return t.payload.data()})))}},{key:"get",value:function(t){return Object(h.a)(this.ref.get(t)).pipe(Object(y.a)(this.afs.schedulers.insideAngular))}}]),t}(),A=function(){function t(e,n){s(this,t),this.query=e,this.afs=n}return c(t,[{key:"stateChanges",value:function(t){return t&&0!==t.length?k(this.query,this.afs.schedulers.outsideAngular).pipe(Object(d.a)((function(e){return e.filter((function(e){return t.indexOf(e.type)>-1}))})),Object(v.a)((function(t){return t.length>0})),this.afs.keepUnstableUntilFirst):k(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"auditTrail",value:function(t){return this.stateChanges(t).pipe(Object(p.a)((function(t,e){return[].concat(i(t),i(e))}),[]))}},{key:"snapshotChanges",value:function(t){var e=T(t);return S(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}},{key:"valueChanges",value:function(){return C(this.query,this.afs.schedulers.outsideAngular).pipe(Object(d.a)((function(t){return t.payload.docs.map((function(t){return t.data()}))})),this.afs.keepUnstableUntilFirst)}},{key:"get",value:function(t){return Object(h.a)(this.query.get(t)).pipe(Object(y.a)(this.afs.schedulers.insideAngular))}}]),t}(),x=new a.q("angularfire2.enableFirestorePersistence"),N=new a.q("angularfire2.firestore.persistenceSettings"),P=new a.q("angularfire2.firestore.settings");function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};return{query:e(t),ref:t}}var R,L,j=((L=function(){function t(e,n,r,i,o,a,u){var c=this;s(this,t),this.schedulers=new g.d(a),this.keepUnstableUntilFirst=Object(g.f)(this.schedulers),this.firestore=a.runOutsideAngular((function(){var t=Object(g.e)(e,a,n);w.registerFirestore&&Object(w.registerFirestore)(b.a);var r=t.firestore();return i&&r.settings(i),r})),this.persistenceEnabled$=r&&!Object(m.n)(o)?a.runOutsideAngular((function(){try{return Object(h.a)(c.firestore.enablePersistence(u||void 0).then((function(){return!0}),(function(){return!1})))}catch(t){return Object(f.a)(!1)}})):Object(f.a)(!1)}return c(t,[{key:"collection",value:function(t,e){var n=D("string"==typeof t?this.firestore.collection(t):t,e),r=n.ref,i=n.query,o=this.schedulers.ngZone.run((function(){return r}));return new I(o,i,this)}},{key:"collectionGroup",value:function(t,e){var n=e||function(t){return t},r=this.firestore.collectionGroup(t);return new A(n(r),this)}},{key:"doc",value:function(t){var e;e="string"==typeof t?this.firestore.doc(t):t;var n=this.schedulers.ngZone.run((function(){return e}));return new O(n,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),t}()).\u0275fac=function(t){return new(t||L)(a.Pb(g.c),a.Pb(g.b,8),a.Pb(x,8),a.Pb(P,8),a.Pb(a.B),a.Pb(a.z),a.Pb(N,8))},L.\u0275prov=Object(a.Eb)({factory:function(){return new L(Object(a.Pb)(g.c),Object(a.Pb)(g.b,8),Object(a.Pb)(x,8),Object(a.Pb)(P,8),Object(a.Pb)(a.B),Object(a.Pb)(a.z),Object(a.Pb)(N,8))},token:L,providedIn:"any"}),L),F=((R=function(){function t(e){s(this,t),this.firestore=e}return c(t,[{key:"createRegistration",value:function(t){return this.firestore.collection("registrations").add(t)}},{key:"getRegistration",value:function(t){return this.firestore.collection("registrations",(function(e){return e.where("email","==",t)})).snapshotChanges()}},{key:"createComment",value:function(t){return this.firestore.collection("comments").add(t)}},{key:"getComments",value:function(){return this.firestore.collection("comments",(function(t){return t.orderBy("date","asc")})).snapshotChanges()}},{key:"updateComment",value:function(t){return this.firestore.doc("comments/"+t.id).update({replies:o.firestore.FieldValue.arrayUnion({name:t.replies[0].name,date:t.replies[0].date,comment:t.replies[0].comment})})}},{key:"deleteComment",value:function(t){return this.firestore.doc("comments/"+t).delete()}},{key:"getLamborghiniCars",value:function(){return this.firestore.collection("lamborghiniCars",(function(t){return t.orderBy("carPrice","asc")})).snapshotChanges()}},{key:"getPorscheCars",value:function(){return this.firestore.collection("porscheCars",(function(t){return t.orderBy("carPrice","asc")})).snapshotChanges()}}]),t}()).\u0275fac=function(t){return new(t||R)(a.Pb(j))},R.\u0275prov=a.Eb({token:R,factory:R.\u0275fac,providedIn:"root"}),R)},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),a=n("yCtX");function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var s=Number.POSITIVE_INFINITY,u=null,c=e[e.length-1];return Object(i.a)(c)?(u=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(s=e.pop())):"number"==typeof c&&(s=e.pop()),null===u&&1===e.length&&e[0]instanceof r.a?e[0]:Object(o.a)(s)(Object(a.a)(e,u))}},Wcq6:function(t,e,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r:{default:r};i.default.registerVersion("firebase","7.20.0","app"),t.exports=i.default},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return v})),n.d(e,"a",(function(){return y}));var r,i=n("HDdC"),o=n("7o/Q"),a=n("quSY"),u=n("9ppp"),f=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this)).subject=t,i.subscriber=r,i.closed=!1,i}return c(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}}}]),n}(a.a),p=n("2QA8"),v=function(t){h(n,t);var e=d(n);function n(t){var r;return s(this,n),(r=e.call(this,t)).destination=t,r}return n}(o.a),y=((r=function(t){h(n,t);var e=d(n);function n(){var t;return s(this,n),(t=e.call(this)).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return c(n,[{key:p.a,value:function(){return new v(this)}},{key:"lift",value:function(t){var e=new m(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new u.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)}},{key:"error",value:function(t){if(this.closed)throw new u.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new u.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new u.a;return l(g(n.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new u.a;return this.hasError?(t.error(this.thrownError),a.a.EMPTY):this.isStopped?(t.complete(),a.a.EMPTY):(this.observers.push(t),new f(this,t))}},{key:"asObservable",value:function(){var t=new i.a;return t.source=this,t}}]),n}(i.a)).create=function(t,e){return new m(t,e)},r),m=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this)).destination=t,i.source=r,i}return c(n,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):a.a.EMPTY}}]),n}(y)},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},ZUHj:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=function(t){h(n,t);var e=d(n);function n(t,r,i){var o;return s(this,n),(o=e.call(this)).parent=t,o.outerValue=r,o.outerIndex=i,o.index=0,o}return c(n,[{key:"_next",value:function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}},{key:"_error",value:function(t){this.parent.notifyError(t,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(n("7o/Q").a),i=n("SeVD"),o=n("HDdC");function a(t,e,n,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new r(t,n,a);if(!s.closed)return e instanceof o.a?e.subscribe(s):Object(i.a)(e)(s)}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return Object(r.a)(i.a,t)}},bOdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("5+tZ");function i(t,e){return Object(r.a)(t,e,1)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},eIep:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function a(t,e){return"function"==typeof e?function(n){return n.pipe(a((function(n,o){return Object(i.a)(t(n,o)).pipe(Object(r.a)((function(t,r){return e(n,t,o,r)})))})))}:function(e){return e.lift(new u(t))}}var u=function(){function t(e){s(this,t),this.project=e}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new f(t,this.project))}}]),t}(),f=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,t)).project=r,i.index=0,i}return c(n,[{key:"_next",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=this.innerSubscription;e&&e.unsubscribe();var n=new o.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(o.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var t=this.innerSubscription;t&&!t.closed||l(g(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&l(g(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t){this.destination.next(t)}}]),n}(o.b)},fXoL:function(r,o,a){"use strict";a.d(o,"a",(function(){return So})),a.d(o,"b",(function(){return zs})),a.d(o,"c",(function(){return Us})),a.d(o,"d",(function(){return Fs})),a.d(o,"e",(function(){return Ms})),a.d(o,"f",(function(){return Du})),a.d(o,"g",(function(){return Cu})),a.d(o,"h",(function(){return ao})),a.d(o,"i",(function(){return eu})),a.d(o,"j",(function(){return ka})),a.d(o,"k",(function(){return Gs})),a.d(o,"l",(function(){return Sa})),a.d(o,"m",(function(){return An})),a.d(o,"n",(function(){return ws})),a.d(o,"o",(function(){return it})),a.d(o,"p",(function(){return w})),a.d(o,"q",(function(){return rt})),a.d(o,"r",(function(){return ko})),a.d(o,"s",(function(){return za})),a.d(o,"t",(function(){return Wa})),a.d(o,"u",(function(){return Qs})),a.d(o,"v",(function(){return gt})),a.d(o,"w",(function(){return Su})),a.d(o,"x",(function(){return yt})),a.d(o,"y",(function(){return mu})),a.d(o,"z",(function(){return iu})),a.d(o,"A",(function(){return E})),a.d(o,"B",(function(){return Bs})),a.d(o,"C",(function(){return Hs})),a.d(o,"D",(function(){return Aa})),a.d(o,"E",(function(){return Ia})),a.d(o,"F",(function(){return Oa})),a.d(o,"G",(function(){return Na})),a.d(o,"H",(function(){return gr})),a.d(o,"I",(function(){return k})),a.d(o,"J",(function(){return Ou})),a.d(o,"K",(function(){return Ya})),a.d(o,"L",(function(){return fu})),a.d(o,"M",(function(){return uo})),a.d(o,"N",(function(){return Da})),a.d(o,"O",(function(){return Pa})),a.d(o,"P",(function(){return Za})),a.d(o,"Q",(function(){return St})),a.d(o,"R",(function(){return _u})),a.d(o,"S",(function(){return Gn})),a.d(o,"T",(function(){return q})),a.d(o,"U",(function(){return Qn})),a.d(o,"V",(function(){return Nu})),a.d(o,"W",(function(){return pu})),a.d(o,"X",(function(){return Ws})),a.d(o,"Y",(function(){return co})),a.d(o,"Z",(function(){return ds})),a.d(o,"ab",(function(){return vr})),a.d(o,"bb",(function(){return Jn})),a.d(o,"cb",(function(){return Fn})),a.d(o,"db",(function(){return Un})),a.d(o,"eb",(function(){return Bn})),a.d(o,"fb",(function(){return qn})),a.d(o,"gb",(function(){return Vn})),a.d(o,"hb",(function(){return Hn})),a.d(o,"ib",(function(){return cs})),a.d(o,"jb",(function(){return xu})),a.d(o,"kb",(function(){return ls})),a.d(o,"lb",(function(){return hs})),a.d(o,"mb",(function(){return Mn})),a.d(o,"nb",(function(){return Y})),a.d(o,"ob",(function(){return xo})),a.d(o,"pb",(function(){return Wo})),a.d(o,"qb",(function(){return zo})),a.d(o,"rb",(function(){return us})),a.d(o,"sb",(function(){return ee})),a.d(o,"tb",(function(){return M})),a.d(o,"ub",(function(){return jn})),a.d(o,"vb",(function(){return ca})),a.d(o,"wb",(function(){return Yt})),a.d(o,"xb",(function(){return wa})),a.d(o,"yb",(function(){return Fr})),a.d(o,"zb",(function(){return Ro})),a.d(o,"Ab",(function(){return $o})),a.d(o,"Bb",(function(){return Ds})),a.d(o,"Cb",(function(){return At})),a.d(o,"Db",(function(){return jt})),a.d(o,"Eb",(function(){return O})),a.d(o,"Fb",(function(){return A})),a.d(o,"Gb",(function(){return Dt})),a.d(o,"Hb",(function(){return Ft})),a.d(o,"Ib",(function(){return jo})),a.d(o,"Jb",(function(){return Ho})),a.d(o,"Kb",(function(){return qo})),a.d(o,"Lb",(function(){return Vo})),a.d(o,"Mb",(function(){return Bo})),a.d(o,"Nb",(function(){return Sn})),a.d(o,"Ob",(function(){return sa})),a.d(o,"Pb",(function(){return ft})),a.d(o,"Qb",(function(){return Fo})),a.d(o,"Rb",(function(){return js})),a.d(o,"Sb",(function(){return Qo})),a.d(o,"Tb",(function(){return Rs})),a.d(o,"Ub",(function(){return Yo})),a.d(o,"Vb",(function(){return _s})),a.d(o,"Wb",(function(){return bs})),a.d(o,"Xb",(function(){return Mo})),a.d(o,"Yb",(function(){return ms})),a.d(o,"Zb",(function(){return Ps})),a.d(o,"ac",(function(){return _e})),a.d(o,"bc",(function(){return mr})),a.d(o,"cc",(function(){return Rt})),a.d(o,"dc",(function(){return Lo})),a.d(o,"ec",(function(){return ia})),a.d(o,"fc",(function(){return oa})),a.d(o,"gc",(function(){return aa}));var u=a("XNiG"),f=a("quSY"),p=a("HDdC"),y=a("VRyK"),m=a("w1tV");function _(t){return{toString:t}.toString()}function b(t,e,r){return _((function(){var i=function(t){return function(){if(t){var e=t.apply(void 0,arguments);for(var n in e)this[n]=e[n]}}}(e);function o(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(this instanceof o)return i.apply(this,e),this;var a=n(o,e);return s.annotation=a,s;function s(t,e,n){for(var r=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),t}}return r&&(o.prototype=Object.create(r.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o}))}var w=b("Inject",(function(t){return{token:t}})),E=b("Optional"),C=b("Self"),k=b("SkipSelf"),S=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function T(t){for(var e in t)if(t[e]===T)return e;throw Error("Could not find renamed property on target object.")}function I(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function A(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function x(t){return N(t,t[D])||N(t,t[j])}function N(t,e){return e&&e.token===t?e:null}function P(t){return t&&(t.hasOwnProperty(R)||t.hasOwnProperty(F))?t[R]:null}var D=T({"\u0275prov":T}),R=T({"\u0275inj":T}),L=T({"\u0275provFallback":T}),j=T({ngInjectableDef:T}),F=T({ngInjectorDef:T});function M(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(M).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function U(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}var V=T({__forward_ref__:T});function q(t){return t.__forward_ref__=q,t.toString=function(){return M(this())},t}function H(t){return B(t)?t():t}function B(t){return"function"==typeof t&&t.hasOwnProperty(V)&&t.__forward_ref__===q}var z,W="undefined"!=typeof globalThis&&globalThis,Q="undefined"!=typeof window&&window,G="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,K="undefined"!=typeof global&&global,Y=W||K||Q||G,X=T({"\u0275cmp":T}),Z=T({"\u0275dir":T}),J=T({"\u0275pipe":T}),$=T({"\u0275mod":T}),tt=T({"\u0275loc":T}),et=T({"\u0275fac":T}),nt=T({__NG_ELEMENT_ID__:T}),rt=function(){function t(e,n){s(this,t),this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=O({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return c(t,[{key:"toString",value:function(){return"InjectionToken "+this._desc}}]),t}(),it=new rt("INJECTOR",-1),ot={},at=/\n/gm,st=T({provide:String,useValue:T}),ut=void 0;function ct(t){var e=ut;return ut=t,e}function lt(t){var e=z;return z=t,e}function ht(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.Default;if(void 0===ut)throw new Error("inject() must be called from an injection context");return null===ut?dt(t,void 0,e):ut.get(t,e&S.Optional?null:void 0,e)}function ft(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.Default;return(z||ht)(H(t),e)}function dt(t,e,n){var r=x(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&S.Optional)return null;if(void 0!==e)return e;throw new Error("Injector: NOT_FOUND [".concat(M(t),"]"))}function pt(t){for(var e=[],n=0;n<t.length;n++){var r=H(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=S.Default,a=0;a<r.length;a++){var s=r[a];s instanceof E||"Optional"===s.ngMetadataName||s===E?o|=S.Optional:s instanceof k||"SkipSelf"===s.ngMetadataName||s===k?o|=S.SkipSelf:s instanceof C||"Self"===s.ngMetadataName||s===C?o|=S.Self:i=s instanceof w||s===w?s.token:s}e.push(ft(i,o))}else e.push(ft(r))}return e}var vt=function(){function t(){s(this,t)}return c(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ot;if(e===ot){var n=new Error("NullInjectorError: No provider for ".concat(M(t),"!"));throw n.name="NullInjectorError",n}return e}}]),t}(),yt=function t(){s(this,t)},gt=function t(){s(this,t)};function mt(t,e){t.forEach((function(t){return Array.isArray(t)?mt(t,e):e(t)}))}function _t(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function bt(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function wt(t,e){var n=Et(t,e);if(n>=0)return t[1|n]}function Et(t,e){return function(t,e,n){for(var r=0,i=t.length>>1;i!==r;){var o=r+(i-r>>1),a=t[o<<1];if(e===a)return o<<1;a>e?i=o:r=o+1}return~(i<<1)}(t,e)}var Ct,kt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),St=((Ct={})[Ct.Emulated=0]="Emulated",Ct[Ct.Native=1]="Native",Ct[Ct.None=2]="None",Ct[Ct.ShadowDom=3]="ShadowDom",Ct),Tt={},It=[],Ot=0;function At(t){return _((function(){var e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===kt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||It,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||St.Emulated,id:"c",styles:t.styles||It,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Ot++,n.inputs=Lt(t.inputs,e),n.outputs=Lt(t.outputs),i&&i.forEach((function(t){return t(n)})),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(xt)}:null,n.pipeDefs=o?function(){return("function"==typeof o?o():o).map(Nt)}:null,n}))}function xt(t){return Mt(t)||function(t){return t[Z]||null}(t)}function Nt(t){return function(t){return t[J]||null}(t)}var Pt={};function Dt(t){var e={type:t.type,bootstrap:t.bootstrap||It,declarations:t.declarations||It,imports:t.imports||It,exports:t.exports||It,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&_((function(){Pt[t.id]=t.type})),e}function Rt(t,e){return _((function(){var n=Vt(t,!0);n.declarations=e.declarations||It,n.imports=e.imports||It,n.exports=e.exports||It}))}function Lt(t,e){if(null==t)return Tt;var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}var jt=At;function Ft(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Mt(t){return t[X]||null}function Ut(t,e){return t.hasOwnProperty(et)?t[et]:null}function Vt(t,e){var n=t[$]||null;if(!n&&!0===e)throw new Error("Type ".concat(M(t)," does not have '\u0275mod' property."));return n}function qt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Ht(t){return Array.isArray(t)&&!0===t[1]}function Bt(t){return 0!=(8&t.flags)}function zt(t){return 2==(2&t.flags)}function Wt(t){return 1==(1&t.flags)}function Qt(t){return null!==t.template}function Gt(t){return 0!=(512&t[2])}var Kt=function(){function t(e,n,r){s(this,t),this.previousValue=e,this.currentValue=n,this.firstChange=r}return c(t,[{key:"isFirstChange",value:function(){return this.firstChange}}]),t}();function Yt(){return Xt}function Xt(t){return t.type.prototype.ngOnChanges&&(t.setInput=Jt),Zt}function Zt(){var t=$t(this),e=null==t?void 0:t.current;if(e){var n=t.previous;if(n===Tt)t.previous=e;else for(var r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Jt(t,e,n,r){var i=$t(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Tt,current:null}),o=i.current||(i.current={}),a=i.previous,s=this.declaredInputs[n],u=a[s];o[s]=new Kt(u&&u.currentValue,e,a===Tt),t[r]=e}function $t(t){return t.__ngSimpleChanges__||null}Yt.ngInherit=!0;var te=void 0;function ee(t){te=t}function ne(t){return!!t.listen}var re={createRenderer:function(t,e){return void 0!==te?te:"undefined"!=typeof document?document:void 0}};function ie(t){for(;Array.isArray(t);)t=t[0];return t}function oe(t,e){return ie(e[t+20])}function ae(t,e){return ie(e[t.index])}function se(t,e){return t.data[e+20]}function ue(t,e){var n=e[t];return qt(n)?n:n[0]}function ce(t){var e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function le(t){return 4==(4&t[2])}function he(t){return 128==(128&t[2])}function fe(t,e){return null===t||null==e?null:t[e]}function de(t){t[18]=0}function pe(t,e){t[5]+=e;for(var n=t,r=t[3];null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}var ve={lFrame:Re(null),bindingsEnabled:!0,checkNoChangesMode:!1};function ye(){return ve.bindingsEnabled}function ge(){return ve.lFrame.lView}function me(){return ve.lFrame.tView}function _e(t){ve.lFrame.contextLView=t}function be(){return ve.lFrame.previousOrParentTNode}function we(t,e){ve.lFrame.previousOrParentTNode=t,ve.lFrame.isParent=e}function Ee(){return ve.lFrame.isParent}function Ce(){return ve.checkNoChangesMode}function ke(t){ve.checkNoChangesMode=t}function Se(){var t=ve.lFrame,e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Te(){return ve.lFrame.bindingIndex++}function Ie(t,e){var n=ve.lFrame;n.bindingIndex=n.bindingRootIndex=t,Oe(e)}function Oe(t){ve.lFrame.currentDirectiveIndex=t}function Ae(){return ve.lFrame.currentQueryIndex}function xe(t){ve.lFrame.currentQueryIndex=t}function Ne(t,e){var n=De();ve.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function Pe(t,e){var n=De(),r=t[1];ve.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function De(){var t=ve.lFrame,e=null===t?null:t.child;return null===e?Re(t):e}function Re(t){var e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function Le(){var t=ve.lFrame;return ve.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}var je=Le;function Fe(){var t=Le();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Me(){return ve.lFrame.selectedIndex}function Ue(t){ve.lFrame.selectedIndex=t}function Ve(){var t=ve.lFrame;return se(t.tView,t.selectedIndex)}function qe(t,e){for(var n=e.directiveStart,r=e.directiveEnd;n<r;n++){var i=t.data[n].type.prototype,o=i.ngAfterContentInit,a=i.ngAfterContentChecked,s=i.ngAfterViewInit,u=i.ngAfterViewChecked,c=i.ngOnDestroy;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=c&&(t.destroyHooks||(t.destroyHooks=[])).push(n,c)}}function He(t,e,n){We(t,e,3,n)}function Be(t,e,n,r){(3&t[2])===n&&We(t,e,n,r)}function ze(t,e){var n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function We(t,e,n,r){for(var i=null!=r?r:-1,o=0,a=void 0!==r?65535&t[18]:0;a<e.length;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(Qe(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Qe(t,e,n,r){var i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(a)):o.call(a)}var Ge=function t(e,n,r){s(this,t),this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function Ke(t,e,n){for(var r=ne(t),i=0;i<n.length;){var o=n[i];if("number"==typeof o){if(0!==o)break;i++;var a=n[i++],s=n[i++],u=n[i++];r?t.setAttribute(e,s,u,a):e.setAttributeNS(a,s,u)}else{var c=o,l=n[++i];Xe(c)?r&&t.setProperty(e,c,l):r?t.setAttribute(e,c,l):e.setAttribute(c,l),i++}}return i}function Ye(t){return 3===t||4===t||6===t}function Xe(t){return 64===t.charCodeAt(0)}function Ze(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else for(var n=-1,r=0;r<e.length;r++){var i=e[r];"number"==typeof i?n=i:0===n||Je(t,n,i,null,-1===n||2===n?e[++r]:null)}return t}function Je(t,e,n,r,i){var o=0,a=t.length;if(-1===e)a=-1;else for(;o<t.length;){var s=t[o++];if("number"==typeof s){if(s===e){a=-1;break}if(s>e){a=o-1;break}}}for(;o<t.length;){var u=t[o];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function $e(t){return-1!==t}function tn(t){return 32767&t}function en(t){return t>>16}function nn(t,e){for(var n=en(t),r=e;n>0;)r=r[15],n--;return r}function rn(t){return"string"==typeof t?t:null==t?"":""+t}function on(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():rn(t)}var an=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Y);function sn(t){return t instanceof Function?t():t}var un=!0;function cn(t){var e=un;return un=t,e}var ln=0;function hn(t,e){var n=dn(t,e);if(-1!==n)return n;var r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,fn(r.data,t),fn(e,null),fn(r.blueprint,null));var i=pn(t,e),o=t.injectorIndex;if($e(i))for(var a=tn(i),s=nn(i,e),u=s[1].data,c=0;c<8;c++)e[o+c]=s[a+c]|u[a+c];return e[o+8]=i,o}function fn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function dn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function pn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;for(var n=e[6],r=1;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function vn(t,e,n){!function(t,e,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(nt)&&(r=n[nt]),null==r&&(r=n[nt]=ln++);var i=255&r,o=1<<i,a=64&i,s=32&i,u=e.data;128&i?a?s?u[t+7]|=o:u[t+6]|=o:s?u[t+5]|=o:u[t+4]|=o:a?s?u[t+3]|=o:u[t+2]|=o:s?u[t+1]|=o:u[t]|=o}(t,e,n)}function yn(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==t){var o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;var e=t.hasOwnProperty(nt)?t[nt]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof o){Ne(e,t);try{var a=o();if(null!=a||r&S.Optional)return a;throw new Error("No provider for ".concat(on(n),"!"))}finally{je()}}else if("number"==typeof o){if(-1===o)return new Cn(t,e);var s=null,u=dn(t,e),c=-1,l=r&S.Host?e[16][6]:null;for((-1===u||r&S.SkipSelf)&&(c=-1===u?pn(t,e):e[u+8],En(r,!1)?(s=e[1],u=tn(c),e=nn(c,e)):u=-1);-1!==u;){c=e[u+8];var h=e[1];if(wn(o,u,h.data)){var f=mn(u,e,n,s,r,l);if(f!==gn)return f}En(r,e[1].data[u+8]===l)&&wn(o,u,e)?(s=h,u=tn(c),e=nn(c,e)):u=-1}}}if(r&S.Optional&&void 0===i&&(i=null),0==(r&(S.Self|S.Host))){var d=e[9],p=lt(void 0);try{return d?d.get(n,i,r&S.Optional):dt(n,i,r&S.Optional)}finally{lt(p)}}if(r&S.Optional)return i;throw new Error("NodeInjector: NOT_FOUND [".concat(on(n),"]"))}var gn={};function mn(t,e,n,r,i,o){var a=e[1],s=a.data[t+8],u=_n(s,a,n,null==r?zt(s)&&un:r!=a&&3===s.type,i&S.Host&&o===s);return null!==u?bn(e,a,u,s):gn}function _n(t,e,n,r,i){for(var o=t.providerIndexes,a=e.data,s=1048575&o,u=t.directiveStart,c=o>>20,l=i?s+c:t.directiveEnd,h=r?s:s+c;h<l;h++){var f=a[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(i){var d=a[u];if(d&&Qt(d)&&d.type===n)return u}return null}function bn(t,e,n,r){var i=t[n],o=e.data;if(i instanceof Ge){var a=i;if(a.resolving)throw new Error("Circular dep for "+on(o[n]));var s,u=cn(a.canSeeViewProviders);a.resolving=!0,a.injectImpl&&(s=lt(a.injectImpl)),Ne(t,r);try{i=t[n]=a.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){var r=e.type.prototype,i=r.ngOnChanges,o=r.ngOnInit,a=r.ngDoCheck;if(i){var s=Xt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,o),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,a))}(n,o[n],e)}finally{a.injectImpl&&lt(s),cn(u),a.resolving=!1,je()}}return i}function wn(t,e,n){var r=64&t,i=32&t;return!!((128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e])&1<<t)}function En(t,e){return!(t&S.Self||t&S.Host&&e)}var Cn=function(){function t(e,n){s(this,t),this._tNode=e,this._lView=n}return c(t,[{key:"get",value:function(t,e){return yn(this._tNode,this._lView,t,void 0,e)}}]),t}();function kn(t){var e=t;if(B(t))return function(){var t=kn(H(e));return t?t():null};var n=Ut(e);if(null===n){var r=P(e);n=r&&r.factory}return n||null}function Sn(t){return _((function(){for(var e=t.prototype.constructor,n=e[et]||kn(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;i&&i!==r;){var o=i[et]||kn(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return function(t){return new t}}))}function Tn(t){return t.ngDebugContext}function In(t){return t.ngOriginalError}function On(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t.error.apply(t,n)}var An=function(){function t(){s(this,t),this._console=console}return c(t,[{key:"handleError",value:function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||On}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(t){return t?Tn(t)?Tn(t):this._findContext(In(t)):null}},{key:"_findOriginalError",value:function(t){for(var e=In(t);e&&In(e);)e=In(e);return e}}]),t}(),xn=function(){function t(e){s(this,t),this.changingThisBreaksApplicationSecurity=e}return c(t,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}]),t}(),Nn=function(t){h(n,t);var e=d(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(xn),Pn=function(t){h(n,t);var e=d(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(xn),Dn=function(t){h(n,t);var e=d(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(xn),Rn=function(t){h(n,t);var e=d(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(xn),Ln=function(t){h(n,t);var e=d(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(xn);function jn(t){return t instanceof xn?t.changingThisBreaksApplicationSecurity:t}function Fn(t,e){var n=Mn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error("Required a safe ".concat(e,", got a ").concat(n," (see http://g.co/ng/security#xss)"))}return n===e}function Mn(t){return t instanceof xn&&t.getTypeName()||null}function Un(t){return new Nn(t)}function Vn(t){return new Pn(t)}function qn(t){return new Dn(t)}function Hn(t){return new Rn(t)}function Bn(t){return new Ln(t)}var zn=!0,Wn=!1;function Qn(){return Wn=!0,zn}function Gn(){if(Wn)throw new Error("Cannot enable prod mode after platform setup.");zn=!1}var Kn=function(){function t(){s(this,t)}return c(t,[{key:"getInertBodyElement",value:function(t){t="<body><remove></remove>"+t;try{var e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(n){return null}}}]),t}(),Yn=function(){function t(e){if(s(this,t),this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return c(t,[{key:"getInertBodyElement",value:function(t){var e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;var n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(t){for(var e=t.attributes,n=e.length-1;0<n;n--){var r=e.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||t.removeAttribute(r)}for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),t}(),Xn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Zn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Jn(t){return(t=String(t)).match(Xn)||t.match(Zn)?t:(Qn()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(t," (see http://g.co/ng/security#xss)")),"unsafe:"+t)}function $n(t){var n,r={},i=e(t.split(","));try{for(i.s();!(n=i.n()).done;){r[n.value]=!0}}catch(o){i.e(o)}finally{i.f()}return r}function tr(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)a.hasOwnProperty(s)&&(t[s]=!0)}return t}var er,nr=$n("area,br,col,hr,img,wbr"),rr=$n("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ir=$n("rp,rt"),or=tr(ir,rr),ar=tr(nr,tr(rr,$n("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tr(ir,$n("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),or),sr=$n("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ur=$n("srcset"),cr=tr(sr,ur,$n("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$n("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),lr=$n("script,style,template"),hr=function(){function t(){s(this,t),this.sanitizedSomething=!1,this.buf=[]}return c(t,[{key:"sanitizeChildren",value:function(t){for(var e=t.firstChild,n=!0;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);var r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(t){var e=t.nodeName.toLowerCase();if(!ar.hasOwnProperty(e))return this.sanitizedSomething=!0,!lr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);for(var n,r=t.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(cr.hasOwnProperty(s)){var u=o.value;sr[s]&&(u=Jn(u)),ur[s]&&(n=u,u=(n=String(n)).split(",").map((function(t){return Jn(t.trim())})).join(", ")),this.buf.push(" ",a,'="',pr(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(t){var e=t.nodeName.toLowerCase();ar.hasOwnProperty(e)&&!nr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}},{key:"chars",value:function(t){this.buf.push(pr(t))}},{key:"checkClobberedElement",value:function(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}]),t}(),fr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dr=/([^\#-~ |!])/g;function pr(t){return t.replace(/&/g,"&amp;").replace(fr,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(dr,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function vr(t,e){var n=null;try{er=er||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Kn:new Yn(t)}(t);var r=e?String(e):"";n=er.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=er.getInertBodyElement(r)}while(r!==o);var a=new hr,s=a.sanitizeChildren(yr(n)||n);return Qn()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var u=yr(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}function yr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var gr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function mr(t){var e,n=(e=ge())&&e[12];return n?n.sanitize(gr.URL,t)||"":Fn(t,"URL")?jn(t):Jn(rn(t))}function _r(t,e){t.__ngContext__=e}function br(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function wr(){throw new Error("Cannot mix multi providers and regular providers")}function Er(t,e,n){for(var r=t.length;;){var i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){var o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Cr(t,e,n){for(var r=0;r<t.length;){var i=t[r++];if(n&&"class"===i){if(-1!==Er((i=t[r]).toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function kr(t){return 0===t.type&&"ng-template"!==t.tagName}function Sr(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function Tr(t,e,n){for(var r=4,i=t.attrs||[],o=function(t){for(var e=0;e<t.length;e++)if(Ye(t[e]))return e;return t.length}(i),a=!1,s=0;s<e.length;s++){var u=e[s];if("number"!=typeof u){if(!a)if(4&r){if(r=2|1&r,""!==u&&!Sr(t,u,n)||""===u&&1===e.length){if(Ir(r))return!1;a=!0}}else{var c=8&r?u:e[++s];if(8&r&&null!==t.attrs){if(!Cr(t.attrs,c,n)){if(Ir(r))return!1;a=!0}continue}var l=Or(8&r?"class":u,i,kr(t),n);if(-1===l){if(Ir(r))return!1;a=!0;continue}if(""!==c){var h;h=l>o?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==Er(f,c,0)||2&r&&c!==h){if(Ir(r))return!1;a=!0}}}}else{if(!a&&!Ir(r)&&!Ir(u))return!1;if(a&&Ir(u))continue;a=!1,r=u|1&r}}return Ir(r)||a}function Ir(t){return 0==(1&t)}function Or(t,e,n,r){if(null===e)return-1;var i=0;if(r||!n){for(var o=!1;i<e.length;){var a=e[i];if(a===t)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){for(var s=e[++i];"string"==typeof s;)s=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){var n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){var r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Ar(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<e.length;r++)if(Tr(t,e[r],n))return!0;return!1}function xr(t,e){return t?":not("+e.trim()+")":e}function Nr(t){for(var e=t[0],n=1,r=2,i="",o=!1;n<t.length;){var a=t[n];if("string"==typeof a)if(2&r){var s=t[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""===i||Ir(a)||(e+=xr(o,i),i=""),r=a,o=o||!Ir(r);n++}return""!==i&&(e+=xr(o,i)),e}var Pr={};function Dr(t){var e=t[3];return Ht(e)?e[3]:e}function Rr(t){return jr(t[13])}function Lr(t){return jr(t[4])}function jr(t){for(;null!==t&&!Ht(t);)t=t[4];return t}function Fr(t){Mr(me(),ge(),Me()+t,Ce())}function Mr(t,e,n,r){if(!r)if(3==(3&e[2])){var i=t.preOrderCheckHooks;null!==i&&He(e,i,n)}else{var o=t.preOrderHooks;null!==o&&Be(e,o,0,n)}Ue(n)}function Ur(t,e){return t<<17|e<<2}function Vr(t){return t>>17&32767}function qr(t){return 2|t}function Hr(t){return(131068&t)>>2}function Br(t,e){return-131069&t|e<<2}function zr(t){return 1|t}function Wr(t,e){var n=t.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1];if(-1!==o){var a=t.data[o];xe(i),a.contentQueries(2,e[o],o)}}}function Qr(t,e,n){return ne(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Gr(t,e,n,r,i,o,a,s,u,c){var l=e.blueprint.slice();return l[0]=i,l[2]=140|r,de(l),l[3]=l[15]=t,l[8]=n,l[10]=a||t&&t[10],l[11]=s||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Kr(t,e,n,r,i,o){var a=n+20,s=t.data[a]||function(t,e,n,r,i,o){var a=be(),s=Ee(),u=s?a:a&&a.parent,c=t.data[n]=ii(0,u&&u!==e?u:null,r,n,i,o);return null===t.firstChild&&(t.firstChild=c),a&&(!s||null!=a.child||null===c.parent&&2!==a.type?s||(a.next=c):a.child=c),c}(t,e,a,r,i,o);return we(s,!0),s}function Yr(t,e,n){Pe(e,e[6]);try{var r=t.viewQuery;null!==r&&Ti(1,r,n);var i=t.template;null!==i&&Jr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Wr(t,e),t.staticViewQueries&&Ti(2,t.viewQuery,n);var o=t.components;null!==o&&function(t,e){for(var n=0;n<e.length;n++)wi(t,e[n])}(e,o)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),a}finally{e[2]&=-5,Fe()}}function Xr(t,e,n,r){var i=e[2];if(256!=(256&i)){Pe(e,e[6]);var o=Ce();try{de(e),ve.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Jr(t,e,n,2,r);var a=3==(3&i);if(!o)if(a){var s=t.preOrderCheckHooks;null!==s&&He(e,s,null)}else{var u=t.preOrderHooks;null!==u&&Be(e,u,0,null),ze(e,0)}if(function(t){for(var e=Rr(t);null!==e;e=Lr(e))if(e[2])for(var n=e[9],r=0;r<n.length;r++){var i=n[r],o=i[3];0==(1024&i[2])&&pe(o,1),i[2]|=1024}}(e),function(t){for(var e=Rr(t);null!==e;e=Lr(e))for(var n=10;n<e.length;n++){var r=e[n],i=r[1];he(r)&&Xr(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&Wr(t,e),!o)if(a){var c=t.contentCheckHooks;null!==c&&He(e,c)}else{var l=t.contentHooks;null!==l&&Be(e,l,1),ze(e,1)}!function(t,e){try{var n=t.expandoInstructions;if(null!==n)for(var r=t.expandoStartIndex,i=-1,o=0;o<n.length;o++){var a=n[o];"number"==typeof a?a<=0?(Ue(0-a),i=r+=9+n[++o]):r+=a:(null!==a&&(Ie(r,i),a(2,e[i])),i++)}}finally{Ue(-1)}}(t,e);var h=t.components;null!==h&&function(t,e){for(var n=0;n<e.length;n++)bi(t,e[n])}(e,h);var f=t.viewQuery;if(null!==f&&Ti(2,f,r),!o)if(a){var d=t.viewCheckHooks;null!==d&&He(e,d)}else{var p=t.viewHooks;null!==p&&Be(e,p,2),ze(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,pe(e[3],-1))}finally{Fe()}}}function Zr(t,e,n,r){var i=e[10],o=!Ce(),a=le(e);try{o&&!a&&i.begin&&i.begin(),a&&Yr(t,e,r),Xr(t,e,n,r)}finally{o&&!a&&i.end&&i.end()}}function Jr(t,e,n,r,i){var o=Me();try{Ue(-1),2&r&&e.length>20&&Mr(t,e,0,Ce()),n(r,i)}finally{Ue(o)}}function $r(t,e,n){ye()&&(function(t,e,n,r){var i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||hn(n,e),_r(r,e);for(var a=n.initialInputs,s=i;s<o;s++){var u=t.data[s],c=Qt(u);c&&yi(e,n,u);var l=bn(e,t,s,n);_r(l,e),null!==a&&gi(0,s-i,l,u,0,a),c&&(ue(n.index,e)[8]=l)}}(t,e,n,ae(n,e)),128==(128&n.flags)&&function(t,e,n){var r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,a=t.firstCreatePass,s=n.index-20,u=ve.lFrame.currentDirectiveIndex;try{Ue(s);for(var c=r;c<i;c++){var l=t.data[c],h=e[c];Oe(c),null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs?li(l,h):a&&o.push(null)}}finally{Ue(-1),Oe(u)}}(t,e,n))}function ti(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ae,r=e.localNames;if(null!==r)for(var i=e.index+1,o=0;o<r.length;o+=2){var a=r[o+1],s=-1===a?n(e,t):t[a];t[i++]=s}}function ei(t){var e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ni(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ni(t,e,n,r,i,o,a,s,u,c){var l=20+r,h=l+i,f=function(t,e){for(var n=[],r=0;r<e;r++)n.push(r<t?null:Pr);return n}(l,h);return f[1]={type:t,id:e,blueprint:f,template:n,queries:null,viewQuery:s,node:null,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:c,incompleteFirstPass:!1}}function ri(t,e,n,r){var i=Oi(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function ii(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function oi(t,e,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ai(t,e,n,r,i,o,a,s){var u,c=ae(e,n),l=e.inputs;!s&&null!=l&&(u=l[r])?(xi(t,n,u,r,i),zt(e)&&function(t,e){var n=ue(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=a?a(i,e.tagName||"",r):i,ne(o)?o.setProperty(c,r,i):Xe(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function si(t,e,n,r){var i=!1;if(ye()){var o=function(t,e,n){var r=t.directiveRegistry,i=null;if(r)for(var o=0;o<r.length;o++){var a=r[o];Ar(n,a.selectors,!1)&&(i||(i=[]),vn(hn(n,e),t,a.type),Qt(a)?(2&n.flags&&br(n),fi(t,n),i.unshift(a)):i.push(a))}return i}(t,e,n),a=null===r?null:{"":-1};if(null!==o){var s=0;i=!0,pi(n,t.data.length,o.length);for(var u=0;u<o.length;u++){var c=o[u];c.providersResolver&&c.providersResolver(c)}hi(t,n,o.length);for(var l=!1,h=!1,f=0;f<o.length;f++){var d=o[f];n.mergedAttrs=Ze(n.mergedAttrs,d.hostAttrs),vi(t,e,d),di(t.data.length-1,d,a),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128);var p=d.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),l=!0),h||!p.ngOnChanges&&!p.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),h=!0),ui(t,d),s+=d.hostVars}!function(t,e){for(var n=e.directiveEnd,r=t.data,i=e.attrs,o=[],a=null,s=null,u=e.directiveStart;u<n;u++){var c=r[u],l=c.inputs,h=null===i||kr(e)?null:mi(l,i);o.push(h),a=oi(l,u,a),s=oi(c.outputs,u,s)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=s}(t,n),ci(t,e,s)}a&&function(t,e,n){if(e)for(var r=t.localNames=[],i=0;i<e.length;i+=2){var o=n[e[i+1]];if(null==o)throw new Error("Export of name '".concat(e[i+1],"' not found!"));r.push(e[i],o)}}(n,r,a)}return n.mergedAttrs=Ze(n.mergedAttrs,n.attrs),i}function ui(t,e){var n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function ci(t,e,n){for(var r=0;r<n;r++)e.push(Pr),t.blueprint.push(Pr),t.data.push(null)}function li(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function hi(t,e,n){var r=20-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function fi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function di(t,e,n){if(n){if(e.exportAs)for(var r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Qt(e)&&(n[""]=t)}}function pi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function vi(t,e,n){t.data.push(n);var r=n.factory||(n.factory=Ut(n.type)),i=new Ge(r,Qt(n),null);t.blueprint.push(i),e.push(i)}function yi(t,e,n){var r=ae(e,t),i=ei(n),o=t[10],a=Ei(t,Gr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n)));t[e.index]=a}function gi(t,e,n,r,i,o){var a=o[e];if(null!==a)for(var s=r.setInput,u=0;u<a.length;){var c=a[u++],l=a[u++],h=a[u++];null!==s?r.setInput(n,h,c,l):n[l]=h}}function mi(t,e){for(var n=null,r=0;r<e.length;){var i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function _i(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function bi(t,e){var n=ue(e,t);if(he(n)){var r=n[1];80&n[2]?Xr(r,n,r.template,n[8]):n[5]>0&&function t(e){for(var n=Rr(e);null!==n;n=Lr(n))for(var r=10;r<n.length;r++){var i=n[r];if(1024&i[2]){var o=i[1];Xr(o,i,o.template,i[8])}else i[5]>0&&t(i)}var a=e[1].components;if(null!==a)for(var s=0;s<a.length;s++){var u=ue(a[s],e);he(u)&&u[5]>0&&t(u)}}(n)}}function wi(t,e){var n=ue(e,t),r=n[1];!function(t,e){for(var n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Yr(r,n,n[8])}function Ei(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ci(t){for(;t;){t[2]|=64;var e=Dr(t);if(Gt(t)&&!e)return t;t=e}return null}function ki(t,e,n){var r=e[10];r.begin&&r.begin();try{Xr(t,e,t.template,n)}catch(i){throw Ai(e,i),i}finally{r.end&&r.end()}}function Si(t){!function(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=ce(n),i=r[1];Zr(i,r,i.template,n)}}(t[8])}function Ti(t,e,n){xe(0),e(t,n)}var Ii=Promise.resolve(null);function Oi(t){return t[7]||(t[7]=[])}function Ai(t,e){var n=t[9],r=n?n.get(An,null):null;r&&r.handleError(e)}function xi(t,e,n,r,i){for(var o=0;o<n.length;){var a=n[o++],s=n[o++],u=e[a],c=t.data[a];null!==c.setInput?c.setInput(u,i,r,s):u[s]=i}}function Ni(t,e){var n=e[3];return-1===t.index?Ht(n)?n:null:n}function Pi(t,e){var n=Ni(t,e);return n?Bi(e[11],n[7]):null}function Di(t,e,n,r,i){if(null!=r){var o,a=!1;Ht(r)?o=r:qt(r)&&(a=!0,r=r[0]);var s=ie(r);0===t&&null!==n?null==i?qi(e,n,s):Vi(e,n,s,i||null):1===t&&null!==n?Vi(e,n,s,i||null):2===t?function(t,e,n){var r=Bi(t,e);r&&function(t,e,n,r){ne(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,s,a):3===t&&e.destroyNode(s),null!=o&&function(t,e,n,r,i){var o=n[7];o!==ie(n)&&Di(e,t,r,o,i);for(var a=10;a<n.length;a++){var s=n[a];Gi(s[1],s,t,e,r,o)}}(e,t,o,n,i)}}function Ri(t,e,n,r){var i=Pi(t.node,e);i&&Gi(t,e,e[11],n?1:2,i,r)}function Li(t,e){var n=t[9],r=n.indexOf(e);1024&e[2]&&pe(e[3],-1),n.splice(r,1)}function ji(t,e){if(!(t.length<=10)){var n=10+e,r=t[n];if(r){var i=r[17];null!==i&&i!==t&&Li(i,r),e>0&&(t[n-1][4]=r[4]);var o=bt(t,10+e);Ri(r[1],r,!1,null);var a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function Fi(t,e){if(!(256&e[2])){var n=e[11];ne(n)&&n.destroyNode&&Gi(t,e,n,3,null,null),function(t){var e=t[13];if(!e)return Ui(t[1],t);for(;e;){var n=null;if(qt(e))n=e[13];else{var r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)qt(e)&&Ui(e[1],e),e=Mi(e,t);null===e&&(e=t),qt(e)&&Ui(e[1],e),n=e&&e[4]}e=n}}(e)}}function Mi(t,e){var n;return qt(t)&&(n=t[6])&&2===n.type?Ni(n,t):t[3]===e?null:t[3]}function Ui(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){var n;if(null!=t&&null!=(n=t.destroyHooks))for(var r=0;r<n.length;r+=2){var i=e[n[r]];if(!(i instanceof Ge)){var o=n[r+1];if(Array.isArray(o))for(var a=0;a<o.length;a+=2)o[a+1].call(i[o[a]]);else o.call(i)}}}(t,e),function(t,e){var n=t.cleanup;if(null!==n){for(var r=e[7],i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){var o=n[i+1],a="function"==typeof o?o(e):ie(e[o]),s=r[n[i+2]],u=n[i+3];"boolean"==typeof u?a.removeEventListener(n[i],s,u):u>=0?r[u]():r[-u].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);e[7]=null}}(t,e);var n=e[6];n&&3===n.type&&ne(e[11])&&e[11].destroy();var r=e[17];if(null!==r&&Ht(e[3])){r!==e[3]&&Li(r,e);var i=e[19];null!==i&&i.detachView(t)}}}function Vi(t,e,n,r){ne(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function qi(t,e,n){ne(t)?t.appendChild(e,n):e.appendChild(n)}function Hi(t,e,n,r){null!==r?Vi(t,e,n,r):qi(t,e,n)}function Bi(t,e){return ne(t)?t.parentNode(e):e.parentNode}function zi(t,e,n,r){var i=function(t,e,n){for(var r=e.parent;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){var i=n[6];return 2===i.type?Pi(i,n):n[0]}if(e&&5===e.type&&4&e.flags)return ae(e,n).parentNode;if(2&r.flags){var o=t.data,a=o[o[r.index].directiveStart].encapsulation;if(a!==St.ShadowDom&&a!==St.Native)return null}return ae(r,n)}(t,r,e);if(null!=i){var o=e[11],a=function(t,e){if(2===t.type){var n=Ni(t,e);return null===n?null:Wi(n.indexOf(e,10)-10,n)}return 4===t.type||5===t.type?ae(t,e):null}(r.parent||e[6],e);if(Array.isArray(n))for(var s=0;s<n.length;s++)Hi(o,i,n[s],a);else Hi(o,i,n,a)}}function Wi(t,e){var n=10+t+1;if(n<e.length){var r=e[n],i=r[1].firstChild;if(null!==i)return function t(e,n){if(null!==n){var r=n.type;if(3===r)return ae(n,e);if(0===r)return Wi(-1,e[n.index]);if(4===r||5===r){var i=n.child;if(null!==i)return t(e,i);var o=e[n.index];return Ht(o)?Wi(-1,o):ie(o)}var a=e[16],s=a[6],u=Dr(a),c=s.projection[n.projection];return null!=c?t(u,c):t(e,n.next)}return null}(r,i)}return e[7]}function Qi(t,e,n,r,i,o,a){for(;null!=n;){var s=r[n.index],u=n.type;a&&0===e&&(s&&_r(ie(s),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(Qi(t,e,n.child,r,i,o,!1),Di(e,t,i,s,o)):1===u?Ki(t,e,r,n,i,o):Di(e,t,i,s,o)),n=a?n.projectionNext:n.next}}function Gi(t,e,n,r,i,o){Qi(n,r,t.node.child,e,i,o,!1)}function Ki(t,e,n,r,i,o){var a=n[16],s=a[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)Di(e,t,i,s[u],o);else Qi(t,e,s,a[3],i,o,!0)}function Yi(t,e,n){ne(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Xi(t,e,n){ne(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}var Zi,Ji,$i,to=function(){function t(e,n){s(this,t),this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._viewContainerRef=null}return c(t,[{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Fi(this._lView[1],this._lView)}},{key:"onDestroy",value:function(t){ri(this._lView[1],this._lView,null,t)}},{key:"markForCheck",value:function(){Ci(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){ki(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(t,e,n){ke(!0);try{ki(t,e,n)}finally{ke(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}},{key:"detachFromAppRef",value:function(){var t;this._appRef=null,Gi(this._lView[1],t=this._lView,t[11],2,null,null)}},{key:"attachToAppRef",value:function(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}},{key:"rootNodes",get:function(){var t=this._lView;return null==t[0]?function t(e,n,r,o){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==r;){var s=n[r.index];if(null!==s&&o.push(ie(s)),Ht(s))for(var u=10;u<s.length;u++){var c=s[u],l=c[1].firstChild;null!==l&&t(c[1],c,l,o)}var h=r.type;if(4===h||5===h)t(e,n,r.child,o);else if(1===h){var f=n[16],d=f[6].projection[r.projection];if(Array.isArray(d))o.push.apply(o,i(d));else{var p=Dr(f);t(p[1],p,d,o,!0)}}r=a?r.projectionNext:r.next}return o}(t[1],t,t[6].child,[]):[]}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}}]),t}(),eo=function(t){h(n,t);var e=d(n);function n(t){var r;return s(this,n),(r=e.call(this,t))._view=t,r}return c(n,[{key:"detectChanges",value:function(){Si(this._view)}},{key:"checkNoChanges",value:function(){!function(t){ke(!0);try{Si(t)}finally{ke(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(to);function no(t,e,n){return Zi||(Zi=function(t){h(n,t);var e=d(n);function n(){return s(this,n),e.apply(this,arguments)}return n}(t)),new Zi(ae(e,n))}function ro(t,e,n,r){return Ji||(Ji=function(t){h(n,t);var e=d(n);function n(t,r,i){var o;return s(this,n),(o=e.call(this))._declarationView=t,o._declarationTContainer=r,o.elementRef=i,o}return c(n,[{key:"createEmbeddedView",value:function(t){var e=this._declarationTContainer.tViews,n=Gr(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];var r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Yr(e,n,t),new to(n)}}]),n}(t)),0===n.type?new Ji(r,n,no(e,n,r)):null}function io(t,e,n,r){var i;$i||($i=function(t){h(r,t);var n=d(r);function r(t,e,i){var o;return s(this,r),(o=n.call(this))._lContainer=t,o._hostTNode=e,o._hostView=i,o}return c(r,[{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}},{key:"createEmbeddedView",value:function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r}},{key:"createComponent",value:function(t,e,n,r,i){var o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){var a=o.get(yt,null);a&&(i=a)}var s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}},{key:"insert",value:function(t,e){var n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Ht(n[3])){var i=this.indexOf(t);if(-1!==i)this.detach(i);else{var o=n[3],a=new $i(o,o[6],o[3]);a.detach(a.indexOf(t))}}var s=this._adjustIndex(e);return function(t,e,n,r){var i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],_t(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;var a=e[17];null!==a&&n!==a&&function(t,e){var n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(a,e);var s=e[19];null!==s&&s.insertView(t),e[2]|=128}(r,n,this._lContainer,s),Ri(r,n,!0,Wi(s,this._lContainer)),t.attachToViewContainerRef(this),_t(this._lContainer[8],s,t),t}},{key:"move",value:function(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}},{key:"indexOf",value:function(t){var e=this._lContainer[8];return null!==e?e.indexOf(t):-1}},{key:"remove",value:function(t){this.allocateContainerIfNeeded();var e=this._adjustIndex(t,-1),n=ji(this._lContainer,e);n&&(bt(this._lContainer[8],e),Fi(n[1],n))}},{key:"detach",value:function(t){this.allocateContainerIfNeeded();var e=this._adjustIndex(t,-1),n=ji(this._lContainer,e);return n&&null!=bt(this._lContainer[8],e)?new to(n):null}},{key:"_adjustIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==t?this.length+e:t}},{key:"allocateContainerIfNeeded",value:function(){null===this._lContainer[8]&&(this._lContainer[8]=[])}},{key:"element",get:function(){return no(e,this._hostTNode,this._hostView)}},{key:"injector",get:function(){return new Cn(this._hostTNode,this._hostView)}},{key:"parentInjector",get:function(){var t=pn(this._hostTNode,this._hostView),e=nn(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){for(var r=n.parent.injectorIndex,i=n.parent;null!=i.parent&&r==i.parent.injectorIndex;)i=i.parent;return i}for(var o=en(t),a=e,s=e[6];o>1;)s=(a=a[15])[6],o--;return s}(t,this._hostView,this._hostTNode);return $e(t)&&null!=n?new Cn(n,e):new Cn(null,this._hostView)}},{key:"length",get:function(){return this._lContainer.length-10}}]),r}(t));var o=r[n.index];if(Ht(o))i=o;else{var a;if(4===n.type)a=ie(o);else if(a=r[11].createComment(""),Gt(r)){var u=r[11],l=ae(n,r);Vi(u,Bi(u,l),a,function(t,e){return ne(t)?t.nextSibling(e):e.nextSibling}(u,l))}else zi(r[1],r,a,n);r[n.index]=i=_i(o,r,a,n),Ei(r,i)}return new $i(i,n,r)}function oo(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,e,n){if(!n&&zt(t)){var r=ue(t.index,e);return new to(r,r)}return 3===t.type||0===t.type||4===t.type||5===t.type?new to(e[16],e):null}(be(),ge(),t)}var ao=function(){var t=function t(){s(this,t)};return t.__NG_ELEMENT_ID__=function(){return so()},t}(),so=oo,uo=Function,co=new rt("Set Injector scope."),lo={},ho={},fo=[],po=void 0;function vo(){return void 0===po&&(po=new vt),po}function yo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new go(t,n,e||vo(),r)}var go=function(){function t(e,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;s(this,t),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var a=[];n&&mt(n,(function(t){return i.processProvider(t,e,n)})),mt([e],(function(t){return i.processInjectorType(t,[],a)})),this.records.set(it,bo(void 0,this));var u=this.records.get(co);this.scope=null!=u?u.value:null,this.source=o||("object"==typeof e?null:M(e))}return c(t,[{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(t){return t.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ot,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.Default;this.assertNotDestroyed();var r,i=ct(this);try{if(!(n&S.SkipSelf)){var o=this.records.get(t);if(void 0===o){var a=("function"==typeof(r=t)||"object"==typeof r&&r instanceof rt)&&x(t);o=a&&this.injectableDefInScope(a)?bo(mo(t),lo):null,this.records.set(t,o)}if(null!=o)return this.hydrate(t,o)}return(n&S.Self?vo():this.parent).get(t,e=n&S.Optional&&e===ot?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(M(t)),i)throw s;return function(t,e,n,r){var i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;var i=M(e);if(Array.isArray(e))i=e.map(M).join(" -> ");else if("object"==typeof e){var o=[];for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):M(s)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(t.replace(at,"\n  "))}("\n"+t.message,i,"R3InjectorError",r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,0,this.source)}throw s}finally{ct(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var t=this;this.injectorDefTypes.forEach((function(e){return t.get(e)}))}},{key:"toString",value:function(){var t=[];return this.records.forEach((function(e,n){return t.push(M(n))})),"R3Injector[".concat(t.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(t,e,n){var r=this;if(!(t=H(t)))return!1;var i=P(t),o=null==i&&t.ngModule||void 0,a=void 0===o?t:o,s=-1!==n.indexOf(a);if(void 0!==o&&(i=P(o)),null==i)return!1;if(null!=i.imports&&!s){var u;n.push(a);try{mt(i.imports,(function(t){r.processInjectorType(t,e,n)&&(void 0===u&&(u=[]),u.push(t))}))}finally{}if(void 0!==u)for(var c=function(t){var e=u[t],n=e.ngModule,i=e.providers;mt(i,(function(t){return r.processProvider(t,n,i||fo)}))},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(a),this.records.set(a,bo(i.factory,lo));var h=i.providers;if(null!=h&&!s){var f=t;mt(h,(function(t){return r.processProvider(t,f,h)}))}return void 0!==o&&void 0!==t.providers}},{key:"processProvider",value:function(t,e,n){var r=Eo(t=H(t))?t:H(t&&t.provide),i=function(t,e,n){return wo(t)?bo(void 0,t.useValue):bo(_o(t,e,n),lo)}(t,e,n);if(Eo(t)||!0!==t.multi){var o=this.records.get(r);o&&void 0!==o.multi&&wr()}else{var a=this.records.get(r);a?void 0===a.multi&&wr():((a=bo(void 0,lo,!0)).factory=function(){return pt(a.multi)},this.records.set(r,a)),r=t,a.multi.push(t)}this.records.set(r,i)}},{key:"hydrate",value:function(t,e){var n;return e.value===ho?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(M(t)):e.value===lo&&(e.value=ho,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}},{key:"injectableDefInScope",value:function(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();function mo(t){var e=x(t),n=null!==e?e.factory:Ut(t);if(null!==n)return n;var r=P(t);if(null!==r)return r.factory;if(t instanceof rt)throw new Error("Token ".concat(M(t)," is missing a \u0275prov definition."));if(t instanceof Function)return function(t){var e=t.length;if(e>0){var n=function(t,e){for(var n=[],r=0;r<t;r++)n.push("?");return n}(e);throw new Error("Can't resolve all parameters for ".concat(M(t),": (").concat(n.join(", "),")."))}var r=function(t){var e=t&&(t[D]||t[j]||t[L]&&t[L]());if(e){var n=function(t){if(t.hasOwnProperty("name"))return t.name;var e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),e}return null}(t);return null!==r?function(){return r.factory(t)}:function(){return new t}}(t);throw new Error("unreachable")}function _o(t,e,r){var o,a=void 0;if(Eo(t)){var s=H(t);return Ut(s)||mo(s)}if(wo(t))a=function(){return H(t.useValue)};else if((o=t)&&o.useFactory)a=function(){return t.useFactory.apply(t,i(pt(t.deps||[])))};else if(function(t){return!(!t||!t.useExisting)}(t))a=function(){return ft(H(t.useExisting))};else{var u=H(t&&(t.useClass||t.provide));if(u||function(t,e,n){var r="";throw t&&e&&(r=" - only instances of Provider and Type are allowed, got: [".concat(e.map((function(t){return t==n?"?"+n+"?":"..."})).join(", "),"]")),new Error("Invalid provider for the NgModule '".concat(M(t),"'")+r)}(e,r,t),!function(t){return!!t.deps}(t))return Ut(u)||mo(u);a=function(){return n(u,i(pt(t.deps)))}}return a}function bo(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:t,value:e,multi:n?[]:void 0}}function wo(t){return null!==t&&"object"==typeof t&&st in t}function Eo(t){return"function"==typeof t}var Co=function(t,e,n){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=yo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)},ko=function(){var t=function(){function t(){s(this,t)}return c(t,null,[{key:"create",value:function(t,e){return Array.isArray(t)?Co(t,e,""):Co(t.providers,t.parent,t.name||"")}}]),t}();return t.THROW_IF_NOT_FOUND=ot,t.NULL=new vt,t.\u0275prov=O({token:t,providedIn:"any",factory:function(){return ft(it)}}),t.__NG_ELEMENT_ID__=-1,t}(),So=new rt("AnalyzeForEntryComponents");function To(t,e,n){var r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(var a=0;a<e.length;a++){var s=e[a];"number"==typeof s?o=s:1==o?i=U(i,s):2==o&&(r=U(r,s+": "+e[++a]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Io=null;function Oo(){if(!Io){var t=Y.Symbol;if(t&&t.iterator)Io=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Io=r)}}return Io}var Ao=function(){function t(e){s(this,t),this.wrapped=e}return c(t,null,[{key:"wrap",value:function(e){return new t(e)}},{key:"unwrap",value:function(e){return t.isWrapped(e)?e.wrapped:e}},{key:"isWrapped",value:function(e){return e instanceof t}}]),t}();function xo(t){return!!No(t)&&(Array.isArray(t)||!(t instanceof Map)&&Oo()in t)}function No(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Po(t,e,n){return t[e]=n}function Do(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ro(t,e,n,r){var i=ge();return Do(i,Te(),e)&&(me(),function(t,e,n,r,i,o){var a=ae(t,e),s=e[11];if(null==r)ne(s)?s.removeAttribute(a,n,o):a.removeAttribute(n);else{var u=null==i?rn(r):i(r,t.tagName||"",n);ne(s)?s.setAttribute(a,n,u,o):o?a.setAttributeNS(o,n,u):a.setAttribute(n,u)}}(Ve(),i,t,e,n,r)),Ro}function Lo(t,e,n,r,i,o,a,s){var u=ge(),c=me(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,a,s,u){var c=e.consts,l=Kr(e,n[6],t,0,a||null,fe(c,s));si(e,n,l,fe(c,u)),qe(e,l);var h=l.tViews=ni(2,-1,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c),f=ii(0,null,2,-1,null,null);return f.injectorIndex=l.injectorIndex,h.node=f,null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,a):c.data[l];we(h,!1);var f=u[11].createComment("");zi(c,u,f,h),_r(f,u),Ei(u,u[l]=_i(f,u,f,h)),Wt(h)&&$r(c,u,h),null!=a&&ti(u,h,s)}function jo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.Default,n=ge();return null==n?ft(t,e):yn(be(),n,H(t),e)}function Fo(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;var n=t.attrs;if(n)for(var r=n.length,i=0;i<r;){var o=n[i];if(Ye(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}return null}(be(),t)}function Mo(t,e,n){var r=ge();return Do(r,Te(),e)&&ai(me(),Ve(),r,t,e,r[11],n,!1),Mo}function Uo(t,e,n,r,i){var o=i?"class":"style";xi(t,n,e.inputs[o],o,r)}function Vo(t,e,n,r){var i=ge(),o=me(),a=20+t,s=i[11],u=i[a]=Qr(e,s,ve.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,a){var s=e.consts,u=fe(s,o),c=Kr(e,n[6],t,3,i,u);return si(e,n,c,fe(s,a)),null!==c.attrs&&To(c,c.attrs,!1),null!==c.mergedAttrs&&To(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(t,o,i,0,e,n,r):o.data[a];we(c,!0);var l=c.mergedAttrs;null!==l&&Ke(s,u,l);var h=c.classes;null!==h&&Xi(s,u,h);var f=c.styles;null!==f&&Yi(s,u,f),zi(o,i,u,c),0===ve.lFrame.elementDepthCount&&_r(u,i),ve.lFrame.elementDepthCount++,Wt(c)&&($r(o,i,c),function(t,e,n){if(Bt(e))for(var r=e.directiveEnd,i=e.directiveStart;i<r;i++){var o=t.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}(o,c,i)),null!==r&&ti(i,c)}function qo(){var t=be();Ee()?ve.lFrame.isParent=!1:we(t=t.parent,!1);var e=t;ve.lFrame.elementDepthCount--;var n=me();n.firstCreatePass&&(qe(n,t),Bt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Uo(n,e,ge(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Uo(n,e,ge(),e.stylesWithoutHost,!1)}function Ho(t,e,n,r){Vo(t,e,n,r),qo()}function Bo(){return ge()}function zo(t){return!!t&&"function"==typeof t.then}function Wo(t){return!!t&&"function"==typeof t.subscribe}function Qo(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=ge(),o=me(),a=be();return function(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,u=Wt(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=Oi(e),h=!0;if(3===r.type){var f=ae(r,e),d=s?s(f):Tt,p=d.target||f,v=l.length,y=s?function(t){return s(ie(t[r.index])).target}:r.index;if(ne(n)){var g=null;if(!s&&u&&(g=function(t,e,n,r){var i=t.cleanup;if(null!=i)for(var o=0;o<i.length-1;o+=2){var a=i[o];if(a===n&&i[o+1]===r){var s=e[7],u=i[o+2];return s.length>u?s[u]:null}"string"==typeof a&&(o+=2)}return null}(t,e,i,r.index)),null!==g)(g.__ngLastListenerFn__||g).__ngNextListenerFn__=o,g.__ngLastListenerFn__=o,h=!1;else{o=Ko(r,e,o,!1);var m=n.listen(d.name||p,i,o);l.push(o,m),c&&c.push(i,y,v,v+1)}}else o=Ko(r,e,o,!0),p.addEventListener(i,o,a),l.push(o),c&&c.push(i,y,v,a)}var _,b=r.outputs;if(h&&null!==b&&(_=b[i])){var w=_.length;if(w)for(var E=0;E<w;E+=2){var C=e[_[E]][_[E+1]].subscribe(o),k=l.length;l.push(o,C),c&&c.push(i,r.index,k,-(k+1))}}}(o,i,i[11],a,t,e,n,r),Qo}function Go(t,e,n){try{return!1!==e(n)}catch(r){return Ai(t,r),!1}}function Ko(t,e,n,r){return function i(o){if(o===Function)return n;var a=2&t.flags?ue(t.index,e):e;0==(32&e[2])&&Ci(a);for(var s=Go(e,n,o),u=i.__ngNextListenerFn__;u;)s=Go(e,u,o)&&s,u=u.__ngNextListenerFn__;return r&&!1===s&&(o.preventDefault(),o.returnValue=!1),s}}function Yo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){return(ve.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,ve.lFrame.contextLView))[8]}(t)}var Xo=[];function Zo(t,e,n,r,i){for(var o=t[n+1],a=null===e,s=r?Vr(o):Hr(o),u=!1;0!==s&&(!1===u||a);){var c=t[s+1];Jo(t[s],e)&&(u=!0,t[s+1]=r?zr(c):qr(c)),s=r?Vr(c):Hr(c)}u&&(t[n+1]=r?qr(o):zr(o))}function Jo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Et(t,e)>=0}function $o(t,e){return function(t,e,n,r){var i,o,a=ge(),s=me(),u=(i=ve.lFrame,o=i.bindingIndex,i.bindingIndex=i.bindingIndex+2,o);s.firstUpdatePass&&function(t,e,n,r){var i=t.data;if(null===i[n+1]){var o=i[Me()+20],a=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!a&&(e=!1),e=function(t,e,n,r){var i=function(t){var e=ve.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t),o=e.residualClasses;if(null===i)0===e.classBindings&&(n=ea(n=ta(null,t,e,n,!0),e.attrs,!0),o=null);else{var a=e.directiveStylingLast;if(-1===a||t[a]!==i)if(n=ta(i,t,e,n,!0),null===o){var s=function(t,e,n){var r=e.classBindings;if(0!==Hr(r))return t[Vr(r)]}(t,e);void 0!==s&&Array.isArray(s)&&function(t,e,n,r){t[Vr(e.classBindings)]=r}(t,e,0,s=ea(s=ta(null,t,e,s[1],!0),e.attrs,!0))}else o=function(t,e,n){for(var r=void 0,i=e.directiveEnd,o=1+e.directiveStylingLast;o<i;o++)r=ea(r,t[o].hostAttrs,!0);return ea(r,e.attrs,!0)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e),function(t,e,n,r,i,o){var a=e.classBindings,s=Vr(a),u=Hr(a);t[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||Et(h,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){var f=Vr(t[s+1]);t[r+1]=Ur(f,s),0!==f&&(t[f+1]=Br(t[f+1],r)),t[s+1]=131071&t[s+1]|r<<17}else t[r+1]=Ur(s,0),0!==s&&(t[s+1]=Br(t[s+1],r)),s=r;else t[r+1]=Ur(u,0),0===s?s=r:t[u+1]=Br(t[u+1],r),u=r;l&&(t[r+1]=qr(t[r+1])),Zo(t,c,r,!0),Zo(t,c,r,!1),function(t,e,n,r,i){var o=t.residualClasses;null!=o&&"string"==typeof e&&Et(o,e)>=0&&(n[r+1]=zr(n[r+1]))}(e,c,t,r),a=Ur(s,u),e.classBindings=a}(i,o,e,n,a)}}(s,t,u),e!==Pr&&Do(a,u,e)&&function(t,e,n,r,i,o,a,s){if(3===e.type){var u=t.data,c=u[s+1];ra(1==(1&c)?na(u,e,n,i,Hr(c),!0):void 0)||(ra(o)||2==(2&c)&&(o=na(u,null,n,i,s,!0)),function(t,e,n,r,i){var o=ne(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,oe(Me(),n),i,o))}}(s,s.data[Me()+20],a,a[11],t,a[u+1]=function(t,e){return null==t||"object"==typeof t&&(t=M(jn(t))),t}(e),0,u)}(t,e),$o}function ta(t,e,n,r,i){var o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<a&&(r=ea(r,(o=e[s]).hostAttrs,i),o!==t);)s++;return null!==t&&(n.directiveStylingLast=s),r}function ea(t,e,n){var r,i,o,a,s=n?1:2,u=-1;if(null!==e)for(var c=0;c<e.length;c++){var l=e[c];"number"==typeof l?u=l:u===s&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),r=t,i=l,o=!!n||e[++c],a=void 0,(a=Et(r,i))>=0?r[1|a]=o:function(t,e,n,r){var i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(r,a=~a,i,o))}return void 0===t?null:t}function na(t,e,n,r,i,o){for(var a=null===e,s=void 0;i>0;){var u=t[i],c=Array.isArray(u),l=c?u[1]:u,h=null===l,f=n[i+1];f===Pr&&(f=h?Xo:void 0);var d=h?wt(f,r):l===r?f:void 0;if(c&&!ra(d)&&(d=wt(u,r)),ra(d)&&(s=d,a))return s;var p=t[i+1];i=a?Vr(p):Hr(p)}if(null!==e){var v=o?e.residualClasses:e.residualStyles;null!=v&&(s=wt(v,r))}return s}function ra(t){return void 0!==t}function ia(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=ge(),r=me(),i=t+20,o=r.firstCreatePass?Kr(r,n[6],t,3,null,null):r.data[i],a=n[i]=function(t,e){return ne(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);zi(r,n,a,o),we(o,!1)}function oa(t){return aa("",t,""),oa}function aa(t,e,n){var r=ge(),i=function(t,e,n,r){return Do(t,Te(),n)?e+rn(n)+r:Pr}(r,t,e,n);return i!==Pr&&function(t,e,n){var r=oe(e,t),i=t[11];ne(i)?i.setValue(r,n):r.textContent=n}(r,Me(),i),aa}function sa(t,e,n){var r=ge();return Do(r,Te(),e)&&ai(me(),Ve(),r,t,e,r[11],n,!0),sa}function ua(t,e){var n=ce(t)[1],r=n.data.length-1;qe(n,{directiveStart:r,directiveEnd:r+1})}function ca(t){for(var e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0,r=[t];e;){var i=void 0;if(Qt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);var o=t;o.inputs=la(t.inputs),o.declaredInputs=la(t.declaredInputs),o.outputs=la(t.outputs);var a=i.hostBindings;a&&da(t,a);var s=i.viewQuery,u=i.contentQueries;if(s&&ha(t,s),u&&fa(t,u),I(t.inputs,i.inputs),I(t.declaredInputs,i.declaredInputs),I(t.outputs,i.outputs),Qt(i)&&i.data.animation){var c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(t),f===ca&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){for(var e=0,n=null,r=t.length-1;r>=0;r--){var i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ze(i.hostAttrs,n=Ze(n,i.hostAttrs))}}(r)}function la(t){return t===Tt?{}:t===It?[]:t}function ha(t,e){var n=t.viewQuery;t.viewQuery=n?function(t,r){e(t,r),n(t,r)}:e}function fa(t,e){var n=t.contentQueries;t.contentQueries=n?function(t,r,i){e(t,r,i),n(t,r,i)}:e}function da(t,e){var n=t.hostBindings;t.hostBindings=n?function(t,r){e(t,r),n(t,r)}:e}function pa(t,e,n,r,i){if(t=H(t),Array.isArray(t))for(var o=0;o<t.length;o++)pa(t[o],e,n,r,i);else{var a=me(),s=ge(),u=Eo(t)?t:H(t.provide),c=_o(t),l=be(),h=1048575&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>20;if(Eo(t)||!t.multi){var p=new Ge(c,i,jo),v=ga(u,e,i?h:h+d,f);-1===v?(vn(hn(l,s),a,u),va(a,t,e.length),e.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(p),s.push(p)):(n[v]=p,s[v]=p)}else{var y=ga(u,e,h+d,f),g=ga(u,e,h,h+d),m=y>=0&&n[y],_=g>=0&&n[g];if(i&&!_||!i&&!m){vn(hn(l,s),a,u);var b=function(t,e,n,r,i){var o=new Ge(t,n,jo);return o.multi=[],o.index=e,o.componentProviders=0,ya(o,i,r&&!n),o}(i?_a:ma,n.length,i,r,c);!i&&_&&(n[g].providerFactory=b),va(a,t,e.length,0),e.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(b),s.push(b)}else va(a,t,y>-1?y:g,ya(n[i?g:y],c,!i&&r));!i&&r&&_&&n[g].componentProviders++}}}function va(t,e,n,r){var i=Eo(e);if(i||e.useClass){var o=(e.useClass||e).prototype.ngOnDestroy;if(o){var a=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){var s=a.indexOf(n);-1===s?a.push(n,[r,o]):a[s+1].push(r,o)}else a.push(n,o)}}}function ya(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ga(t,e,n,r){for(var i=n;i<r;i++)if(e[i]===t)return i;return-1}function ma(t,e,n,r){return ba(this.multi,[])}function _a(t,e,n,r){var i,o=this.multi;if(this.providerFactory){var a=this.providerFactory.componentProviders,s=bn(n,n[1],this.providerFactory.index,r);ba(o,i=s.slice(0,a));for(var u=a;u<s.length;u++)i.push(s[u])}else ba(o,i=[]);return i}function ba(t,e){for(var n=0;n<t.length;n++)e.push((0,t[n])());return e}function wa(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(t,e,n){var r=me();if(r.firstCreatePass){var i=Qt(t);pa(n,r.data,r.blueprint,i,!0),pa(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}}var Ea=function t(){s(this,t)},Ca=function(){function t(){s(this,t)}return c(t,[{key:"resolveComponentFactory",value:function(t){throw function(t){var e=Error("No component factory found for ".concat(M(t),". Did you add it to @NgModule.entryComponents?"));return e.ngComponent=t,e}(t)}}]),t}(),ka=function(){var t=function t(){s(this,t)};return t.NULL=new Ca,t}(),Sa=function(){var t=function t(e){s(this,t),this.nativeElement=e};return t.__NG_ELEMENT_ID__=function(){return Ta(t)},t}(),Ta=function(t){return no(t,be(),ge())},Ia=function t(){s(this,t)},Oa=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({}),Aa=function(){var t=function t(){s(this,t)};return t.__NG_ELEMENT_ID__=function(){return xa()},t}(),xa=function(){var t=ge(),e=ue(be().index,t);return function(t){var e=t[11];if(ne(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(qt(e)?e:t)},Na=function(){var t=function t(){s(this,t)};return t.\u0275prov=O({token:t,providedIn:"root",factory:function(){return null}}),t}(),Pa=function t(e){s(this,t),this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")},Da=new Pa("10.0.14"),Ra=function(){function t(){s(this,t)}return c(t,[{key:"supports",value:function(t){return xo(t)}},{key:"create",value:function(t){return new ja(t)}}]),t}(),La=function(t,e){return e},ja=function(){function t(e){s(this,t),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||La}return c(t,[{key:"forEachItem",value:function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)}},{key:"forEachOperation",value:function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<Va(n,r,i)?e:n,a=Va(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}a!==s&&t(o,a,s)}}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachMovedItem",value:function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"forEachIdentityChange",value:function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!xo(t))throw new Error("Error trying to diff '".concat(M(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)r=t[s],i=this._trackByFn(s,r),null!==o&&Object.is(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),Object.is(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r,i=t[Oo()]();!(r=i.next()).done;)e(r.value)}(t,(function(t){i=e._trackByFn(n,t),null!==o&&Object.is(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),Object.is(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++})),this.length=n;return this._truncate(o),this.collection=t,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Fa(e,n),i,r),t}},{key:"_verifyReinsertion",value:function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_moveAfter",value:function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_addAfter",value:function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ua),this._linkedRecords.put(t),t.currentIndex=n,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}},{key:"_addToMoves",value:function(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ua),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),t}(),Fa=function t(e,n){s(this,t),this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Ma=function(){function t(){s(this,t),this._head=null,this._tail=null}return c(t,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}},{key:"remove",value:function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}]),t}(),Ua=function(){function t(){s(this,t),this.map=new Map}return c(t,[{key:"put",value:function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Ma,this.map.set(e,n)),n.add(t)}},{key:"get",value:function(t,e){var n=this.map.get(t);return n?n.get(t,e):null}},{key:"remove",value:function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),t}();function Va(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var qa=function(){function t(){s(this,t)}return c(t,[{key:"supports",value:function(t){return t instanceof Map||No(t)}},{key:"create",value:function(){return new Ha}}]),t}(),Ha=function(){function t(){s(this,t),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return c(t,[{key:"forEachItem",value:function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachChangedItem",value:function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||No(t)))throw new Error("Error trying to diff '".concat(M(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}},{key:"_getOrCreateRecordForKey",value:function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Ba(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach((function(n){return e(t[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),t}(),Ba=function t(e){s(this,t),this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},za=function(){var t=function(){function t(e){s(this,t),this.factories=e}return c(t,[{key:"find",value:function(t){var e,n=this.factories.find((function(e){return e.supports(t)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'"))}}],[{key:"create",value:function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new k,new E]]}}}]),t}();return t.\u0275prov=O({token:t,providedIn:"root",factory:function(){return new t([new Ra])}}),t}(),Wa=function(){var t=function(){function t(e){s(this,t),this.factories=e}return c(t,[{key:"find",value:function(t){var e=this.factories.find((function(e){return e.supports(t)}));if(e)return e;throw new Error("Cannot find a differ supporting object '".concat(t,"'"))}}],[{key:"create",value:function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new k,new E]]}}}]),t}();return t.\u0275prov=O({token:t,providedIn:"root",factory:function(){return new t([new qa])}}),t}(),Qa=[new qa],Ga=new za([new Ra]),Ka=new Wa(Qa),Ya=function(){var t=function t(){s(this,t)};return t.__NG_ELEMENT_ID__=function(){return Xa(t,Sa)},t}(),Xa=function(t,e){return ro(t,e,be(),ge())},Za=function(){var t=function t(){s(this,t)};return t.__NG_ELEMENT_ID__=function(){return Ja(t,Sa)},t}(),Ja=function(t,e){return io(t,e,be(),ge())},$a={},ts=function(t){h(n,t);var e=d(n);function n(t){var r;return s(this,n),(r=e.call(this)).ngModule=t,r}return c(n,[{key:"resolveComponentFactory",value:function(t){var e=Mt(t);return new rs(e,this.ngModule)}}]),n}(ka);function es(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var ns=new rt("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return an}}),rs=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this)).componentDef=t,i.ngModule=r,i.componentType=t.type,i.selector=t.selectors.map(Nr).join(","),i.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],i.isBoundToModule=!!r,i}return c(n,[{key:"create",value:function(t,e,n,r){var i,o,a=(r=r||this.ngModule)?function(t,e){return{get:function(n,r,i){var o=t.get(n,$a,i);return o!==$a||r===$a?o:e.get(n,r,i)}}}(t,r.injector):t,s=a.get(Ia,re),u=a.get(Na,null),c=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(t,e,n){if(ne(t))return t.selectRootElement(e,n===St.ShadowDom);var r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(c,n,this.componentDef.encapsulation):Qr(l,s.createRenderer(null,this.componentDef),function(t){var e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:an,clean:Ii,playerHandler:null,flags:0},p=ni(0,-1,null,1,0,null,null,null,null,null),v=Gr(null,p,d,f,null,null,s,c,u,a);Pe(v,null);try{var y=function(t,e,n,r,i,o){var a=n[1];n[20]=t;var s=Kr(a,null,0,3,null,null),u=s.mergedAttrs=e.hostAttrs;null!==u&&(To(s,u,!0),null!==t&&(Ke(i,t,u),null!==s.classes&&Xi(i,t,s.classes),null!==s.styles&&Yi(i,t,s.styles)));var c=r.createRenderer(t,e),l=Gr(n,ei(e),null,e.onPush?64:16,n[20],s,r,c,void 0);return a.firstCreatePass&&(vn(hn(s,n),a,e.type),fi(a,s),pi(s,n.length,1)),Ei(n,l),n[20]=l}(h,this.componentDef,v,s,c);if(h)if(n)Ke(c,h,["ng-version",Da.full]);else{var g=function(t){for(var e=[],n=[],r=1,i=2;r<t.length;){var o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Ir(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]),m=g.attrs,_=g.classes;m&&Ke(c,h,m),_&&_.length>0&&Xi(c,h,_.join(" "))}if(o=se(p,0),void 0!==e)for(var b=o.projection=[],w=0;w<this.ngContentSelectors.length;w++){var E=e[w];b.push(null!=E?Array.from(E):null)}i=function(t,e,n,r,i){var o=n[1],a=function(t,e,n){var r=be();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),hi(t,r,1),vi(t,e,n));var i=bn(e,t,e.length-1,r);_r(i,e);var o=ae(r,e);return o&&_r(o,e),i}(o,n,e);r.components.push(a),t[8]=a,i&&i.forEach((function(t){return t(a,e)})),e.contentQueries&&e.contentQueries(1,a,n.length-1);var s=be();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Ue(s.index-20);var u=n[1];ui(u,e),ci(u,n,e.hostVars),li(e,a)}return a}(y,this.componentDef,v,d,[ua]),Yr(p,v,null)}finally{Fe()}var C=new is(this.componentType,i,no(Sa,o,v),v,o);return p.node.child=o,C}},{key:"inputs",get:function(){return es(this.componentDef.inputs)}},{key:"outputs",get:function(){return es(this.componentDef.outputs)}}]),n}(Ea),is=function(t){h(n,t);var e=d(n);function n(t,r,i,o,a){var u,c,l,h;return s(this,n),(u=e.call(this)).location=i,u._rootLView=o,u._tNode=a,u.destroyCbs=[],u.instance=r,u.hostView=u.changeDetectorRef=new eo(o),c=o[1],l=o,null==(h=c.node)&&(c.node=h=ii(0,null,2,-1,null,null)),l[6]=h,u.componentType=t,u}return c(n,[{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(t){return t()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(t){this.destroyCbs&&this.destroyCbs.push(t)}},{key:"injector",get:function(){return new Cn(this._tNode,this._rootLView)}}]),n}(function(){return function t(){s(this,t)}}()),os=void 0,as=["en",[["a","p"],["AM","PM"],os],[["AM","PM"],os,os],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],os,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],os,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",os,"{1} 'at' {0}",os],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],ss={};function us(t,e,n){"string"!=typeof e&&(n=e,e=t[ds.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ss[e]=t,n&&(ss[e][ds.ExtraData]=n)}function cs(t){var e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t),n=fs(e);if(n)return n;var r=e.split("-")[0];if(n=fs(r))return n;if("en"===r)return as;throw new Error('Missing locale data for the locale "'.concat(t,'".'))}function ls(t){return cs(t)[ds.CurrencyCode]||null}function hs(t){return cs(t)[ds.PluralCase]}function fs(t){return t in ss||(ss[t]=Y.ng&&Y.ng.common&&Y.ng.common.locales&&Y.ng.common.locales[t]),ss[t]}var ds=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});function ps(t){var e;null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: Expected localeId to be defined"+" [Expected=> null != ".concat(e," <=Actual]"))}(0,e),"string"==typeof t&&t.toLowerCase().replace(/_/g,"-")}var vs=new Map,ys=function(t){h(n,t);var e=d(n);function n(t,r){var i;s(this,n),(i=e.call(this))._parent=r,i._bootstrapComponents=[],i.injector=v(i),i.destroyCbs=[],i.componentFactoryResolver=new ts(v(i));var o=Vt(t),a=t[tt]||null;return a&&ps(a),i._bootstrapComponents=sn(o.bootstrap),i._r3Injector=yo(t,r,[{provide:yt,useValue:v(i)},{provide:ka,useValue:i.componentFactoryResolver}],M(t)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(t),i}return c(n,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ko.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.Default;return t===ko||t===yt||t===it?this:this._r3Injector.get(t,e,n)}},{key:"destroy",value:function(){var t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach((function(t){return t()})),this.destroyCbs=null}},{key:"onDestroy",value:function(t){this.destroyCbs.push(t)}}]),n}(yt),gs=function(t){h(n,t);var e=d(n);function n(t){var r;return s(this,n),(r=e.call(this)).moduleType=t,null!==Vt(t)&&function t(e){if(null!==e.\u0275mod.id){var n=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error("Duplicate module registered for ".concat(t," - ").concat(M(e)," vs ").concat(M(e.name)))})(n,vs.get(n),e),vs.set(n,e)}var r=e.\u0275mod.imports;r instanceof Function&&(r=r()),r&&r.forEach((function(e){return t(e)}))}(t),r}return c(n,[{key:"create",value:function(t){return new ys(this.moduleType,t)}}]),n}(gt);function ms(t,e,n){var r=Se()+t,i=ge();return i[r]===Pr?Po(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function _s(t,e){var n,r=me(),i=t+20;r.firstCreatePass?(n=function(t,e){if(e)for(var n=e.length-1;n>=0;n--){var r=e[n];if(t===r.name)return r}throw new Error("The pipe '".concat(t,"' could not be found!"))}(e,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var o=n.factory||(n.factory=Ut(n.type)),a=lt(jo),s=cn(!1),u=o();return cn(s),lt(a),function(t,e,n,r){var i=n+20;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(r,ge(),t,u),u}function bs(t,e,n,r){var i=ge(),o=function(t,e){return t[e+20]}(i,t);return function(t,e){return Ao.isWrapped(e)&&(e=Ao.unwrap(e),t[ve.lFrame.bindingIndex]=Pr),e}(i,function(t,e){return t[1].data[e+20].pure}(i,t)?function(t,e,n,r,i,o,a){var s=e+n;return function(t,e,n,r){var i=Do(t,e,n);return Do(t,e+1,r)||i}(t,s,i,o)?Po(t,s+2,a?r.call(a,i,o):r(i,o)):function(t,e){var n=t[e];return n===Pr?void 0:n}(t,s+2)}(i,Se(),e,o.transform,n,r,o):o.transform(n,r))}var ws=function(t){h(n,t);var e=d(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return s(this,n),(t=e.call(this)).__isAsync=r,t}return c(n,[{key:"emit",value:function(t){l(g(n.prototype),"next",this).call(this,t)}},{key:"subscribe",value:function(t,e,r){var i,o=function(t){return null},a=function(){return null};t&&"object"==typeof t?(i=this.__isAsync?function(e){setTimeout((function(){return t.next(e)}))}:function(e){t.next(e)},t.error&&(o=this.__isAsync?function(e){setTimeout((function(){return t.error(e)}))}:function(e){t.error(e)}),t.complete&&(a=this.__isAsync?function(){setTimeout((function(){return t.complete()}))}:function(){t.complete()})):(i=this.__isAsync?function(e){setTimeout((function(){return t(e)}))}:function(e){t(e)},e&&(o=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)}),r&&(a=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var s=l(g(n.prototype),"subscribe",this).call(this,i,o,a);return t instanceof f.a&&t.add(s),s}}]),n}(u.a);function Es(){return this._results[Oo()]()}var Cs=function(){function t(){s(this,t),this.dirty=!0,this._results=[],this.changes=new ws,this.length=0;var e=Oo(),n=t.prototype;n[e]||(n[e]=Es)}return c(t,[{key:"map",value:function(t){return this._results.map(t)}},{key:"filter",value:function(t){return this._results.filter(t)}},{key:"find",value:function(t){return this._results.find(t)}},{key:"reduce",value:function(t,e){return this._results.reduce(t,e)}},{key:"forEach",value:function(t){this._results.forEach(t)}},{key:"some",value:function(t){return this._results.some(t)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(t){this._results=function t(e,n){void 0===n&&(n=e);for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),t}(),ks=function(){function t(e){s(this,t),this.queryList=e,this.matches=null}return c(t,[{key:"clone",value:function(){return new t(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),t}(),Ss=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];s(this,t),this.queries=e}return c(t,[{key:"createEmbeddedView",value:function(e){var n=e.queries;if(null!==n){for(var r=null!==e.contentQueries?e.contentQueries[0]:n.length,i=[],o=0;o<r;o++){var a=n.getByIndex(o);i.push(this.queries[a.indexInDeclarationView].clone())}return new t(i)}return null}},{key:"insertView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"detachView",value:function(t){this.dirtyQueriesWithMatches(t)}},{key:"dirtyQueriesWithMatches",value:function(t){for(var e=0;e<this.queries.length;e++)null!==Ls(t,e).matches&&this.queries[e].setDirty()}}]),t}(),Ts=function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;s(this,t),this.predicate=e,this.descendants=n,this.isStatic=r,this.read=i},Is=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];s(this,t),this.queries=e}return c(t,[{key:"elementStart",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}},{key:"elementEnd",value:function(t){for(var e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}},{key:"embeddedTView",value:function(e){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new t(n):null}},{key:"template",value:function(t,e){for(var n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}},{key:"getByIndex",value:function(t){return this.queries[t]}},{key:"track",value:function(t){this.queries.push(t)}},{key:"length",get:function(){return this.queries.length}}]),t}(),Os=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;s(this,t),this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return c(t,[{key:"elementStart",value:function(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}},{key:"elementEnd",value:function(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(t,e){this.elementStart(t,e)}},{key:"embeddedTView",value:function(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}},{key:"isApplyingToNode",value:function(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){for(var e=this._declarationNodeIndex,n=t.parent;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(t,e){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(t,e,As(e,i)),this.matchTNodeWithReadOption(t,e,_n(e,t,i,!1,!1))}else n===Ya?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,_n(e,t,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(t,e,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===Sa||r===Za||r===Ya&&0===e.type)this.addMatch(e.index,-2);else{var i=_n(e,t,r,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,n)}}},{key:"addMatch",value:function(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}]),t}();function As(t,e){var n=t.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function xs(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?no(Sa,t,e):0===t.type?ro(Ya,Sa,t,e):null}(e,t):-2===n?function(t,e,n){return n===Sa?no(Sa,e,t):n===Ya?ro(Ya,Sa,e,t):n===Za?io(Za,Sa,e,t):void 0}(t,e,r):bn(t,t[1],n,e)}function Ns(t,e,n,r){var i=e[19].queries[r];if(null===i.matches){for(var o=t.data,a=n.matches,s=[],u=0;u<a.length;u+=2){var c=a[u];s.push(c<0?null:xs(e,o[c],a[u+1],n.metadata.read))}i.matches=s}return i.matches}function Ps(t){var e=ge(),n=me(),r=Ae();xe(r+1);var i=Ls(n,r);if(t.dirty&&le(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{var o=i.crossesNgTemplate?function t(e,n,r,i){var o=e.queries.getByIndex(r),a=o.matches;if(null!==a)for(var s=Ns(e,n,o,r),u=0;u<a.length;u+=2){var c=a[u];if(c>0)i.push(s[u/2]);else{for(var l=a[u+1],h=n[-c],f=10;f<h.length;f++){var d=h[f];d[17]===d[3]&&t(d[1],d,l,i)}if(null!==h[9])for(var p=h[9],v=0;v<p.length;v++){var y=p[v];t(y[1],y,l,i)}}}return i}(n,e,r,[]):Ns(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Ds(t,e,n,r){!function(t,e,n,r,i,o,a,s){t.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new Is),t.queries.track(new Os(e,n))}(t,new Ts(n,r,!1,i),a.index),function(t,e){var n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,s)),function(t,e){var n=new Cs;ri(t,e,n,n.destroy),null===e[19]&&(e[19]=new Ss),e[19].queries.push(new ks(n))}(t,e)}(me(),ge(),e,n,r,0,be(),t)}function Rs(){return t=ge(),e=Ae(),t[19].queries[e].queryList;var t,e}function Ls(t,e){return t.queries.getByIndex(e)}function js(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.Default,e=oo(!0);if(null!=e||t&S.Optional)return e;throw new Error("No provider for ChangeDetectorRef!")}var Fs=new rt("Application Initializer"),Ms=function(){var t=function(){function t(e){var n=this;s(this,t),this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(t,e){n.resolve=t,n.reject=e}))}return c(t,[{key:"runInitializers",value:function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();zo(i)&&e.push(i)}Promise.all(e).then((function(){n()})).catch((function(e){t.reject(e)})),0===e.length&&n(),this.initialized=!0}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(ft(Fs,8))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t}(),Us=new rt("AppId"),Vs={provide:Us,useFactory:function(){return"".concat(qs()).concat(qs()).concat(qs())},deps:[]};function qs(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Hs=new rt("Platform Initializer"),Bs=new rt("Platform ID"),zs=new rt("appBootstrapListener"),Ws=function(){var t=function(){function t(){s(this,t)}return c(t,[{key:"log",value:function(t){console.log(t)}},{key:"warn",value:function(t){console.warn(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t}(),Qs=new rt("LocaleId"),Gs=new rt("DefaultCurrencyCode"),Ks=function t(e,n){s(this,t),this.ngModuleFactory=e,this.componentFactories=n},Ys=function(t){return new gs(t)},Xs=Ys,Zs=function(t){return Promise.resolve(Ys(t))},Js=function(t){var e=Ys(t),n=sn(Vt(t).declarations).reduce((function(t,e){var n=Mt(e);return n&&t.push(new rs(n)),t}),[]);return new Ks(e,n)},$s=Js,tu=function(t){return Promise.resolve(Js(t))},eu=function(){var t=function(){function t(){s(this,t),this.compileModuleSync=Xs,this.compileModuleAsync=Zs,this.compileModuleAndAllComponentsSync=$s,this.compileModuleAndAllComponentsAsync=tu}return c(t,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(t){}},{key:"getModuleId",value:function(t){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t}(),nu=Promise.resolve(0);function ru(t){"undefined"==typeof Zone?nu.then((function(){t&&t.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var iu=function(){function t(e){var n,r,i=e.enableLongStackTrace,o=void 0!==i&&i,a=e.shouldCoalesceEventChangeDetection,u=void 0!==a&&a;if(s(this,t),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ws(!1),this.onMicrotaskEmpty=new ws(!1),this.onStable=new ws(!1),this.onError=new ws(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=u,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var t=Y.requestAnimationFrame,e=Y.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){var n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);var r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,r=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Y,(function(){t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",(function(){t.lastRequestAnimationFrameId=-1,uu(t),su(t)}),void 0,(function(){}),(function(){}))),t.fakeTopEventTask.invoke()})),uu(t))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:r},onInvokeTask:function(t,e,i,o,a,s){try{return cu(n),t.invokeTask(i,o,a,s)}finally{r&&"eventTask"===o.type&&r(),lu(n)}},onInvoke:function(t,e,r,i,o,a,s){try{return cu(n),t.invoke(r,i,o,a,s)}finally{lu(n)}},onHasTask:function(t,e,r,i){t.hasTask(r,i),e===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,uu(n),su(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,e,r,i){return t.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return c(t,[{key:"run",value:function(t,e,n){return this._inner.run(t,e,n)}},{key:"runTask",value:function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,au,ou,ou);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(t,e,n){return this._inner.runGuarded(t,e,n)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),t}();function ou(){}var au={};function su(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular((function(){return t.onStable.emit(null)}))}finally{t.isStable=!0}}}function uu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function cu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function lu(t){t._nesting--,su(t)}var hu=function(){function t(){s(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ws,this.onMicrotaskEmpty=new ws,this.onStable=new ws,this.onError=new ws}return c(t,[{key:"run",value:function(t,e,n){return t.apply(e,n)}},{key:"runGuarded",value:function(t,e,n){return t.apply(e,n)}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t,e,n,r){return t.apply(e,n)}}]),t}(),fu=function(){var t=function(){function t(e){var n=this;s(this,t),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return c(t,[{key:"_watchAngularEvents",value:function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){t._ngZone.onStable.subscribe({next:function(){iu.assertNotInAngularZone(),ru((function(){t._isZoneStable=!0,t._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var t=this;if(this.isStable())ru((function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1}));else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}})):[]}},{key:"addCallback",value:function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(t){return t.timeoutId!==i})),t(r._didWork,r.getPendingTasks())}),e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(t,e,n){return[]}}]),t}();return t.\u0275fac=function(e){return new(e||t)(ft(iu))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t}(),du=function(){var t=function(){function t(){s(this,t),this._applications=new Map,yu.addToWindow(this)}return c(t,[{key:"registerApplication",value:function(t,e){this._applications.set(t,e)}},{key:"unregisterApplication",value:function(t){this._applications.delete(t)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(t){return this._applications.get(t)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return yu.findTestabilityInTree(this,t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t}();function pu(t){yu=t}var vu,yu=new(function(){function t(){s(this,t)}return c(t,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,e,n){return null}}]),t}()),gu=new rt("AllowMultipleToken"),mu=function t(e,n){s(this,t),this.name=e,this.token=n};function _u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: "+e,i=new rt(r);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=bu();if(!o||o.injector.get(gu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0},{provide:co,useValue:"platform"});!function(t){if(vu&&!vu.destroyed&&!vu.injector.get(gu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");vu=t.get(wu);var e=t.get(Hs,null);e&&e.forEach((function(t){return t()}))}(ko.create({providers:a,name:r}))}return function(t){var e=bu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function bu(){return vu&&!vu.destroyed?vu:null}var wu=function(){var t=function(){function t(e){s(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return c(t,[{key:"bootstrapModuleFactory",value:function(t,e){var n,r,i=this,o=(n=e?e.ngZone:void 0,r=e&&e.ngZoneEventCoalescing||!1,"noop"===n?new hu:("zone.js"===n?void 0:n)||new iu({enableLongStackTrace:Qn(),shouldCoalesceEventChangeDetection:r})),a=[{provide:iu,useValue:o}];return o.run((function(){var e=ko.create({providers:a,parent:i.injector,name:t.moduleType.name}),n=t.create(e),r=n.injector.get(An,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return ku(i._modules,n)})),o.runOutsideAngular((function(){return o.onError.subscribe({next:function(t){r.handleError(t)}})})),function(t,e,r){try{var o=((a=n.injector.get(Ms)).runInitializers(),a.donePromise.then((function(){return ps(n.injector.get(Qs,"en-US")||"en-US"),i._moduleDoBootstrap(n),n})));return zo(o)?o.catch((function(n){throw e.runOutsideAngular((function(){return t.handleError(n)})),n})):o}catch(s){throw e.runOutsideAngular((function(){return t.handleError(s)})),s}var a}(r,o)}))}},{key:"bootstrapModule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Eu({},n);return function(t,e,n){var r=new gs(n);return Promise.resolve(r)}(0,0,t).then((function(t){return e.bootstrapModuleFactory(t,r)}))}},{key:"_moduleDoBootstrap",value:function(t){var e=t.injector.get(Cu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach((function(t){return e.bootstrap(t)}));else{if(!t.instance.ngDoBootstrap)throw new Error("The module ".concat(M(t.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));t.instance.ngDoBootstrap(e)}this._modules.push(t)}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(t){return t.destroy()})),this._destroyListeners.forEach((function(t){return t()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();return t.\u0275fac=function(e){return new(e||t)(ft(ko))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t}();function Eu(t,e){return Array.isArray(e)?e.reduce(Eu,t):Object.assign(Object.assign({},t),e)}var Cu=function(){var t=function(){function t(e,n,r,i,o,a){var u=this;s(this,t),this._zone=e,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Qn(),this._zone.onMicrotaskEmpty.subscribe({next:function(){u._zone.run((function(){u.tick()}))}});var c=new p.a((function(t){u._stable=u._zone.isStable&&!u._zone.hasPendingMacrotasks&&!u._zone.hasPendingMicrotasks,u._zone.runOutsideAngular((function(){t.next(u._stable),t.complete()}))})),l=new p.a((function(t){var e;u._zone.runOutsideAngular((function(){e=u._zone.onStable.subscribe((function(){iu.assertNotInAngularZone(),ru((function(){u._stable||u._zone.hasPendingMacrotasks||u._zone.hasPendingMicrotasks||(u._stable=!0,t.next(!0))}))}))}));var n=u._zone.onUnstable.subscribe((function(){iu.assertInAngularZone(),u._stable&&(u._stable=!1,u._zone.runOutsideAngular((function(){t.next(!1)})))}));return function(){e.unsubscribe(),n.unsubscribe()}}));this.isStable=Object(y.a)(c,l.pipe(Object(m.a)()))}return c(t,[{key:"bootstrap",value:function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof Ea?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(yt),o=n.create(ko.NULL,[],e||n.selector,i);o.onDestroy((function(){r._unloadComponent(o)}));var a=o.injector.get(fu,null);return a&&o.injector.get(du).registerApplication(o.location.nativeElement,a),this._loadComponent(o),Qn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),o}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var n,r=e(this._views);try{for(r.s();!(n=r.n()).done;){n.value.detectChanges()}}catch(a){r.e(a)}finally{r.f()}if(this._enforceNoNewChanges){var i,o=e(this._views);try{for(o.s();!(i=o.n()).done;){i.value.checkNoChanges()}}catch(a){o.e(a)}finally{o.f()}}}catch(s){this._zone.runOutsideAngular((function(){return t._exceptionHandler.handleError(s)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(t){var e=t;this._views.push(e),e.attachToAppRef(this)}},{key:"detachView",value:function(t){var e=t;ku(this._views,e),e.detachFromAppRef()}},{key:"_loadComponent",value:function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(zs,[]).concat(this._bootstrapListeners).forEach((function(e){return e(t)}))}},{key:"_unloadComponent",value:function(t){this.detachView(t.hostView),ku(this.components,t)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(t){return t.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),t}();return t.\u0275fac=function(e){return new(e||t)(ft(iu),ft(Ws),ft(ko),ft(An),ft(ka),ft(Ms))},t.\u0275prov=O({token:t,factory:t.\u0275fac}),t}();function ku(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Su=function t(){s(this,t)},Tu=function t(){s(this,t)},Iu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Ou=function(){var e=function(){function e(t,n){s(this,e),this._compiler=t,this._config=n||Iu}return c(e,[{key:"load",value:function(t){return this.loadAndCompile(t)}},{key:"loadAndCompile",value:function(e){var n=this,r=t(e.split("#"),2),i=r[0],o=r[1];return void 0===o&&(o="default"),a("zn8P")(i).then((function(t){return t[o]})).then((function(t){return Au(t,i,o)})).then((function(t){return n._compiler.compileModuleAsync(t)}))}},{key:"loadFactory",value:function(e){var n=t(e.split("#"),2),r=n[0],i=n[1],o="NgFactory";return void 0===i&&(i="default",o=""),a("zn8P")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then((function(t){return t[i+o]})).then((function(t){return Au(t,r,i)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(ft(eu),ft(Tu,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac}),e}();function Au(t,e,n){if(!t)throw new Error("Cannot find '".concat(n,"' in '").concat(e,"'"));return t}var xu=function(t){return null},Nu=_u(null,"core",[{provide:Bs,useValue:"unknown"},{provide:wu,deps:[ko]},{provide:du,deps:[]},{provide:Ws,deps:[]}]),Pu=[{provide:Cu,useClass:Cu,deps:[iu,Ws,ko,An,ka,Ms]},{provide:ns,deps:[iu],useFactory:function(t){var e=[];return t.onStable.subscribe((function(){for(;e.length;)e.pop()()})),function(t){e.push(t)}}},{provide:Ms,useClass:Ms,deps:[[new E,Fs]]},{provide:eu,useClass:eu,deps:[]},Vs,{provide:za,useFactory:function(){return Ga},deps:[]},{provide:Wa,useFactory:function(){return Ka},deps:[]},{provide:Qs,useFactory:function(t){return ps(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new w(Qs),new E,new k]]},{provide:Gs,useValue:"USD"}],Du=function(){var t=function t(e){s(this,t)};return t.\u0275mod=Dt({type:t}),t.\u0275inj=A({factory:function(e){return new(e||t)(ft(Cu))},providers:Pu}),t}()},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a"),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a((function(n){var r=new i.a,o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},l7GE:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){h(n,t);var e=d(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyError",value:function(t,e){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.complete()}}]),n}(n("7o/Q").a)},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}var o=function(){function t(e,n){s(this,t),this.project=e,this.thisArg=n}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.project,this.thisArg))}}]),t}(),a=function(t){h(n,t);var e=d(n);function n(t,r,i){var o;return s(this,n),(o=e.call(this,t)).project=r,o.count=0,o.thisArg=i||v(o),o}return c(n,[{key:"_next",value:function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(r.a)},mAIw:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return a})),n.d(e,"__decorate",(function(){return s})),n.d(e,"__param",(function(){return u})),n.d(e,"__metadata",(function(){return c})),n.d(e,"__awaiter",(function(){return l})),n.d(e,"__generator",(function(){return h})),n.d(e,"__createBinding",(function(){return f})),n.d(e,"__exportStar",(function(){return d})),n.d(e,"__values",(function(){return p})),n.d(e,"__read",(function(){return v})),n.d(e,"__spread",(function(){return y})),n.d(e,"__spreadArrays",(function(){return g})),n.d(e,"__await",(function(){return m})),n.d(e,"__asyncGenerator",(function(){return _})),n.d(e,"__asyncDelegator",(function(){return b})),n.d(e,"__asyncValues",(function(){return w})),n.d(e,"__makeTemplateObject",(function(){return E})),n.d(e,"__importStar",(function(){return C})),n.d(e,"__importDefault",(function(){return k})),n.d(e,"__classPrivateFieldGet",(function(){return S})),n.d(e,"__classPrivateFieldSet",(function(){return T}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}function d(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}function g(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function _(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=i[t](e)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function w(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}function E(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function C(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function k(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function T(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}}},ofXK:function(n,r,i){"use strict";i.d(r,"a",(function(){return I})),i.d(r,"b",(function(){return gt})),i.d(r,"c",(function(){return v})),i.d(r,"d",(function(){return yt})),i.d(r,"e",(function(){return A})),i.d(r,"f",(function(){return m})),i.d(r,"g",(function(){return x})),i.d(r,"h",(function(){return S})),i.d(r,"i",(function(){return ht})),i.d(r,"j",(function(){return dt})),i.d(r,"k",(function(){return O})),i.d(r,"l",(function(){return y})),i.d(r,"m",(function(){return bt})),i.d(r,"n",(function(){return _t})),i.d(r,"o",(function(){return f})),i.d(r,"p",(function(){return mt})),i.d(r,"q",(function(){return u})),i.d(r,"r",(function(){return ct})),i.d(r,"s",(function(){return l}));var o=i("fXoL"),a=null;function u(){return a}function l(t){a||(a=t)}var f=function t(){s(this,t)},v=new o.q("DocumentToken"),y=function(){var t=function t(){s(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(o.Eb)({factory:g,token:t,providedIn:"platform"}),t}();function g(){return Object(o.Pb)(_)}var m=new o.q("Location Initialized"),_=function(){var t=function(t){h(n,t);var e=d(n);function n(t){var r;return s(this,n),(r=e.call(this))._doc=t,r._init(),r}return c(n,[{key:"_init",value:function(){this.location=u().getLocation(),this._history=u().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return u().getBaseHref(this._doc)}},{key:"onPopState",value:function(t){u().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}},{key:"onHashChange",value:function(t){u().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}},{key:"pushState",value:function(t,e,n){b()?this._history.pushState(t,e,n):this.location.hash=n}},{key:"replaceState",value:function(t,e,n){b()?this._history.replaceState(t,e,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){this.location.pathname=t}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),n}(y);return t.\u0275fac=function(e){return new(e||t)(o.Pb(v))},t.\u0275prov=Object(o.Eb)({factory:w,token:t,providedIn:"platform"}),t}();function b(){return!!window.history.pushState}function w(){return new _(Object(o.Pb)(v))}function E(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function C(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function k(t){return t&&"?"!==t[0]?"?"+t:t}var S=function(){var t=function t(){s(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(o.Eb)({factory:T,token:t,providedIn:"root"}),t}();function T(t){var e=Object(o.Pb)(v).location;return new O(Object(o.Pb)(y),e&&e.origin||"")}var I=new o.q("appBaseHref"),O=function(){var t=function(t){h(n,t);var e=d(n);function n(t,r){var i;if(s(this,n),(i=e.call(this))._platformLocation=t,null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,p(i)}return c(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(t){return E(this._baseHref,t)}},{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._platformLocation.pathname+k(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?"".concat(e).concat(n):e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+k(r));this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+k(r));this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(S);return t.\u0275fac=function(e){return new(e||t)(o.Pb(y),o.Pb(I,8))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac}),t}(),A=function(){var t=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this))._platformLocation=t,i._baseHref="",null!=r&&(i._baseHref=r),i}return c(n,[{key:"onPopState",value:function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}},{key:"prepareExternalUrl",value:function(t){var e=E(this._baseHref,t);return e.length>0?"#"+e:e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+k(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+k(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(S);return t.\u0275fac=function(e){return new(e||t)(o.Pb(y),o.Pb(I,8))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac}),t}(),x=function(){var t=function(){function t(e,n){var r=this;s(this,t),this._subject=new o.n,this._urlChangeListeners=[],this._platformStrategy=e;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=C(P(i)),this._platformStrategy.onPopState((function(t){r._subject.emit({url:r.path(!0),pop:!0,state:t.state,type:t.type})}))}return c(t,[{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(t))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(t+k(e))}},{key:"normalize",value:function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,P(e)))}},{key:"prepareExternalUrl",value:function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}},{key:"go",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+k(e)),n)}},{key:"replaceState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+k(e)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(t){var e=this;this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe((function(t){e._notifyUrlChangeListeners(t.url,t.state)})))}},{key:"_notifyUrlChangeListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(t,e)}))}},{key:"subscribe",value:function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Pb(S),o.Pb(y))},t.normalizeQueryParams=k,t.joinWithSlash=E,t.stripTrailingSlash=C,t.\u0275prov=Object(o.Eb)({factory:N,token:t,providedIn:"root"}),t}();function N(){return new x(Object(o.Pb)(S),Object(o.Pb)(y))}function P(t){return t.replace(/\/index.html$/,"")}var D=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),R=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),L=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),j=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),F=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function M(t,e){return z(Object(o.ib)(t)[o.Z.DateFormat],e)}function U(t,e){return z(Object(o.ib)(t)[o.Z.TimeFormat],e)}function V(t,e){return z(Object(o.ib)(t)[o.Z.DateTimeFormat],e)}function q(t,e){var n=Object(o.ib)(t),r=n[o.Z.NumberSymbols][e];if(void 0===r){if(e===F.CurrencyDecimal)return n[o.Z.NumberSymbols][F.Decimal];if(e===F.CurrencyGroup)return n[o.Z.NumberSymbols][F.Group]}return r}var H=o.lb;function B(t){if(!t[o.Z.ExtraData])throw new Error('Missing extra locale data for the locale "'.concat(t[o.Z.LocaleId],'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.'))}function z(t,e){for(var n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function W(e){var n=t(e.split(":"),2);return{hours:+n[0],minutes:+n[1]}}var Q=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,G={},K=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Y=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),X=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),Z=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function J(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,(function(t,n){return null!=e&&n in e?e[n]:t}))),t}function $(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));for(var a=String(t);a.length<e;)a="0"+a;return r&&(a=a.substr(a.length-e)),o+a}function tt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(o,a){var s,u=function(t,e){switch(t){case X.FullYear:return e.getFullYear();case X.Month:return e.getMonth();case X.Date:return e.getDate();case X.Hours:return e.getHours();case X.Minutes:return e.getMinutes();case X.Seconds:return e.getSeconds();case X.FractionalSeconds:return e.getMilliseconds();case X.Day:return e.getDay();default:throw new Error('Unknown DateType value "'.concat(t,'".'))}}(t,o);if((n>0||u>-n)&&(u+=n),t===X.Hours)0===u&&-12===n&&(u=12);else if(t===X.FractionalSeconds)return s=e,$(u,3).substr(0,s);var c=q(a,F.MinusSign);return $(u,e,c,r,i)}}function et(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.Format,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(a,s){return function(e,n,r,i,a,s){switch(r){case Z.Months:return function(t,e,n){var r=Object(o.ib)(t),i=z([r[o.Z.MonthsFormat],r[o.Z.MonthsStandalone]],e);return z(i,n)}(n,a,i)[e.getMonth()];case Z.Days:return function(t,e,n){var r=Object(o.ib)(t),i=z([r[o.Z.DaysFormat],r[o.Z.DaysStandalone]],e);return z(i,n)}(n,a,i)[e.getDay()];case Z.DayPeriods:var u=e.getHours(),c=e.getMinutes();if(s){var l=function(t){var e=Object(o.ib)(t);return B(e),(e[o.Z.ExtraData][2]||[]).map((function(t){return"string"==typeof t?W(t):[W(t[0]),W(t[1])]}))}(n),h=function(t,e,n){var r=Object(o.ib)(t);B(r);var i=z([r[o.Z.ExtraData][0],r[o.Z.ExtraData][1]],e)||[];return z(i,n)||[]}(n,a,i),f=l.findIndex((function(e){if(Array.isArray(e)){var n=t(e,2),r=n[0],i=n[1],o=u>=r.hours&&c>=r.minutes,a=u<i.hours||u===i.hours&&c<i.minutes;if(r.hours<i.hours){if(o&&a)return!0}else if(o||a)return!0}else if(e.hours===u&&e.minutes===c)return!0;return!1}));if(-1!==f)return h[f]}return function(t,e,n){var r=Object(o.ib)(t),i=z([r[o.Z.DayPeriodsFormat],r[o.Z.DayPeriodsStandalone]],e);return z(i,n)}(n,a,i)[u<12?0:1];case Z.Eras:return function(t,e){return z(Object(o.ib)(t)[o.Z.Eras],e)}(n,i)[e.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+r)}}(a,s,e,n,r,i)}}function nt(t){return function(e,n,r){var i=-1*r,o=q(n,F.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Y.Short:return(i>=0?"+":"")+$(a,2,o)+$(Math.abs(i%60),2,o);case Y.ShortGMT:return"GMT"+(i>=0?"+":"")+$(a,1,o);case Y.Long:return"GMT"+(i>=0?"+":"")+$(a,2,o)+":"+$(Math.abs(i%60),2,o);case Y.Extended:return 0===r?"Z":(i>=0?"+":"")+$(a,2,o)+":"+$(Math.abs(i%60),2,o);default:throw new Error('Unknown zone width "'.concat(t,'"'))}}}function rt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var i,o,a,s;if(e){var u=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,c=n.getDate();i=1+Math.floor((c+u)/7)}else{var l=(o=n.getFullYear(),a=new Date(o,0,1).getDay(),new Date(o,0,1+(a<=4?4:11)-a)),h=(s=n,new Date(s.getFullYear(),s.getMonth(),s.getDate()+(4-s.getDay()))).getTime()-l.getTime();i=1+Math.round(h/6048e5)}return $(i,t,q(r,F.MinusSign))}}var it={};function ot(t,e){t=t.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function at(t){return t instanceof Date&&!isNaN(t.valueOf())}var st=function t(){s(this,t)},ut=function(){var t=function(t){h(n,t);var e=d(n);function n(t){var r;return s(this,n),(r=e.call(this)).locale=t,r}return c(n,[{key:"getPluralCategory",value:function(t,e){switch(H(e||this.locale)(t)){case D.Zero:return"zero";case D.One:return"one";case D.Two:return"two";case D.Few:return"few";case D.Many:return"many";default:return"other"}}}]),n}(st);return t.\u0275fac=function(e){return new(e||t)(o.Pb(o.u))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac}),t}();function ct(n,r){r=encodeURIComponent(r);var i,o=e(n.split(";"));try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.indexOf("="),u=t(-1==s?[a,""]:[a.slice(0,s),a.slice(s+1)],2),c=u[0],l=u[1];if(c.trim()===r)return decodeURIComponent(l)}}catch(h){o.e(h)}finally{o.f()}return null}var lt=function(){function t(e,n,r,i){s(this,t),this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}return c(t,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),t}(),ht=function(){var t=function(){function t(e,n,r){s(this,t),this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return c(t,[{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'. NgFor only supports binding to Iterables such as Arrays."))}}var e;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(t){var e=this,n=[];t.forEachOperation((function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._template,new lt(null,e._ngForOf,-1,-1),null===i?void 0:i),a=new ft(t,o);n.push(a)}else if(null==i)e._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=e._viewContainer.get(r);e._viewContainer.move(s,i);var u=new ft(t,s);n.push(u)}}));for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,o=this._viewContainer.length;i<o;i++){var a=this._viewContainer.get(i);a.context.index=i,a.context.count=o,a.context.ngForOf=this._ngForOf}t.forEachIdentityChange((function(t){e._viewContainer.get(t.currentIndex).context.$implicit=t.item}))}},{key:"_perViewChange",value:function(t,e){t.context.$implicit=e.item}},{key:"ngForOf",set:function(t){this._ngForOf=t,this._ngForOfDirty=!0}},{key:"ngForTrackBy",set:function(t){Object(o.U)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(t),". See https://angular.io/api/common/NgForOf#change-propagation for more information.")),this._trackByFn=t},get:function(){return this._trackByFn}},{key:"ngForTemplate",set:function(t){t&&(this._template=t)}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Ib(o.P),o.Ib(o.K),o.Ib(o.s))},t.\u0275dir=o.Db({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t}(),ft=function t(e,n){s(this,t),this.record=e,this.view=n},dt=function(){var t=function(){function t(e,n){s(this,t),this._viewContainer=e,this._context=new pt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return c(t,[{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}},{key:"ngIf",set:function(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}},{key:"ngIfThen",set:function(t){vt("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(t){vt("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}}],[{key:"ngTemplateContextGuard",value:function(t,e){return!0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Ib(o.P),o.Ib(o.K))},t.\u0275dir=o.Db({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t}(),pt=function t(){s(this,t),this.$implicit=null,this.ngIf=null};function vt(t,e){if(e&&!e.createEmbeddedView)throw new Error("".concat(t," must be a TemplateRef, but received '").concat(Object(o.tb)(e),"'."))}var yt=function(){var e=function(){function e(t){s(this,e),this.locale=t}return c(e,[{key:"transform",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mediumDate",i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(null==n||""===n||n!=n)return null;try{return function(e,n,r,i){var a=function(e){if(at(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){e=e.trim();var n,r=parseFloat(e);if(!isNaN(e-r))return new Date(r);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var i=t(e.split("-").map((function(t){return+t})),3),o=i[0],a=i[1],s=i[2];return new Date(o,a-1,s)}if(n=e.match(Q))return function(t){var e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));var a=Number(t[4]||0)-n,s=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,a,s,u,c),e}(n)}var u=new Date(e);if(!at(u))throw new Error('Unable to convert "'.concat(e,'" into a date'));return u}(e);n=function t(e,n){var r=function(t){return Object(o.ib)(t)[o.Z.LocaleId]}(e);if(G[r]=G[r]||{},G[r][n])return G[r][n];var i="";switch(n){case"shortDate":i=M(e,j.Short);break;case"mediumDate":i=M(e,j.Medium);break;case"longDate":i=M(e,j.Long);break;case"fullDate":i=M(e,j.Full);break;case"shortTime":i=U(e,j.Short);break;case"mediumTime":i=U(e,j.Medium);break;case"longTime":i=U(e,j.Long);break;case"fullTime":i=U(e,j.Full);break;case"short":var a=t(e,"shortTime"),s=t(e,"shortDate");i=J(V(e,j.Short),[a,s]);break;case"medium":var u=t(e,"mediumTime"),c=t(e,"mediumDate");i=J(V(e,j.Medium),[u,c]);break;case"long":var l=t(e,"longTime"),h=t(e,"longDate");i=J(V(e,j.Long),[l,h]);break;case"full":var f=t(e,"fullTime"),d=t(e,"fullDate");i=J(V(e,j.Full),[f,d])}return i&&(G[r][n]=i),i}(r,n)||n;for(var s,u=[];n;){if(!(s=K.exec(n))){u.push(n);break}var c=(u=u.concat(s.slice(1))).pop();if(!c)break;n=c}var l=a.getTimezoneOffset();i&&(l=ot(i,l),a=function(t,e,n){var r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(ot(e,r)-r))}(a,i));var h="";return u.forEach((function(t){var e=function(t){if(it[t])return it[t];var e;switch(t){case"G":case"GG":case"GGG":e=et(Z.Eras,L.Abbreviated);break;case"GGGG":e=et(Z.Eras,L.Wide);break;case"GGGGG":e=et(Z.Eras,L.Narrow);break;case"y":e=tt(X.FullYear,1,0,!1,!0);break;case"yy":e=tt(X.FullYear,2,0,!0,!0);break;case"yyy":e=tt(X.FullYear,3,0,!1,!0);break;case"yyyy":e=tt(X.FullYear,4,0,!1,!0);break;case"M":case"L":e=tt(X.Month,1,1);break;case"MM":case"LL":e=tt(X.Month,2,1);break;case"MMM":e=et(Z.Months,L.Abbreviated);break;case"MMMM":e=et(Z.Months,L.Wide);break;case"MMMMM":e=et(Z.Months,L.Narrow);break;case"LLL":e=et(Z.Months,L.Abbreviated,R.Standalone);break;case"LLLL":e=et(Z.Months,L.Wide,R.Standalone);break;case"LLLLL":e=et(Z.Months,L.Narrow,R.Standalone);break;case"w":e=rt(1);break;case"ww":e=rt(2);break;case"W":e=rt(1,!0);break;case"d":e=tt(X.Date,1);break;case"dd":e=tt(X.Date,2);break;case"E":case"EE":case"EEE":e=et(Z.Days,L.Abbreviated);break;case"EEEE":e=et(Z.Days,L.Wide);break;case"EEEEE":e=et(Z.Days,L.Narrow);break;case"EEEEEE":e=et(Z.Days,L.Short);break;case"a":case"aa":case"aaa":e=et(Z.DayPeriods,L.Abbreviated);break;case"aaaa":e=et(Z.DayPeriods,L.Wide);break;case"aaaaa":e=et(Z.DayPeriods,L.Narrow);break;case"b":case"bb":case"bbb":e=et(Z.DayPeriods,L.Abbreviated,R.Standalone,!0);break;case"bbbb":e=et(Z.DayPeriods,L.Wide,R.Standalone,!0);break;case"bbbbb":e=et(Z.DayPeriods,L.Narrow,R.Standalone,!0);break;case"B":case"BB":case"BBB":e=et(Z.DayPeriods,L.Abbreviated,R.Format,!0);break;case"BBBB":e=et(Z.DayPeriods,L.Wide,R.Format,!0);break;case"BBBBB":e=et(Z.DayPeriods,L.Narrow,R.Format,!0);break;case"h":e=tt(X.Hours,1,-12);break;case"hh":e=tt(X.Hours,2,-12);break;case"H":e=tt(X.Hours,1);break;case"HH":e=tt(X.Hours,2);break;case"m":e=tt(X.Minutes,1);break;case"mm":e=tt(X.Minutes,2);break;case"s":e=tt(X.Seconds,1);break;case"ss":e=tt(X.Seconds,2);break;case"S":e=tt(X.FractionalSeconds,1);break;case"SS":e=tt(X.FractionalSeconds,2);break;case"SSS":e=tt(X.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=nt(Y.Short);break;case"ZZZZZ":e=nt(Y.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=nt(Y.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=nt(Y.Long);break;default:return null}return it[t]=e,e}(t);h+=e?e(a,r,l):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),h}(n,r,a||this.locale,i)}catch(s){throw function(t,e){return Error("InvalidPipeArgument: '".concat(e,"' for pipe '").concat(Object(o.tb)(t),"'"))}(e,s.message)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Ib(o.u))},e.\u0275pipe=o.Hb({name:"date",type:e,pure:!0}),e}(),gt=function(){var t=function t(){s(this,t)};return t.\u0275mod=o.Gb({type:t}),t.\u0275inj=o.Fb({factory:function(e){return new(e||t)},providers:[{provide:st,useClass:ut}]}),t}(),mt="browser";function _t(t){return"server"===t}var bt=function(){var t=function t(){s(this,t)};return t.\u0275prov=Object(o.Eb)({token:t,providedIn:"root",factory:function(){return new wt(Object(o.Pb)(v),window,Object(o.Pb)(o.m))}}),t}(),wt=function(){function t(e,n,r){s(this,t),this.document=e,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return c(t,[{key:"setOffset",value:function(t){this.offset=Array.isArray(t)?function(){return t}:t}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}},{key:"scrollToAnchor",value:function(t){if(this.supportsScrolling()){var e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}},{key:"setHistoryScrollRestoration",value:function(t){if(this.supportScrollRestoration()){var e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}},{key:"scrollToElement",value:function(t){var e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"supportScrollRestoration",value:function(){try{if(!this.window||!this.window.scrollTo)return!1;var t=Et(this.window.history)||Et(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(e){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window.scrollTo}catch(t){return!1}}}]),t}();function Et(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}},pLZG:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new o(t,e))}}var o=function(){function t(e,n){s(this,t),this.predicate=e,this.thisArg=n}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new a(t,this.predicate,this.thisArg))}}]),t}(),a=function(t){h(n,t);var e=d(n);function n(t,r,i){var o;return s(this,n),(o=e.call(this,t)).predicate=r,o.thisArg=i,o.count=0,o}return c(n,[{key:"_next",value:function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}]),n}(r.a)},pxpQ:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r,i=n("7o/Q"),o=n("EY2u"),a=n("LRne"),u=n("z6cu"),l=((r=function(){function t(e,n,r){s(this,t),this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}return c(t,[{key:"observe",value:function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}},{key:"do",value:function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}},{key:"accept",value:function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return Object(a.a)(this.value);case"E":return Object(u.a)(this.error);case"C":return Object(o.b)()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}},{key:"createError",value:function(e){return new t("E",void 0,e)}},{key:"createComplete",value:function(){return t.completeNotification}}]),t}()).completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r);function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new p(t,e))}}var p=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(this,t),this.scheduler=e,this.delay=n}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new v(t,this.scheduler,this.delay))}}]),t}(),v=function(t){h(n,t);var e=d(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return s(this,n),(i=e.call(this,t)).scheduler=r,i.delay=o,i}return c(n,[{key:"scheduleMessage",value:function(t){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new y(t,this.destination)))}},{key:"_next",value:function(t){this.scheduleMessage(l.createNext(t))}},{key:"_error",value:function(t){this.scheduleMessage(l.createError(t)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(l.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()}}]),n}(i.a),y=function t(e,n){s(this,t),this.notification=e,this.destination=n}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.r(e),n.d(e,"LogLevel",(function(){return a})),n.d(e,"Logger",(function(){return h})),n.d(e,"setLogLevel",(function(){return f})),n.d(e,"setUserLogHandler",(function(){return d}));var o=[],a=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),s={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},u=a.INFO,c=((i={})[a.DEBUG]="log",i[a.VERBOSE]="log",i[a.INFO]="info",i[a.WARN]="warn",i[a.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in a))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.DEBUG],t)),this._logHandler.apply(this,r([this,a.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.VERBOSE],t)),this._logHandler.apply(this,r([this,a.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.INFO],t)),this._logHandler.apply(this,r([this,a.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.WARN],t)),this._logHandler.apply(this,r([this,a.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.ERROR],t)),this._logHandler.apply(this,r([this,a.ERROR],t))},t}();function f(t){o.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:a[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},quSY:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r,i,o=n("DH7j"),a=n("XoHu"),u=n("n6bG"),l=function(){function t(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map((function(t,e){return"".concat(e+1,") ").concat(t.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),h=((i=function(){function t(e){s(this,t),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return c(t,[{key:"unsubscribe",value:function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,i=this._unsubscribe,s=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var c=0;c<n.length;++c)n[c].remove(this);if(Object(u.a)(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(v){e=v instanceof l?f(v.errors):[v]}}if(Object(o.a)(s))for(var h=-1,d=s.length;++h<d;){var p=s[h];if(Object(a.a)(p))try{p.unsubscribe()}catch(v){e=e||[],v instanceof l?e=e.concat(f(v.errors)):e.push(v)}}if(e)throw new l(e)}}},{key:"add",value:function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}]),t}()).EMPTY=((r=new i).closed=!0,r),i);function f(t){return t.reduce((function(t,e){return t.concat(e instanceof l?e.errors:e)}),[])}},spgP:function(t,e,n){"use strict";n.d(e,"a",(function(){return q})),n.d(e,"b",(function(){return j})),n.d(e,"c",(function(){return L})),n.d(e,"d",(function(){return D})),n.d(e,"e",(function(){return M})),n.d(e,"f",(function(){return R}));var r=n("3N8a"),i=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return c(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0?l(g(n.prototype),"schedule",this).call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}},{key:"execute",value:function(t,e){return e>0||this.closed?l(g(n.prototype),"execute",this).call(this,t,e):this._execute(t,e)}},{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?l(g(n.prototype),"requestAsyncId",this).call(this,t,e,r):t.flush(this)}}]),n}(r.a),o=n("IjjT"),a=new(function(t){h(n,t);var e=d(n);function n(){return s(this,n),e.apply(this,arguments)}return n}(o.a))(i),u=n("D0XW"),f=n("vkgz"),p=n("HDdC"),v=1,y=Promise.resolve(),m={};function _(t){return t in m&&(delete m[t],!0)}var b=function(t){var e=v++;return m[e]=!0,y.then((function(){return _(e)&&t()})),e},w=function(t){_(t)},E=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i}return c(n,[{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?l(g(n.prototype),"requestAsyncId",this).call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=b(t.flush.bind(t,null))))}},{key:"recycleAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return l(g(n.prototype),"recycleAsyncId",this).call(this,t,e,r);0===t.actions.length&&(w(e),t.scheduled=void 0)}}]),n}(r.a),C=new(function(t){h(n,t);var e=d(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"flush",value:function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}}}]),n}(o.a))(E),k=n("DH7j"),S=function(t){h(n,t);var e=d(n);function n(t){var r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C;return s(this,n),(r=e.call(this)).source=t,r.delayTime=o,r.scheduler=a,i=o,(Object(k.a)(i)||!(i-parseFloat(i)+1>=0)||o<0)&&(r.delayTime=0),a&&"function"==typeof a.schedule||(r.scheduler=C),r}return c(n,[{key:"_subscribe",value:function(t){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:t})}}],[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C;return new n(t,e,r)}},{key:"dispatch",value:function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))}}]),n}(p.a),T=function(){function t(e,n){s(this,t),this.scheduler=e,this.delay=n}return c(t,[{key:"call",value:function(t,e){return new S(e,this.delay,this.scheduler).subscribe(t)}}]),t}(),I=n("pxpQ"),O=n("fXoL"),A=n("Wcq6");function x(){}var N=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;s(this,t),this.zone=e,this.delegate=n}return c(t,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(t,e,n){var r=this.zone;return this.delegate.schedule((function(e){var n=this;r.runGuarded((function(){t.apply(n,[e])}))}),e,n)}}]),t}(),P=function(){function t(e){s(this,t),this.zone=e,this.task=null}return c(t,[{key:"call",value:function(t,e){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run((function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",x,{},x,x)})),e.pipe(Object(f.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}},{key:"unscheduleTask",value:function(){var t=this;setTimeout((function(){null!=t.task&&"scheduled"===t.task.state&&(t.task.invoke(),t.task=null)}),10)}}]),t}(),D=function t(e){s(this,t),this.ngZone=e,this.outsideAngular=e.runOutsideAngular((function(){return new N(Zone.current)})),this.insideAngular=e.run((function(){return new N(Zone.current,u.a)}))};function R(t){return function(e){return(e=e.lift(new P(t.ngZone))).pipe(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new T(t,e))}}(t.outsideAngular),Object(I.a)(t.insideAngular))}}var L=new O.q("angularfire2.app.options"),j=new O.q("angularfire2.app.nameOrConfig"),F=new O.O("6.0.2");function M(t,e,n){var r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",A.apps.filter((function(t){return t&&t.name===r.name}))[0]||e.runOutsideAngular((function(){return Object(A.initializeApp)(t,r)}))}var U,V={provide:function t(){s(this,t)},useFactory:M,deps:[L,O.z,[new O.A,j]]},q=((U=function(){function t(e){s(this,t),Object(A.registerVersion)("angularfire",F.full,e.toString()),Object(A.registerVersion)("angular",O.N.full)}return c(t,null,[{key:"initializeApp",value:function(e,n){return{ngModule:t,providers:[{provide:L,useValue:e},{provide:j,useValue:n}]}}}]),t}()).\u0275mod=O.Gb({type:U}),U.\u0275inj=O.Fb({factory:function(t){return new(t||U)(O.Pb(O.B))},providers:[V]}),U)},"tk/3":function(e,n,r){"use strict";r.d(n,"a",(function(){return P})),r.d(n,"b",(function(){return G}));var o=r("fXoL"),a=r("LRne"),u=r("HDdC"),l=r("bOdf"),f=r("pLZG"),p=r("lJxs"),v=r("ofXK"),y=function t(){s(this,t)},g=function t(){s(this,t)},m=function(){function t(e){var n=this;s(this,t),this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){n.headers=new Map,e.split("\n").forEach((function(t){var e=t.indexOf(":");if(e>0){var r=t.slice(0,e),i=r.toLowerCase(),o=t.slice(e+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(o):n.headers.set(i,[o])}}))}:function(){n.headers=new Map,Object.keys(e).forEach((function(t){var r=e[t],i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(t,i))}))}:this.headers=new Map}return c(t,[{key:"has",value:function(t){return this.init(),this.headers.has(t.toLowerCase())}},{key:"get",value:function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(t){return this.init(),this.headers.get(t.toLowerCase())||null}},{key:"append",value:function(t,e){return this.clone({name:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({name:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({name:t,value:e,op:"d"})}},{key:"maybeSetNormalizedName",value:function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}},{key:"init",value:function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(t){return e.applyUpdate(t)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach((function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))}))}},{key:"clone",value:function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}},{key:"applyUpdate",value:function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var r=("a"===t.op?this.headers.get(e):void 0)||[];r.push.apply(r,i(n)),this.headers.set(e,r);break;case"d":var o=t.value;if(o){var a=this.headers.get(e);if(!a)return;0===(a=a.filter((function(t){return-1===o.indexOf(t)}))).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}else this.headers.delete(e),this.normalizedNames.delete(e)}}},{key:"forEach",value:function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return t(e.normalizedNames.get(n),e.headers.get(n))}))}}]),t}(),_=function(){function t(){s(this,t)}return c(t,[{key:"encodeKey",value:function(t){return b(t)}},{key:"encodeValue",value:function(t){return b(t)}},{key:"decodeKey",value:function(t){return decodeURIComponent(t)}},{key:"decodeValue",value:function(t){return decodeURIComponent(t)}}]),t}();function b(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var w=function(){function e(){var n,r,i,o=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s(this,e),this.updates=null,this.cloneFrom=null,this.encoder=a.encoder||new _,a.fromString){if(a.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(n=a.fromString,r=this.encoder,i=new Map,n.length>0&&n.split("&").forEach((function(e){var n=e.indexOf("="),o=t(-1==n?[r.decodeKey(e),""]:[r.decodeKey(e.slice(0,n)),r.decodeValue(e.slice(n+1))],2),a=o[0],s=o[1],u=i.get(a)||[];u.push(s),i.set(a,u)})),i)}else a.fromObject?(this.map=new Map,Object.keys(a.fromObject).forEach((function(t){var e=a.fromObject[t];o.map.set(t,Array.isArray(e)?e:[e])}))):this.map=null}return c(e,[{key:"has",value:function(t){return this.init(),this.map.has(t)}},{key:"get",value:function(t){this.init();var e=this.map.get(t);return e?e[0]:null}},{key:"getAll",value:function(t){return this.init(),this.map.get(t)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(t,e){return this.clone({param:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({param:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({param:t,value:e,op:"d"})}},{key:"toString",value:function(){var t=this;return this.init(),this.keys().map((function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map((function(e){return n+"="+t.encoder.encodeValue(e)})).join("&")})).filter((function(t){return""!==t})).join("&")}},{key:"clone",value:function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n}},{key:"init",value:function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(e){return t.map.set(e,t.cloneFrom.map.get(e))})),this.updates.forEach((function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(e.value),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(e.value);-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}})),this.cloneFrom=this.updates=null)}}]),e}();function E(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function C(t){return"undefined"!=typeof Blob&&t instanceof Blob}function k(t){return"undefined"!=typeof FormData&&t instanceof FormData}var S=function(){function t(e,n,r,i){var o;if(s(this,t),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.params&&(this.params=o.params)),this.headers||(this.headers=new m),this.params){var a=this.params.toString();if(0===a.length)this.urlWithParams=n;else{var u=n.indexOf("?");this.urlWithParams=n+(-1===u?"?":u<n.length-1?"&":"")+a}}else this.params=new w,this.urlWithParams=n}return c(t,[{key:"serializeBody",value:function(){return null===this.body?null:E(this.body)||C(this.body)||k(this.body)||"string"==typeof this.body?this.body:this.body instanceof w?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||k(this.body)?null:C(this.body)?this.body.type||null:E(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof w?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,s=void 0!==e.reportProgress?e.reportProgress:this.reportProgress,u=e.headers||this.headers,c=e.params||this.params;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((function(t,n){return t.set(n,e.setHeaders[n])}),u)),e.setParams&&(c=Object.keys(e.setParams).reduce((function(t,n){return t.set(n,e.setParams[n])}),c)),new t(n,r,o,{params:c,headers:u,reportProgress:s,responseType:i,withCredentials:a})}}]),t}(),T=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),I=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";s(this,t),this.headers=e.headers||new m,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300},O=function(t){h(n,t);var e=d(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,n),(t=e.call(this,r)).type=T.ResponseHeader,t}return c(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(I),A=function(t){h(n,t);var e=d(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(this,n),(t=e.call(this,r)).type=T.Response,t.body=void 0!==r.body?r.body:null,t}return c(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}(I),x=function(t){h(n,t);var e=d(n);function n(t){var r;return s(this,n),(r=e.call(this,t,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):"Http failure response for ".concat(t.url||"(unknown url)",": ").concat(t.status," ").concat(t.statusText),r.error=t.error||null,r}return n}(I);function N(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var P=function(){var t=function(){function t(e){s(this,t),this.handler=e}return c(t,[{key:"request",value:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t instanceof S)n=t;else{var o=void 0;o=i.headers instanceof m?i.headers:new m(i.headers);var s=void 0;i.params&&(s=i.params instanceof w?i.params:new w({fromObject:i.params})),n=new S(t,e,void 0!==i.body?i.body:null,{headers:o,params:s,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var u=Object(a.a)(n).pipe(Object(l.a)((function(t){return r.handler.handle(t)})));if(t instanceof S||"events"===i.observe)return u;var c=u.pipe(Object(f.a)((function(t){return t instanceof A})));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return c.pipe(Object(p.a)((function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body})));case"blob":return c.pipe(Object(p.a)((function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body})));case"text":return c.pipe(Object(p.a)((function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body})));case"json":default:return c.pipe(Object(p.a)((function(t){return t.body})))}case"response":return c;default:throw new Error("Unreachable: unhandled observe type ".concat(i.observe,"}"))}}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",t,e)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",t,e)}},{key:"head",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",t,e)}},{key:"jsonp",value:function(t,e){return this.request("JSONP",t,{params:(new w).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",t,e)}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",t,N(n,e))}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",t,N(n,e))}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",t,N(n,e))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Pb(y))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac}),t}(),D=function(){function t(e,n){s(this,t),this.next=e,this.interceptor=n}return c(t,[{key:"handle",value:function(t){return this.interceptor.intercept(t,this.next)}}]),t}(),R=new o.q("HTTP_INTERCEPTORS"),L=function(){var t=function(){function t(){s(this,t)}return c(t,[{key:"intercept",value:function(t,e){return e.handle(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac}),t}(),j=/^\)\]\}',?\n/,F=function t(){s(this,t)},M=function(){var t=function(){function t(){s(this,t)}return c(t,[{key:"build",value:function(){return new XMLHttpRequest}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac}),t}(),U=function(){var t=function(){function t(e){s(this,t),this.xhrFactory=e}return c(t,[{key:"handle",value:function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new u.a((function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((function(t,e){return r.setRequestHeader(t,e.join(","))})),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var o=t.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new m(r.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new O({headers:i,status:e,statusText:n,url:o})},c=function(){var e=u(),i=e.headers,o=e.status,a=e.statusText,s=e.url,c=null;204!==o&&(c=void 0===r.response?r.responseText:r.response),0===o&&(o=c?200:0);var l=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof c){var h=c;c=c.replace(j,"");try{c=""!==c?JSON.parse(c):null}catch(f){c=h,l&&(l=!1,c={error:f,text:c})}}l?(n.next(new A({body:c,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new x({error:c,headers:i,status:o,statusText:a,url:s||void 0}))},l=function(t){var e=u().url,i=new x({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error",url:e||void 0});n.error(i)},h=!1,f=function(e){h||(n.next(u()),h=!0);var i={type:T.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},d=function(t){var e={type:T.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",c),r.addEventListener("error",l),t.reportProgress&&(r.addEventListener("progress",f),null!==a&&r.upload&&r.upload.addEventListener("progress",d)),r.send(a),n.next({type:T.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("load",c),t.reportProgress&&(r.removeEventListener("progress",f),null!==a&&r.upload&&r.upload.removeEventListener("progress",d)),r.readyState!==r.DONE&&r.abort()}}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Pb(F))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac}),t}(),V=new o.q("XSRF_COOKIE_NAME"),q=new o.q("XSRF_HEADER_NAME"),H=function t(){s(this,t)},B=function(){var t=function(){function t(e,n,r){s(this,t),this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return c(t,[{key:"getToken",value:function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(v.r)(t,this.cookieName),this.lastCookieString=t),this.lastToken}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Pb(v.c),o.Pb(o.B),o.Pb(V))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac}),t}(),z=function(){var t=function(){function t(e,n){s(this,t),this.tokenService=e,this.headerName=n}return c(t,[{key:"intercept",value:function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Pb(H),o.Pb(q))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac}),t}(),W=function(){var t=function(){function t(e,n){s(this,t),this.backend=e,this.injector=n,this.chain=null}return c(t,[{key:"handle",value:function(t){if(null===this.chain){var e=this.injector.get(R,[]);this.chain=e.reduceRight((function(t,e){return new D(t,e)}),this.backend)}return this.chain.handle(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Pb(g),o.Pb(o.r))},t.\u0275prov=o.Eb({token:t,factory:t.\u0275fac}),t}(),Q=function(){var t=function(){function t(){s(this,t)}return c(t,null,[{key:"disable",value:function(){return{ngModule:t,providers:[{provide:z,useClass:L}]}}},{key:"withOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:t,providers:[e.cookieName?{provide:V,useValue:e.cookieName}:[],e.headerName?{provide:q,useValue:e.headerName}:[]]}}}]),t}();return t.\u0275mod=o.Gb({type:t}),t.\u0275inj=o.Fb({factory:function(e){return new(e||t)},providers:[z,{provide:R,useExisting:z,multi:!0},{provide:H,useClass:B},{provide:V,useValue:"XSRF-TOKEN"},{provide:q,useValue:"X-XSRF-TOKEN"}]}),t}(),G=function(){var t=function t(){s(this,t)};return t.\u0275mod=o.Gb({type:t}),t.\u0275inj=o.Fb({factory:function(e){return new(e||t)},providers:[P,{provide:y,useClass:W},U,{provide:g,useExisting:U},M,{provide:F,useExisting:M}],imports:[[Q.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t}()},tyNb:function(t,n,r){"use strict";r.d(n,"a",(function(){return ue})),r.d(n,"b",(function(){return Un})),r.d(n,"c",(function(){return In})),r.d(n,"d",(function(){return On})),r.d(n,"e",(function(){return Ln})),r.d(n,"f",(function(){return Kn})),r.d(n,"g",(function(){return jn}));var o=r("ofXK"),a=r("fXoL"),u=r("LRne"),l=r("Cfvw"),f=r("2Vo4"),p=r("HDdC"),y=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}(),g=r("z+Ro"),m=r("DH7j"),_=r("l7GE"),b=r("ZUHj"),w=r("yCtX"),E={},C=function(){function t(e){s(this,t),this.resultSelector=e}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new k(t,this.resultSelector))}}]),t}(),k=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,t)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return c(n,[{key:"_next",value:function(t){this.values.push(E),this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(b.a)(this,r,void 0,n))}}}},{key:"notifyComplete",value:function(t){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(t,e,n){var r=this.values,i=this.toRespond?r[n]===E?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(_.a),S=r("EY2u");function T(t){return new p.a((function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(l.a)(n):Object(S.b)()).subscribe(e)}))}var I=r("XNiG"),O=r("lJxs"),A=r("bHdf");function x(){return Object(A.a)(1)}var N=r("pLZG"),P=r("7o/Q"),D=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}();function R(t){return function(e){return 0===t?Object(S.b)():e.lift(new L(t))}}var L=function(){function t(e){if(s(this,t),this.total=e,this.total<0)throw new D}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new j(t,this.total))}}]),t}(),j=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,t)).total=r,i.ring=new Array,i.count=0,i}return c(n,[{key:"_next",value:function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}},{key:"_complete",value:function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()}}]),n}(P.a);function F(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return function(e){return e.lift(new M(t))}}var M=function(){function t(e){s(this,t),this.errorFactory=e}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new U(t,this.errorFactory))}}]),t}(),U=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,t)).errorFactory=r,i.hasValue=!1,i}return c(n,[{key:"_next",value:function(t){this.hasValue=!0,this.destination.next(t)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}]),n}(P.a);function V(){return new y}function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e){return e.lift(new H(t))}}var H=function(){function t(e){s(this,t),this.defaultValue=e}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new B(t,this.defaultValue))}}]),t}(),B=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,t)).defaultValue=r,i.isEmpty=!0,i}return c(n,[{key:"_next",value:function(t){this.isEmpty=!1,this.destination.next(t)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(P.a),z=r("SpAZ"),W=r("JIr8");function Q(t){return function(e){return 0===t?Object(S.b)():e.lift(new G(t))}}var G=function(){function t(e){if(s(this,t),this.total=e,this.total<0)throw new D}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new K(t,this.total))}}]),t}(),K=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,t)).total=r,i.count=0,i}return c(n,[{key:"_next",value:function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}]),n}(P.a);function Y(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(N.a)((function(e,n){return t(e,n,r)})):z.a,Q(1),n?q(e):F((function(){return new y})))}}var X=r("5+tZ"),Z=r("vkgz"),J=function(){function t(e,n,r){s(this,t),this.predicate=e,this.thisArg=n,this.source=r}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new $(t,this.predicate,this.thisArg,this.source))}}]),t}(),$=function(t){h(n,t);var e=d(n);function n(t,r,i,o){var a;return s(this,n),(a=e.call(this,t)).predicate=r,a.thisArg=i,a.source=o,a.index=0,a.thisArg=i||v(a),a}return c(n,[{key:"notifyComplete",value:function(t){this.destination.next(t),this.destination.complete()}},{key:"_next",value:function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(P.a),tt=r("eIep");function et(){return x()(Object(u.a).apply(void 0,arguments))}var nt=r("Kqap"),rt=r("bOdf"),it=r("quSY"),ot=function(){function t(e){s(this,t),this.callback=e}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new at(t,this.callback))}}]),t}(),at=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,t)).add(new it.a(r)),i}return n}(P.a),st=function t(e,n){s(this,t),this.id=e,this.url=n},ut=function(t){h(n,t);var e=d(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return s(this,n),(i=e.call(this,t,r)).navigationTrigger=o,i.restoredState=a,i}return c(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(st),ct=function(t){h(n,t);var e=d(n);function n(t,r,i){var o;return s(this,n),(o=e.call(this,t,r)).urlAfterRedirects=i,o}return c(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(st),lt=function(t){h(n,t);var e=d(n);function n(t,r,i){var o;return s(this,n),(o=e.call(this,t,r)).reason=i,o}return c(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(st),ht=function(t){h(n,t);var e=d(n);function n(t,r,i){var o;return s(this,n),(o=e.call(this,t,r)).error=i,o}return c(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(st),ft=function(t){h(n,t);var e=d(n);function n(t,r,i,o){var a;return s(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return c(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(st),dt=function(t){h(n,t);var e=d(n);function n(t,r,i,o){var a;return s(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return c(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(st),pt=function(t){h(n,t);var e=d(n);function n(t,r,i,o,a){var u;return s(this,n),(u=e.call(this,t,r)).urlAfterRedirects=i,u.state=o,u.shouldActivate=a,u}return c(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(st),vt=function(t){h(n,t);var e=d(n);function n(t,r,i,o){var a;return s(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return c(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(st),yt=function(t){h(n,t);var e=d(n);function n(t,r,i,o){var a;return s(this,n),(a=e.call(this,t,r)).urlAfterRedirects=i,a.state=o,a}return c(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(st),gt=function(){function t(e){s(this,t),this.route=e}return c(t,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),t}(),mt=function(){function t(e){s(this,t),this.route=e}return c(t,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),t}(),_t=function(){function t(e){s(this,t),this.snapshot=e}return c(t,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),bt=function(){function t(e){s(this,t),this.snapshot=e}return c(t,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),wt=function(){function t(e){s(this,t),this.snapshot=e}return c(t,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Et=function(){function t(e){s(this,t),this.snapshot=e}return c(t,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Ct=function(){function t(e,n,r){s(this,t),this.routerEvent=e,this.position=n,this.anchor=r}return c(t,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),t}(),kt=function(){function t(e){s(this,t),this.params=e||{}}return c(t,[{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.params,t)}},{key:"get",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null}},{key:"getAll",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),t}();function St(t){return new kt(t)}function Tt(t){var e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function It(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ot(t,e){var n,r=Object.keys(t),i=Object.keys(e);if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(!At(t[n=r[o]],e[n]))return!1;return!0}function At(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every((function(t){return e.indexOf(t)>-1})):t===e}function xt(t){return Array.prototype.concat.apply([],t)}function Nt(t){return t.length>0?t[t.length-1]:null}function Pt(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Dt(t){return Object(a.pb)(t)?t:Object(a.qb)(t)?Object(l.a)(Promise.resolve(t)):Object(u.a)(t)}function Rt(t,e,n){return n?function(t,e){return Ot(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Mt(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every((function(n){return At(t[n],e[n])}))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Mt(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Mt(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!t(n.children[o],r.children[o]))return!1}return!0}var a=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!Mt(n.segments,a)&&!!n.children.primary&&e(n.children.primary,r,s)}(e,n,n.segments)}(t.root,e.root)}var Lt=function(){function t(e,n,r){s(this,t),this.root=e,this.queryParams=n,this.fragment=r}return c(t,[{key:"toString",value:function(){return Ht.serialize(this)}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=St(this.queryParams)),this._queryParamMap}}]),t}(),jt=function(){function t(e,n){var r=this;s(this,t),this.segments=e,this.children=n,this.parent=null,Pt(n,(function(t,e){return t.parent=r}))}return c(t,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"toString",value:function(){return Bt(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),t}(),Ft=function(){function t(e,n){s(this,t),this.path=e,this.parameters=n}return c(t,[{key:"toString",value:function(){return Yt(this)}},{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=St(this.parameters)),this._parameterMap}}]),t}();function Mt(t,e){return t.length===e.length&&t.every((function(t,n){return t.path===e[n].path}))}function Ut(t,e){var n=[];return Pt(t.children,(function(t,r){"primary"===r&&(n=n.concat(e(t,r)))})),Pt(t.children,(function(t,r){"primary"!==r&&(n=n.concat(e(t,r)))})),n}var Vt=function t(){s(this,t)},qt=function(){function t(){s(this,t)}return c(t,[{key:"parse",value:function(t){var e=new te(t);return new Lt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}},{key:"serialize",value:function(t){return"".concat("/"+function t(e,n){if(!e.hasChildren())return Bt(e);if(n){var r=e.children.primary?t(e.children.primary,!1):"",i=[];return Pt(e.children,(function(e,n){"primary"!==n&&i.push("".concat(n,":").concat(t(e,!1)))})),i.length>0?"".concat(r,"(").concat(i.join("//"),")"):r}var o=Ut(e,(function(n,r){return"primary"===r?[t(e.children.primary,!1)]:["".concat(r,":").concat(t(n,!1))]}));return"".concat(Bt(e),"/(").concat(o.join("//"),")")}(t.root,!0)).concat((e=t.queryParams,n=Object.keys(e).map((function(t){var n=e[t];return Array.isArray(n)?n.map((function(e){return"".concat(Wt(t),"=").concat(Wt(e))})).join("&"):"".concat(Wt(t),"=").concat(Wt(n))})),n.length?"?"+n.join("&"):"")).concat("string"==typeof t.fragment?"#"+encodeURI(t.fragment):"");var e,n}}]),t}(),Ht=new qt;function Bt(t){return t.segments.map((function(t){return Yt(t)})).join("/")}function zt(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wt(t){return zt(t).replace(/%3B/gi,";")}function Qt(t){return zt(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gt(t){return decodeURIComponent(t)}function Kt(t){return Gt(t.replace(/\+/g,"%20"))}function Yt(t){return"".concat(Qt(t.path)).concat((e=t.parameters,Object.keys(e).map((function(t){return";".concat(Qt(t),"=").concat(Qt(e[t]))})).join("")));var e}var Xt=/^[^\/()?;=#]+/;function Zt(t){var e=t.match(Xt);return e?e[0]:""}var Jt=/^[^=?&#]+/,$t=/^[^?&#]+/,te=function(){function t(e){s(this,t),this.url=e,this.remaining=e}return c(t,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jt([],{}):new jt([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new jt(t,e)),n}},{key:"parseSegment",value:function(){var t=Zt(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new Ft(Gt(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var e=Zt(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=Zt(this.remaining);r&&(n=r,this.capture(n))}t[Gt(e)]=Gt(n)}}},{key:"parseQueryParam",value:function(t){var e=function(t){var e=t.match(Jt);return e?e[0]:""}(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=function(t){var e=t.match($t);return e?e[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=Kt(e),o=Kt(n);if(t.hasOwnProperty(i)){var a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(o)}else t[i]=o}}},{key:"parseParens",value:function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Zt(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");var o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new jt([],o),this.consumeOptional("//")}return e}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),t}(),ee=function(){function t(e){s(this,t),this._root=e}return c(t,[{key:"parent",value:function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}},{key:"children",value:function(t){var e=ne(t,this._root);return e?e.children.map((function(t){return t.value})):[]}},{key:"firstChild",value:function(t){var e=ne(t,this._root);return e&&e.children.length>0?e.children[0].value:null}},{key:"siblings",value:function(t){var e=re(t,this._root);return e.length<2?[]:e[e.length-2].children.map((function(t){return t.value})).filter((function(e){return e!==t}))}},{key:"pathFromRoot",value:function(t){return re(t,this._root).map((function(t){return t.value}))}},{key:"root",get:function(){return this._root.value}}]),t}();function ne(t,n){if(t===n.value)return n;var r,i=e(n.children);try{for(i.s();!(r=i.n()).done;){var o=ne(t,r.value);if(o)return o}}catch(a){i.e(a)}finally{i.f()}return null}function re(t,n){if(t===n.value)return[n];var r,i=e(n.children);try{for(i.s();!(r=i.n()).done;){var o=re(t,r.value);if(o.length)return o.unshift(n),o}}catch(a){i.e(a)}finally{i.f()}return[]}var ie=function(){function t(e,n){s(this,t),this.value=e,this.children=n}return c(t,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),t}();function oe(t){var e={};return t&&t.children.forEach((function(t){return e[t.value.outlet]=t})),e}var ae=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,t)).snapshot=r,fe(v(i),t),i}return c(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(ee);function se(t,e){var n=function(t,e){var n=new le([],{},{},"",{},"primary",e,null,t.root,-1,{});return new he("",new ie(n,[]))}(t,e),r=new f.a([new Ft("",{})]),i=new f.a({}),o=new f.a({}),a=new f.a({}),s=new f.a(""),u=new ue(r,i,a,s,o,"primary",e,n.root);return u.snapshot=n.root,new ae(new ie(u,[]),n)}var ue=function(){function t(e,n,r,i,o,a,u,c){s(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=u,this._futureSnapshot=c}return c(t,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Object(O.a)((function(t){return St(t)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(O.a)((function(t){return St(t)})))),this._queryParamMap}}]),t}();function ce(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(t){return t.reduce((function(t,e){return{params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(r))}var le=function(){function t(e,n,r,i,o,a,u,c,l,h,f){s(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=u,this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=h,this._resolve=f}return c(t,[{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(t){return t.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=St(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=St(this.queryParams)),this._queryParamMap}}]),t}(),he=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,r)).url=t,fe(v(i),r),i}return c(n,[{key:"toString",value:function(){return de(this._root)}}]),n}(ee);function fe(t,e){e.value._routerState=t,e.children.forEach((function(e){return fe(t,e)}))}function de(t){var e=t.children.length>0?" { ".concat(t.children.map(de).join(", ")," } "):"";return"".concat(t.value).concat(e)}function pe(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ot(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Ot(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Ot(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Ot(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function ve(t,e){var n,r;return Ot(t.params,e.params)&&Mt(n=t.url,r=e.url)&&n.every((function(t,e){return Ot(t.parameters,r[e].parameters)}))&&!(!t.parent!=!e.parent)&&(!t.parent||ve(t.parent,e.parent))}function ye(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ge(t,e,n,r,i){var o={};return r&&Pt(r,(function(t,e){o[e]=Array.isArray(t)?t.map((function(t){return""+t})):""+t})),new Lt(n.root===t?e:function t(e,n,r){var i={};return Pt(e.children,(function(e,o){i[o]=e===n?r:t(e,n,r)})),new jt(e.segments,i)}(n.root,t,e),o,i)}var me=function(){function t(e,n,r){if(s(this,t),this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ye(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find((function(t){return"object"==typeof t&&null!=t&&t.outlets}));if(i&&i!==Nt(r))throw new Error("{outlets:{}} has to be the last command")}return c(t,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),t}(),_e=function t(e,n,r){s(this,t),this.segmentGroup=e,this.processChildren=n,this.index=r};function be(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function we(t,e,n){if(t||(t=new jt([],{})),0===t.segments.length&&t.hasChildren())return Ee(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=be(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!Te(s,u,a))return o;r+=2}else{if(!Te(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new jt(t.segments.slice(0,r.pathIndex),{});return o.children.primary=new jt(t.segments.slice(r.pathIndex),t.children),Ee(o,0,i)}return r.match&&0===i.length?new jt(t.segments,{}):r.match&&!t.hasChildren()?Ce(t,e,n):r.match?Ee(t,0,i):Ce(t,e,n)}function Ee(t,e,n){if(0===n.length)return new jt(t.segments,{});var r=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{primary:t}}(n),i={};return Pt(r,(function(n,r){null!==n&&(i[r]=we(t.children[r],e,n))})),Pt(t.children,(function(t,e){void 0===r[e]&&(i[e]=t)})),new jt(t.segments,i)}function Ce(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){if("object"==typeof n[i]&&null!==n[i]&&void 0!==n[i].outlets){var o=ke(n[i].outlets);return new jt(r,o)}if(0===i&&ye(n[0]))r.push(new Ft(t.segments[e].path,n[0])),i++;else{var a=be(n[i]),s=i<n.length-1?n[i+1]:null;a&&s&&ye(s)?(r.push(new Ft(a,Se(s))),i+=2):(r.push(new Ft(a,{})),i++)}}return new jt(r,{})}function ke(t){var e={};return Pt(t,(function(t,n){null!==t&&(e[n]=Ce(new jt([],{}),0,t))})),e}function Se(t){var e={};return Pt(t,(function(t,n){return e[n]=""+t})),e}function Te(t,e,n){return t==n.path&&Ot(e,n.parameters)}var Ie=function(){function t(e,n,r,i){s(this,t),this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}return c(t,[{key:"activate",value:function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),pe(this.futureState.root),this.activateChildRoutes(e,n,t)}},{key:"deactivateChildRoutes",value:function(t,e,n){var r=this,i=oe(e);t.children.forEach((function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]})),Pt(i,(function(t,e){r.deactivateRouteAndItsChildren(t,n)}))}},{key:"deactivateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}},{key:"deactivateRouteAndItsChildren",value:function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}},{key:"detachAndStoreRouteSubtree",value:function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(t,e){var n=this,r=e.getContext(t.value.outlet);if(r){var i=oe(t),o=t.value.component?r.children:e;Pt(i,(function(t,e){return n.deactivateRouteAndItsChildren(t,o)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(t,e,n){var r=this,i=oe(e);t.children.forEach((function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new Et(t.value.snapshot))})),t.children.length&&this.forwardEvent(new bt(t.value.snapshot))}},{key:"activateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(pe(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){var a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),Oe(s.route)}else{var u=function(t){for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;a.attachRef=null,a.route=r,a.resolver=c,a.outlet&&a.outlet.activateWith(r,c),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,n)}}]),t}();function Oe(t){pe(t.value),t.children.forEach(Oe)}var Ae=function t(e,n){s(this,t),this.routes=e,this.module=n};function xe(t){return"function"==typeof t}function Ne(t){return t instanceof Lt}var Pe=function t(e){s(this,t),this.segmentGroup=e||null},De=function t(e){s(this,t),this.urlTree=e};function Re(t){return new p.a((function(e){return e.error(new Pe(t))}))}function Le(t){return new p.a((function(e){return e.error(new De(t))}))}function je(t){return new p.a((function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(t,"'")))}))}var Fe=function(){function t(e,n,r,i,o){s(this,t),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(a.x)}return c(t,[{key:"apply",value:function(){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(Object(O.a)((function(e){return t.createUrlTree(e,t.urlTree.queryParams,t.urlTree.fragment)}))).pipe(Object(W.a)((function(e){if(e instanceof De)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof Pe)throw t.noMatchError(e);throw e})))}},{key:"match",value:function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(O.a)((function(n){return e.createUrlTree(n,t.queryParams,t.fragment)}))).pipe(Object(W.a)((function(t){if(t instanceof Pe)throw e.noMatchError(t);throw t})))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,e,n){var r=t.segments.length>0?new jt([],{primary:t}):t;return new Lt(r,e,n)}},{key:"expandSegmentGroup",value:function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(O.a)((function(t){return new jt([],t)}))):this.expandSegment(t,n,e,n.segments,r,!0)}},{key:"expandChildren",value:function(t,e,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return Object(u.a)({});var o=[],a=[],s={};return Pt(n,(function(n,i){var u,c,l=(u=i,c=n,r.expandSegmentGroup(t,e,c,u)).pipe(Object(O.a)((function(t){return s[i]=t})));"primary"===i?o.push(l):a.push(l)})),u.a.apply(null,o.concat(a)).pipe(x(),function(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(N.a)((function(e,n){return t(e,n,r)})):z.a,R(1),n?q(e):F((function(){return new y})))}}(),Object(O.a)((function(){return s})))}(n.children)}},{key:"expandSegment",value:function(t,e,n,r,o,a){var s=this;return Object(u.a).apply(void 0,i(n)).pipe(Object(O.a)((function(i){return s.expandSegmentAgainstRoute(t,e,n,i,r,o,a).pipe(Object(W.a)((function(t){if(t instanceof Pe)return Object(u.a)(null);throw t})))})),x(),Y((function(t){return!!t})),Object(W.a)((function(t,n){if(t instanceof y||"EmptyError"===t.name){if(s.noLeftoversInUrl(e,r,o))return Object(u.a)(new jt([],{}));throw new Pe(e)}throw t})))}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"expandSegmentAgainstRoute",value:function(t,e,n,r,i,o,a){return qe(r)!==o?Re(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Re(e)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Le(o):this.lineralizeSegments(n,o).pipe(Object(X.a)((function(n){var o=new jt(n,{});return i.expandSegment(t,o,e,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){var a=this,s=Me(e,r,i),u=s.matched,c=s.consumedSegments,l=s.lastChild,h=s.positionalParamSegments;if(!u)return Re(e);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?Le(f):this.lineralizeSegments(r,f).pipe(Object(X.a)((function(r){return a.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(t,n,r,i){var o=this;if("**"===r.path)return r.loadChildren?this.configLoader.load(t.injector,r).pipe(Object(O.a)((function(t){return r._loadedConfig=t,new jt(i,{})}))):Object(u.a)(new jt(i,{}));var a=Me(n,r,i),s=a.matched,c=a.consumedSegments,l=a.lastChild;if(!s)return Re(n);var h=i.slice(l);return this.getChildConfig(t,r,i).pipe(Object(X.a)((function(t){var r=t.module,i=t.routes,a=function(t,n,r,i){return r.length>0&&function(t,e,n){return n.some((function(n){return Ve(t,e,n)&&"primary"!==qe(n)}))}(t,r,i)?{segmentGroup:Ue(new jt(n,function(t,n){var r={};r.primary=n;var i,o=e(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;""===a.path&&"primary"!==qe(a)&&(r[qe(a)]=new jt([],{}))}}catch(s){o.e(s)}finally{o.f()}return r}(i,new jt(r,t.children)))),slicedSegments:[]}:0===r.length&&function(t,e,n){return n.some((function(n){return Ve(t,e,n)}))}(t,r,i)?{segmentGroup:Ue(new jt(t.segments,function(t,n,r,i){var o,a={},s=e(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;Ve(t,n,u)&&!i[qe(u)]&&(a[qe(u)]=new jt([],{}))}}catch(c){s.e(c)}finally{s.f()}return Object.assign(Object.assign({},i),a)}(t,r,i,t.children))),slicedSegments:r}:{segmentGroup:t,slicedSegments:r}}(n,c,h,i),s=a.segmentGroup,l=a.slicedSegments;return 0===l.length&&s.hasChildren()?o.expandChildren(r,i,s).pipe(Object(O.a)((function(t){return new jt(c,t)}))):0===i.length&&0===l.length?Object(u.a)(new jt(c,{})):o.expandSegment(r,s,i,l,"primary",!0).pipe(Object(O.a)((function(t){return new jt(c.concat(t.segments),t.children)})))})))}},{key:"getChildConfig",value:function(t,e,n){var r=this;return e.children?Object(u.a)(new Ae(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(u.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(X.a)((function(n){return n?r.configLoader.load(t.injector,e).pipe(Object(O.a)((function(t){return e._loadedConfig=t,t}))):function(t){return new p.a((function(e){return e.error(Tt("Cannot load children because the guard of the route \"path: '".concat(t.path,"'\" returned false")))}))}(e)}))):Object(u.a)(new Ae([],t))}},{key:"runCanLoadGuards",value:function(t,e,n){var r,i=this,o=e.canLoad;return o&&0!==o.length?Object(l.a)(o).pipe(Object(O.a)((function(r){var i,o=t.get(r);if(function(t){return t&&xe(t.canLoad)}(o))i=o.canLoad(e,n);else{if(!xe(o))throw new Error("Invalid CanLoad guard");i=o(e,n)}return Dt(i)}))).pipe(x(),Object(Z.a)((function(t){if(Ne(t)){var e=Tt('Redirecting to "'.concat(i.urlSerializer.serialize(t),'"'));throw e.url=t,e}})),(r=function(t){return!0===t},function(t){return t.lift(new J(r,void 0,t))})):Object(u.a)(!0)}},{key:"lineralizeSegments",value:function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(u.a)(n);if(r.numberOfChildren>1||!r.children.primary)return je(t.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}},{key:"applyRedirectCreatreUrlTree",value:function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new Lt(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}},{key:"createQueryParams",value:function(t,e){var n={};return Pt(t,(function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t})),n}},{key:"createSegmentGroup",value:function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return Pt(e.children,(function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)})),new jt(o,a)}},{key:"createSegments",value:function(t,e,n,r){var i=this;return e.map((function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)}))}},{key:"findPosParam",value:function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(e.path,"'."));return r}},{key:"findOrReturn",value:function(t,n){var r,i=0,o=e(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.path===t.path)return n.splice(i),a;i++}}catch(s){o.e(s)}finally{o.f()}return t}}]),t}();function Me(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(e.matcher||It)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Ue(t){if(1===t.numberOfChildren&&t.children.primary){var e=t.children.primary;return new jt(t.segments.concat(e.segments),e.children)}return t}function Ve(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function qe(t){return t.outlet||"primary"}var He=function t(e){s(this,t),this.path=e,this.route=this.path[this.path.length-1]},Be=function t(e,n){s(this,t),this.component=e,this.route=n};function ze(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function We(t,e,n){var r=oe(t),i=t.value;Pt(r,(function(t,r){We(t,i.component?e?e.children.getContext(r):null:e,n)})),n.canDeactivateChecks.push(new Be(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}var Qe=Symbol("INITIAL_VALUE");function Ge(){return Object(tt.a)((function(t){return(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=void 0,i=void 0;return Object(g.a)(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&Object(m.a)(e[0])&&(e=e[0]),Object(w.a)(e,i).lift(new C(r))}).apply(void 0,i(t.map((function(t){return t.pipe(Q(1),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[e.length-1];return Object(g.a)(r)?(e.pop(),function(t){return et(e,t,r)}):function(t){return et(e,t)}}(Qe))})))).pipe(Object(nt.a)((function(t,e){var n=!1;return e.reduce((function(t,r,i){if(t!==Qe)return t;if(r===Qe&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Ne(r))return r}return t}),t)}),Qe),Object(N.a)((function(t){return t!==Qe})),Object(O.a)((function(t){return Ne(t)?t:!0===t})),Q(1))}))}function Ke(t,e){return null!==t&&e&&e(new wt(t)),Object(u.a)(!0)}function Ye(t,e){return null!==t&&e&&e(new _t(t)),Object(u.a)(!0)}function Xe(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(u.a)(!0);var i=r.map((function(r){return T((function(){var i,o=ze(r,e,n);if(function(t){return t&&xe(t.canActivate)}(o))i=Dt(o.canActivate(e,t));else{if(!xe(o))throw new Error("Invalid CanActivate guard");i=Dt(o(e,t))}return i.pipe(Y())}))}));return Object(u.a)(i).pipe(Ge())}function Ze(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map((function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)})).filter((function(t){return null!==t})).map((function(e){return T((function(){var i=e.guards.map((function(i){var o,a=ze(i,e.node,n);if(function(t){return t&&xe(t.canActivateChild)}(a))o=Dt(a.canActivateChild(r,t));else{if(!xe(a))throw new Error("Invalid CanActivateChild guard");o=Dt(a(r,t))}return o.pipe(Y())}));return Object(u.a)(i).pipe(Ge())}))}));return Object(u.a)(i).pipe(Ge())}var Je=function t(){s(this,t)},$e=function(){function t(e,n,r,i,o,a){s(this,t),this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}return c(t,[{key:"recognize",value:function(){try{var t=nn(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new le([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ie(n,e),i=new he(this.url,r);return this.inheritParamsAndData(i._root),Object(u.a)(i)}catch(o){return new p.a((function(t){return t.error(o)}))}}},{key:"inheritParamsAndData",value:function(t){var e=this,n=t.value,r=ce(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach((function(t){return e.inheritParamsAndData(t)}))}},{key:"processSegmentGroup",value:function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}},{key:"processChildren",value:function(t,e){var n,r=this,i=Ut(e,(function(e,n){return r.processSegmentGroup(t,e,n)}));return n={},i.forEach((function(t){var e=n[t.value.outlet];if(e){var r=e.url.map((function(t){return t.toString()})).join("/"),i=t.value.url.map((function(t){return t.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(i,"'."))}n[t.value.outlet]=t.value})),i.sort((function(t,e){return"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)})),i}},{key:"processSegment",value:function(t,n,r,i){var o,a=e(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;try{return this.processSegmentAgainstRoute(s,n,r,i)}catch(u){if(!(u instanceof Je))throw u}}}catch(c){a.e(c)}finally{a.f()}if(this.noLeftoversInUrl(n,r,i))return[];throw new Je}},{key:"noLeftoversInUrl",value:function(t,e,n){return 0===e.length&&!t.children[n]}},{key:"processSegmentAgainstRoute",value:function(t,e,n,r){if(t.redirectTo)throw new Je;if((t.outlet||"primary")!==r)throw new Je;var i,o=[],a=[];if("**"===t.path){var s=n.length>0?Nt(n).parameters:{};i=new le(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,an(t),r,t.component,t,tn(e),en(e)+n.length,sn(t))}else{var u=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Je;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(e.matcher||It)(n,t,e);if(!r)throw new Je;var i={};Pt(r.posParams,(function(t,e){i[e]=t.path}));var o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=u.consumedSegments,a=n.slice(u.lastChild),i=new le(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,an(t),r,t.component,t,tn(e),en(e)+o.length,sn(t))}var c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),l=nn(e,o,a,c,this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return[new ie(i,d)]}if(0===c.length&&0===f.length)return[new ie(i,[])];var p=this.processSegment(c,h,f,"primary");return[new ie(i,p)]}}]),t}();function tn(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function en(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function nn(t,n,r,i,o){if(r.length>0&&function(t,e,n){return n.some((function(n){return rn(t,e,n)&&"primary"!==on(n)}))}(t,r,i)){var a=new jt(n,function(t,n,r,i){var o={};o.primary=i,i._sourceSegment=t,i._segmentIndexShift=n.length;var a,s=e(r);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(""===u.path&&"primary"!==on(u)){var c=new jt([],{});c._sourceSegment=t,c._segmentIndexShift=n.length,o[on(u)]=c}}}catch(l){s.e(l)}finally{s.f()}return o}(t,n,i,new jt(r,t.children)));return a._sourceSegment=t,a._segmentIndexShift=n.length,{segmentGroup:a,slicedSegments:[]}}if(0===r.length&&function(t,e,n){return n.some((function(n){return rn(t,e,n)}))}(t,r,i)){var s=new jt(t.segments,function(t,n,r,i,o,a){var s,u={},c=e(i);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(rn(t,r,l)&&!o[on(l)]){var h=new jt([],{});h._sourceSegment=t,h._segmentIndexShift="legacy"===a?t.segments.length:n.length,u[on(l)]=h}}}catch(f){c.e(f)}finally{c.f()}return Object.assign(Object.assign({},o),u)}(t,n,r,i,t.children,o));return s._sourceSegment=t,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:r}}var u=new jt(t.segments,t.children);return u._sourceSegment=t,u._segmentIndexShift=n.length,{segmentGroup:u,slicedSegments:r}}function rn(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function on(t){return t.outlet||"primary"}function an(t){return t.data||{}}function sn(t){return t.resolve||{}}function un(t){return function(e){return e.pipe(Object(tt.a)((function(e){var n=t(e);return n?Object(l.a)(n).pipe(Object(O.a)((function(){return e}))):Object(l.a)([e])})))}}var cn,ln=function(){function t(){s(this,t)}return c(t,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,e){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,e){return t.routeConfig===e.routeConfig}}]),t}(),hn=((cn=function t(){s(this,t)}).\u0275fac=function(t){return new(t||cn)},cn.\u0275cmp=a.Cb({type:cn,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&a.Jb(0,"router-outlet")},directives:function(){return[jn]},encapsulation:2}),cn);function fn(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;n++){var r=t[n];dn(r,pn(e,r))}}function dn(t,e){if(!t)throw new Error("\n      Invalid configuration of route '".concat(e,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(t))throw new Error("Invalid configuration of route '".concat(e,"': Array cannot be specified"));if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error("Invalid configuration of route '".concat(e,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and children cannot be used together"));if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and loadChildren cannot be used together"));if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"': children and loadChildren cannot be used together"));if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '".concat(e,"': redirectTo and component cannot be used together"));if(t.path&&t.matcher)throw new Error("Invalid configuration of route '".concat(e,"': path and matcher cannot be used together"));if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '".concat(e,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===t.path&&void 0===t.matcher)throw new Error("Invalid configuration of route '".concat(e,"': routes must have either a path or a matcher specified"));if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error("Invalid configuration of route '".concat(e,"': path cannot start with a slash"));if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(e,'", redirectTo: "').concat(t.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '".concat(e,"': pathMatch can only be set to 'prefix' or 'full'"));t.children&&fn(t.children,e)}function pn(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:"".concat(t,"/").concat(e.path):"":t}function vn(t){var e=t.children&&t.children.map(vn),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=hn),n}var yn=new a.q("ROUTES"),gn=function(){function t(e,n,r,i){s(this,t),this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return c(t,[{key:"load",value:function(t,e){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(O.a)((function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i=r.create(t);return new Ae(xt(i.injector.get(yn)).map(vn),i)})))}},{key:"loadModuleFactory",value:function(t){var e=this;return"string"==typeof t?Object(l.a)(this.loader.load(t)):Dt(t()).pipe(Object(X.a)((function(t){return t instanceof a.v?Object(u.a)(t):Object(l.a)(e.compiler.compileModuleAsync(t))})))}}]),t}(),mn=function t(){s(this,t),this.outlet=null,this.route=null,this.resolver=null,this.children=new _n,this.attachRef=null},_n=function(){function t(){s(this,t),this.contexts=new Map}return c(t,[{key:"onChildOutletCreated",value:function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}},{key:"onChildOutletDestroyed",value:function(t){var e=this.getContext(t);e&&(e.outlet=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var e=this.getContext(t);return e||(e=new mn,this.contexts.set(t,e)),e}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),t}(),bn=function(){function t(){s(this,t)}return c(t,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,e){return t}}]),t}();function wn(t){throw t}function En(t,e,n){return e.parse("/")}function Cn(t,e){return Object(u.a)(null)}var kn,Sn,Tn,In=((Tn=function(){function t(e,n,r,i,o,u,c,l){var h=this;s(this,t),this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new I.a,this.errorHandler=wn,this.malformedUriErrorHandler=En,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Cn,afterPreactivation:Cn},this.urlHandlingStrategy=new bn,this.routeReuseStrategy=new ln,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(a.x),this.console=o.get(a.X);var d=o.get(a.z);this.isNgZoneEnabled=d instanceof a.z,this.resetConfig(l),this.currentUrlTree=new Lt(new jt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new gn(u,c,(function(t){return h.triggerEvent(new gt(t))}),(function(t){return h.triggerEvent(new mt(t))})),this.routerState=se(this.currentUrlTree,this.rootComponentType),this.transitions=new f.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return c(t,[{key:"setupNavigations",value:function(t){var n=this,r=this.events;return t.pipe(Object(N.a)((function(t){return 0!==t.id})),Object(O.a)((function(t){return Object.assign(Object.assign({},t),{extractedUrl:n.urlHandlingStrategy.extract(t.rawUrl)})})),Object(tt.a)((function(t){var i,o,a,s,c=!1,h=!1;return Object(u.a)(t).pipe(Object(Z.a)((function(t){n.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:n.lastSuccessfulNavigation?Object.assign(Object.assign({},n.lastSuccessfulNavigation),{previousNavigation:null}):null}})),Object(tt.a)((function(t){var e,i,o,a,s=!n.navigated||t.extractedUrl.toString()!==n.browserUrlTree.toString();if(("reload"===n.onSameUrlNavigation||s)&&n.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(u.a)(t).pipe(Object(tt.a)((function(t){var e=n.transitions.getValue();return r.next(new ut(t.id,n.serializeUrl(t.extractedUrl),t.source,t.restoredState)),e!==n.transitions.getValue()?S.a:[t]})),Object(tt.a)((function(t){return Promise.resolve(t)})),(e=n.ngModule.injector,i=n.configLoader,o=n.urlSerializer,a=n.config,function(t){return t.pipe(Object(tt.a)((function(t){return function(t,e,n,r,i){return new Fe(t,e,n,r,i).apply()}(e,i,o,t.extractedUrl,a).pipe(Object(O.a)((function(e){return Object.assign(Object.assign({},t),{urlAfterRedirects:e})})))})))}),Object(Z.a)((function(t){n.currentNavigation=Object.assign(Object.assign({},n.currentNavigation),{finalUrl:t.urlAfterRedirects})})),function(t,e,r,i,o){return function(r){return r.pipe(Object(X.a)((function(r){return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new $e(t,e,n,r,i,o).recognize()}(t,e,r.urlAfterRedirects,(a=r.urlAfterRedirects,n.serializeUrl(a)),i,o).pipe(Object(O.a)((function(t){return Object.assign(Object.assign({},r),{targetSnapshot:t})})));var a})))}}(n.rootComponentType,n.config,0,n.paramsInheritanceStrategy,n.relativeLinkResolution),Object(Z.a)((function(t){"eager"===n.urlUpdateStrategy&&(t.extras.skipLocationChange||n.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),n.browserUrlTree=t.urlAfterRedirects)})),Object(Z.a)((function(t){var e=new ft(t.id,n.serializeUrl(t.extractedUrl),n.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);r.next(e)})));if(s&&n.rawUrlTree&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){var c=t.id,l=t.extractedUrl,h=t.source,f=t.restoredState,d=t.extras,p=new ut(c,n.serializeUrl(l),h,f);r.next(p);var v=se(l,n.rootComponentType).snapshot;return Object(u.a)(Object.assign(Object.assign({},t),{targetSnapshot:v,urlAfterRedirects:l,extras:Object.assign(Object.assign({},d),{skipLocationChange:!1,replaceUrl:!1})}))}return n.rawUrlTree=t.rawUrl,n.browserUrlTree=t.urlAfterRedirects,t.resolve(null),S.a})),un((function(t){var e=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return n.hooks.beforePreactivation(e,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),Object(Z.a)((function(t){var e=new dt(t.id,n.serializeUrl(t.extractedUrl),n.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.triggerEvent(e)})),Object(O.a)((function(t){return Object.assign(Object.assign({},t),{guards:(e=t.targetSnapshot,r=t.currentSnapshot,i=n.rootContexts,o=e._root,function t(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=oe(n);return e.children.forEach((function(e){!function(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=e.value,s=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){var c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Mt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Mt(t.url,e.url)||!Ot(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ve(t,e)||!Ot(t.queryParams,e.queryParams);case"paramsChange":default:return!ve(t,e)}}(s,a,a.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new He(i)):(a.data=s.data,a._resolvedData=s._resolvedData),t(e,n,a.component?u?u.children:null:r,i,o),c&&o.canDeactivateChecks.push(new Be(u&&u.outlet&&u.outlet.component||null,s))}else s&&We(n,u,o),o.canActivateChecks.push(new He(i)),t(e,null,a.component?u?u.children:null:r,i,o)}(e,a[e.value.outlet],r,i.concat([e.value]),o),delete a[e.value.outlet]})),Pt(a,(function(t,e){return We(t,r.getContext(e),o)})),o}(o,r?r._root:null,i,[o.value]))});var e,r,i,o})),function(t,e){return function(n){return n.pipe(Object(X.a)((function(n){var r=n.targetSnapshot,i=n.currentSnapshot,o=n.guards,a=o.canActivateChecks,s=o.canDeactivateChecks;return 0===s.length&&0===a.length?Object(u.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(l.a)(t).pipe(Object(X.a)((function(t){return function(t,e,n,r,i){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(u.a)(!0);var a=o.map((function(o){var a,s=ze(o,e,i);if(function(t){return t&&xe(t.canDeactivate)}(s))a=Dt(s.canDeactivate(t,e,n,r));else{if(!xe(s))throw new Error("Invalid CanDeactivate guard");a=Dt(s(t,e,n,r))}return a.pipe(Y())}));return Object(u.a)(a).pipe(Ge())}(t.component,t.route,n,e,r)})),Y((function(t){return!0!==t}),!0))}(s,r,i,t).pipe(Object(X.a)((function(n){return n&&"boolean"==typeof n?function(t,e,n,r){return Object(l.a)(e).pipe(Object(rt.a)((function(e){return Object(l.a)([Ye(e.route.parent,r),Ke(e.route,r),Ze(t,e.path,n),Xe(t,e.route,n)]).pipe(x(),Y((function(t){return!0!==t}),!0))})),Y((function(t){return!0!==t}),!0))}(r,a,t,e):Object(u.a)(n)})),Object(O.a)((function(t){return Object.assign(Object.assign({},n),{guardsResult:t})})))})))}}(n.ngModule.injector,(function(t){return n.triggerEvent(t)})),Object(Z.a)((function(t){if(Ne(t.guardsResult)){var e=Tt('Redirecting to "'.concat(n.serializeUrl(t.guardsResult),'"'));throw e.url=t.guardsResult,e}})),Object(Z.a)((function(t){var e=new pt(t.id,n.serializeUrl(t.extractedUrl),n.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);n.triggerEvent(e)})),Object(N.a)((function(t){if(!t.guardsResult){n.resetUrlToCurrentUrlTree();var e=new lt(t.id,n.serializeUrl(t.extractedUrl),"");return r.next(e),t.resolve(!1),!1}return!0})),un((function(t){if(t.guards.canActivateChecks.length)return Object(u.a)(t).pipe(Object(Z.a)((function(t){var e=new vt(t.id,n.serializeUrl(t.extractedUrl),n.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.triggerEvent(e)})),Object(tt.a)((function(t){var e,i,o=!1;return Object(u.a)(t).pipe((e=n.paramsInheritanceStrategy,i=n.ngModule.injector,function(t){return t.pipe(Object(X.a)((function(t){var n=t.targetSnapshot,r=t.guards.canActivateChecks;if(!r.length)return Object(u.a)(t);var o=0;return Object(l.a)(r).pipe(Object(rt.a)((function(t){return function(t,e,n,r){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return Object(u.a)({});var o={};return Object(l.a)(i).pipe(Object(X.a)((function(i){return function(t,e,n,r){var i=ze(t,e,r);return Dt(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Z.a)((function(t){o[i]=t})))})),R(1),Object(X.a)((function(){return Object.keys(o).length===i.length?Object(u.a)(o):S.a})))}(t._resolve,t,e,r).pipe(Object(O.a)((function(e){return t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),ce(t,n).resolve),null})))}(t.route,n,e,i)})),Object(Z.a)((function(){return o++})),R(1),Object(X.a)((function(e){return o===r.length?Object(u.a)(t):S.a})))})))}),Object(Z.a)({next:function(){return o=!0},complete:function(){if(!o){var e=new lt(t.id,n.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");r.next(e),t.resolve(!1)}}}))})),Object(Z.a)((function(t){var e=new yt(t.id,n.serializeUrl(t.extractedUrl),n.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.triggerEvent(e)})))})),un((function(t){var e=t.targetSnapshot,r=t.id,i=t.extractedUrl,o=t.rawUrl,a=t.extras,s=a.skipLocationChange,u=a.replaceUrl;return n.hooks.afterPreactivation(e,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),Object(O.a)((function(t){var r=function(t,n,r){var i=function t(n,r,i){if(i&&n.shouldReuseRoute(r.value,i.value.snapshot)){var o=i.value;o._futureSnapshot=r.value;var a=function(n,r,i){return r.children.map((function(r){var o,a=e(i.children);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(n.shouldReuseRoute(s.value.snapshot,r.value))return t(n,r,s)}}catch(u){a.e(u)}finally{a.f()}return t(n,r)}))}(n,r,i);return new ie(o,a)}var s=n.retrieve(r.value);if(s){var u=s.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(var r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(r,u),u}var c,l=new ue(new f.a((c=r.value).url),new f.a(c.params),new f.a(c.queryParams),new f.a(c.fragment),new f.a(c.data),c.outlet,c.component,c),h=r.children.map((function(e){return t(n,e)}));return new ie(l,h)}(t,n._root,r?r._root:void 0);return new ae(i,n)}(n.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:r})})),Object(Z.a)((function(t){n.currentUrlTree=t.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(n.currentUrlTree,t.rawUrl),n.routerState=t.targetRouterState,"deferred"===n.urlUpdateStrategy&&(t.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),n.browserUrlTree=t.urlAfterRedirects)})),(o=n.rootContexts,a=n.routeReuseStrategy,s=function(t){return n.triggerEvent(t)},Object(O.a)((function(t){return new Ie(a,t.targetRouterState,t.currentRouterState,s).activate(o),t}))),Object(Z.a)({next:function(){c=!0},complete:function(){c=!0}}),(i=function(){if(!c&&!h){n.resetUrlToCurrentUrlTree();var e=new lt(t.id,n.serializeUrl(t.extractedUrl),"Navigation ID ".concat(t.id," is not equal to the current navigation id ").concat(n.navigationId));r.next(e),t.resolve(!1)}n.currentNavigation=null},function(t){return t.lift(new ot(i))}),Object(W.a)((function(e){if(h=!0,(s=e)&&s.ngNavigationCancelingError){var i=Ne(e.url);i||(n.navigated=!0,n.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));var o=new lt(t.id,n.serializeUrl(t.extractedUrl),e.message);r.next(o),i?setTimeout((function(){var r=n.urlHandlingStrategy.merge(e.url,n.rawUrlTree);return n.scheduleNavigation(r,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})}),0):t.resolve(!1)}else{n.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);var a=new ht(t.id,n.serializeUrl(t.extractedUrl),e);r.next(a);try{t.resolve(n.errorHandler(e))}catch(u){t.reject(u)}}var s;return S.a})))})))}},{key:"resetRootComponentType",value:function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}},{key:"setTransition",value:function(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(e){var n=t.parseUrl(e.url),r="popstate"===e.type?"popstate":"hashchange",i=e.state&&e.state.navigationId?e.state:null;setTimeout((function(){t.scheduleNavigation(n,r,i,{replaceUrl:!0})}),0)})))}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(t){this.events.next(t)}},{key:"resetConfig",value:function(t){fn(t),this.config=t.map(vn),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.relativeTo,r=e.queryParams,o=e.fragment,s=e.preserveQueryParams,u=e.queryParamsHandling,c=e.preserveFragment;Object(a.U)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var l=n||this.routerState.root,h=c?this.currentUrlTree.fragment:o,f=null;if(u)switch(u){case"merge":f=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=r||null}else f=s?this.currentUrlTree.queryParams:r||null;return null!==f&&(f=this.removeEmptyProps(f)),function(t,e,n,r,o){if(0===n.length)return ge(e.root,e.root,e,r,o);var a=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new me(!0,0,t);var e=0,n=!1,r=t.reduce((function(t,r,o){if("object"==typeof r&&null!=r){if(r.outlets){var a={};return Pt(r.outlets,(function(t,e){a[e]="string"==typeof t?t.split("/"):t})),[].concat(i(t),[{outlets:a}])}if(r.segmentPath)return[].concat(i(t),[r.segmentPath])}return"string"!=typeof r?[].concat(i(t),[r]):0===o?(r.split("/").forEach((function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))})),t):[].concat(i(t),[r])}),[]);return new me(n,e,r)}(n);if(a.toRoot())return ge(e.root,new jt([],{}),e,r,o);var s=function(t,e,n){if(t.isAbsolute)return new _e(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new _e(r,r===e.root,0)}var i=ye(t.commands[0])?0:1;return function(t,e,n){for(var r=t,i=e,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new _e(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(a,e,t),u=s.processChildren?Ee(s.segmentGroup,s.index,a.commands):we(s.segmentGroup,s.index,a.commands);return ge(s.segmentGroup,u,e,r,o)}(l,this.currentUrlTree,t,f,h)}},{key:"navigateByUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};Object(a.U)()&&this.isNgZoneEnabled&&!a.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=Ne(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(e))}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}},{key:"serializeUrl",value:function(t){return this.urlSerializer.serialize(t)}},{key:"parseUrl",value:function(t){var e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}},{key:"isActive",value:function(t,e){if(Ne(t))return Rt(this.currentUrlTree,t,e);var n=this.parseUrl(t);return Rt(this.currentUrlTree,n,e)}},{key:"removeEmptyProps",value:function(t){return Object.keys(t).reduce((function(e,n){var r=t[n];return null!=r&&(e[n]=r),e}),{})}},{key:"processNavigations",value:function(){var t=this;this.navigations.subscribe((function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.events.next(new ct(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,t.currentNavigation=null,e.resolve(!0)}),(function(e){t.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(t,e,n,r,i){var o,a,s,u=this.getTransition();if(u&&"imperative"!==e&&"imperative"===u.source&&u.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(u&&"hashchange"==e&&"popstate"===u.source&&u.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(u&&"popstate"==e&&"hashchange"===u.source&&u.rawUrl.toString()===t.toString())return Promise.resolve(!0);i?(o=i.resolve,a=i.reject,s=i.promise):s=new Promise((function(t,e){o=t,a=e}));var c=++this.navigationId;return this.setTransition({id:c,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(t){return Promise.reject(t)}))}},{key:"setBrowserUrl",value:function(t,e,n,r){var i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}}]),t}()).\u0275fac=function(t){return new(t||Tn)(a.Pb(a.M),a.Pb(Vt),a.Pb(_n),a.Pb(o.g),a.Pb(a.r),a.Pb(a.w),a.Pb(a.i),a.Pb(void 0))},Tn.\u0275prov=a.Eb({token:Tn,factory:Tn.\u0275fac}),Tn),On=((Sn=function(){function t(e,n,r,i,o){s(this,t),this.router=e,this.route=n,this.commands=[],this.onChanges=new I.a,null==r&&i.setAttribute(o.nativeElement,"tabindex","0")}return c(t,[{key:"ngOnChanges",value:function(t){this.onChanges.next(this)}},{key:"onClick",value:function(){var t={skipLocationChange:xn(this.skipLocationChange),replaceUrl:xn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}},{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"preserveQueryParams",set:function(t){Object(a.U)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:xn(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:xn(this.preserveFragment)})}}]),t}()).\u0275fac=function(t){return new(t||Sn)(a.Ib(In),a.Ib(ue),a.Qb("tabindex"),a.Ib(a.D),a.Ib(a.l))},Sn.\u0275dir=a.Db({type:Sn,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&a.Sb("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[a.wb]}),Sn),An=((kn=function(){function t(e,n,r){var i=this;s(this,t),this.router=e,this.route=n,this.locationStrategy=r,this.commands=[],this.onChanges=new I.a,this.subscription=e.events.subscribe((function(t){t instanceof ct&&i.updateTargetUrlAndHref()}))}return c(t,[{key:"ngOnChanges",value:function(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:xn(this.skipLocationChange),replaceUrl:xn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"routerLink",set:function(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}},{key:"preserveQueryParams",set:function(t){Object(a.U)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:xn(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:xn(this.preserveFragment)})}}]),t}()).\u0275fac=function(t){return new(t||kn)(a.Ib(In),a.Ib(ue),a.Ib(o.h))},kn.\u0275dir=a.Db({type:kn,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&a.Sb("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)})),2&t&&(a.Ob("href",e.href,a.bc),a.zb("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[a.wb]}),kn);function xn(t){return""===t||!!t}var Nn,Pn,Dn,Rn,Ln=((Pn=function(){function t(e,n,r,i,o,a){var u=this;s(this,t),this.router=e,this.element=n,this.renderer=r,this.cdr=i,this.link=o,this.linkWithHref=a,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe((function(t){t instanceof ct&&u.update()}))}return c(t,[{key:"ngAfterContentInit",value:function(){var t=this;Object(l.a)([this.links.changes,this.linksWithHrefs.changes,Object(u.a)(null)]).pipe(Object(A.a)()).subscribe((function(e){t.update(),t.subscribeToEachLinkOnChanges()}))}},{key:"subscribeToEachLinkOnChanges",value:function(){var t,e=this;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();var n=[].concat(i(this.links.toArray()),i(this.linksWithHrefs.toArray()),[this.link,this.linkWithHref]).filter((function(t){return!!t})).map((function(t){return t.onChanges}));this.linkInputChangesSubscription=Object(l.a)(n).pipe(Object(A.a)()).subscribe((function(t){e.isActive!==e.isLinkActive(e.router)(t)&&e.update()}))}},{key:"ngOnChanges",value:function(t){this.update()}},{key:"ngOnDestroy",value:function(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}},{key:"update",value:function(){var t=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then((function(){var e=t.hasActiveLinks();t.isActive!==e&&(t.isActive=e,t.cdr.markForCheck(),t.classes.forEach((function(n){e?t.renderer.addClass(t.element.nativeElement,n):t.renderer.removeClass(t.element.nativeElement,n)})))}))}},{key:"isLinkActive",value:function(t){var e=this;return function(n){return t.isActive(n.urlTree,e.routerLinkActiveOptions.exact)}}},{key:"hasActiveLinks",value:function(){var t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}},{key:"routerLinkActive",set:function(t){var e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter((function(t){return!!t}))}}]),t}()).\u0275fac=function(t){return new(t||Pn)(a.Ib(In),a.Ib(a.l),a.Ib(a.D),a.Ib(a.h),a.Ib(On,8),a.Ib(An,8))},Pn.\u0275dir=a.Db({type:Pn,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){var r;1&t&&(a.Bb(n,On,!0),a.Bb(n,An,!0)),2&t&&(a.Zb(r=a.Tb())&&(e.links=r),a.Zb(r=a.Tb())&&(e.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[a.wb]}),Pn),jn=((Nn=function(){function t(e,n,r,i,o){s(this,t),this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.n,this.deactivateEvents=new a.n,this.name=i||"primary",e.onChildOutletCreated(this.name,this)}return c(t,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t}},{key:"attach",value:function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}},{key:"deactivate",value:function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}},{key:"activateWith",value:function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Fn(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}}]),t}()).\u0275fac=function(t){return new(t||Nn)(a.Ib(_n),a.Ib(a.P),a.Ib(a.j),a.Qb("name"),a.Ib(a.h))},Nn.\u0275dir=a.Db({type:Nn,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),Nn),Fn=function(){function t(e,n,r){s(this,t),this.route=e,this.childContexts=n,this.parent=r}return c(t,[{key:"get",value:function(t,e){return t===ue?this.route:t===_n?this.childContexts:this.parent.get(t,e)}}]),t}(),Mn=function t(){s(this,t)},Un=function(){function t(){s(this,t)}return c(t,[{key:"preload",value:function(t,e){return e().pipe(Object(W.a)((function(){return Object(u.a)(null)})))}}]),t}(),Vn=function(){function t(){s(this,t)}return c(t,[{key:"preload",value:function(t,e){return Object(u.a)(null)}}]),t}(),qn=((Rn=function(){function t(e,n,r,i,o){s(this,t),this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=new gn(n,r,(function(t){return e.triggerEvent(new gt(t))}),(function(t){return e.triggerEvent(new mt(t))}))}return c(t,[{key:"setUpPreloading",value:function(){var t=this;this.subscription=this.router.events.pipe(Object(N.a)((function(t){return t instanceof ct})),Object(rt.a)((function(){return t.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var t=this.injector.get(a.x);return this.processRoutes(t,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(t,n){var r,i=[],o=e(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.loadChildren&&!a.canLoad&&a._loadedConfig){var s=a._loadedConfig;i.push(this.processRoutes(s.module,s.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children))}}catch(u){o.e(u)}finally{o.f()}return Object(l.a)(i).pipe(Object(A.a)(),Object(O.a)((function(t){})))}},{key:"preloadConfig",value:function(t,e){var n=this;return this.preloadingStrategy.preload(e,(function(){return n.loader.load(t.injector,e).pipe(Object(X.a)((function(t){return e._loadedConfig=t,n.processRoutes(t.module,t.routes)})))}))}}]),t}()).\u0275fac=function(t){return new(t||Rn)(a.Pb(In),a.Pb(a.w),a.Pb(a.i),a.Pb(a.r),a.Pb(Mn))},Rn.\u0275prov=a.Eb({token:Rn,factory:Rn.\u0275fac}),Rn),Hn=((Dn=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s(this,t),this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return c(t,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof ut?(t.store[t.lastId]=t.viewportScroller.getScrollPosition(),t.lastSource=e.navigationTrigger,t.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ct&&(t.lastId=e.id,t.scheduleScrollEvent(e,t.router.parseUrl(e.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var t=this;return this.router.events.subscribe((function(e){e instanceof Ct&&(e.position?"top"===t.options.scrollPositionRestoration?t.viewportScroller.scrollToPosition([0,0]):"enabled"===t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===t.options.anchorScrolling?t.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==t.options.scrollPositionRestoration&&t.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(t,e){this.router.triggerEvent(new Ct(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||Dn)(a.Pb(In),a.Pb(o.m),a.Pb(void 0))},Dn.\u0275prov=a.Eb({token:Dn,factory:Dn.\u0275fac}),Dn),Bn=new a.q("ROUTER_CONFIGURATION"),zn=new a.q("ROUTER_FORROOT_GUARD"),Wn=[o.g,{provide:Vt,useClass:qt},{provide:In,useFactory:function(t,e,n,r,i,a,s){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},c=arguments.length>8?arguments[8]:void 0,l=arguments.length>9?arguments[9]:void 0,h=new In(null,t,e,n,r,i,a,xt(s));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){var f=Object(o.q)();h.events.subscribe((function(t){f.logGroup("Router Event: "+t.constructor.name),f.log(t.toString()),f.log(t),f.logGroupEnd()}))}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[Vt,_n,o.g,a.r,a.w,a.i,yn,Bn,[function(){return function t(){s(this,t)}}(),new a.A],[function(){return function t(){s(this,t)}}(),new a.A]]},_n,{provide:ue,useFactory:function(t){return t.routerState.root},deps:[In]},{provide:a.w,useClass:a.J},qn,Vn,Un,{provide:Bn,useValue:{enableTracing:!1}}];function Qn(){return new a.y("Router",In)}var Gn,Kn=((Gn=function(){function t(e,n){s(this,t)}return c(t,null,[{key:"forRoot",value:function(e,n){return{ngModule:t,providers:[Wn,Jn(e),{provide:zn,useFactory:Zn,deps:[[In,new a.A,new a.I]]},{provide:Bn,useValue:n||{}},{provide:o.h,useFactory:Xn,deps:[o.l,[new a.p(o.a),new a.A],Bn]},{provide:Hn,useFactory:Yn,deps:[In,o.m,Bn]},{provide:Mn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Vn},{provide:a.y,multi:!0,useFactory:Qn},[tr,{provide:a.d,multi:!0,useFactory:er,deps:[tr]},{provide:rr,useFactory:nr,deps:[tr]},{provide:a.b,multi:!0,useExisting:rr}]]}}},{key:"forChild",value:function(e){return{ngModule:t,providers:[Jn(e)]}}}]),t}()).\u0275mod=a.Gb({type:Gn}),Gn.\u0275inj=a.Fb({factory:function(t){return new(t||Gn)(a.Pb(zn,8),a.Pb(In,8))}}),Gn);function Yn(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Hn(t,e,n)}function Xn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new o.e(t,e):new o.k(t,e)}function Zn(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Jn(t){return[{provide:a.a,multi:!0,useValue:t},{provide:yn,multi:!0,useValue:t}]}var $n,tr=(($n=function(){function t(e){s(this,t),this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new I.a}return c(t,[{key:"appInitializer",value:function(){var t=this;return this.injector.get(o.f,Promise.resolve(null)).then((function(){var e=null,n=new Promise((function(t){return e=t})),r=t.injector.get(In),i=t.injector.get(Bn);if(t.isLegacyDisabled(i)||t.isLegacyEnabled(i))e(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),e(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(i.initialNavigation,"'"));r.hooks.afterPreactivation=function(){return t.initNavigation?Object(u.a)(null):(t.initNavigation=!0,e(!0),t.resultOfPreactivationDone)},r.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(t){var e=this.injector.get(Bn),n=this.injector.get(qn),r=this.injector.get(Hn),i=this.injector.get(In),o=this.injector.get(a.g);t===o.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}},{key:"isLegacyDisabled",value:function(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}]),t}()).\u0275fac=function(t){return new(t||$n)(a.Pb(a.r))},$n.\u0275prov=a.Eb({token:$n,factory:$n.\u0275fac}),$n);function er(t){return t.appInitializer.bind(t)}function nr(t){return t.bootstrapListener.bind(t)}var rr=new a.q("Router Initializer")},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("7o/Q");function i(){}var o=n("n6bG");function a(t,e,n){return function(r){return r.lift(new u(t,e,n))}}var u=function(){function t(e,n,r){s(this,t),this.nextOrObserver=e,this.error=n,this.complete=r}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new l(t,this.nextOrObserver,this.error,this.complete))}}]),t}(),l=function(t){h(n,t);var e=d(n);function n(t,r,a,u){var c;return s(this,n),(c=e.call(this,t))._tapNext=i,c._tapError=i,c._tapComplete=i,c._tapError=a||i,c._tapComplete=u||i,Object(o.a)(r)?(c._context=v(c),c._tapNext=r):r&&(c._context=r,c._tapNext=r.next||i,c._tapError=r.error||i,c._tapComplete=r.complete||i),c}return c(n,[{key:"_next",value:function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}},{key:"_error",value:function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}]),n}(r.a)},w1tV:function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),a=n("quSY");function u(){return function(t){return t.lift(new p(t))}}var f,p=function(){function t(e){s(this,t),this.connectable=e}return c(t,[{key:"call",value:function(t,e){var n=this.connectable;n._refCount++;var r=new v(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),t}(),v=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,t)).connectable=r,i}return c(n,[{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(o.a),y=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this)).source=t,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return c(n,[{key:"_subscribe",value:function(t){return this.getSubject().subscribe(t)}},{key:"getSubject",value:function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.a).add(this.source.subscribe(new _(this.getSubject(),this))),t.closed&&(this._connection=null,t=a.a.EMPTY)),t}},{key:"refCount",value:function(){return u()(this)}}]),n}(i.a),m={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(f=y.prototype)._subscribe},_isComplete:{value:f._isComplete,writable:!0},getSubject:{value:f.getSubject},connect:{value:f.connect},refCount:{value:f.refCount}},_=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,t)).connectable=r,i}return c(n,[{key:"_error",value:function(t){this._unsubscribe(),l(g(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),l(g(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}]),n}(r.b);function b(){return new r.a}function w(){return function(t){return u()((e=b,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,m);return r.source=t,r.subjectFactory=n,r})(t));var e}}},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n("mAIw"),a=n("zVF4"),s=n("S+S0"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.ErrorFactory("app","Firebase",c),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.Logger("@firebase/app"),d=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(t),this.container=new s.ComponentContainer(e.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();d.prototype.name&&d.prototype.options||d.prototype.delete||console.log("dc");var p=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(a.contains(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(u.join(" "))}c(new s.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});u.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!a.contains(e,t=t||"[DEFAULT]"))throw l.create("no-app",{appName:t});return e[t]}function c(s){var u,c,h=s.name;if(n.has(h))return f.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var d=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==s.serviceProps&&a.deepExtend(d,s.serviceProps),r[h]=d,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,h);return n.apply(this,s.multipleInstances?t:[])}}try{for(var p=o.__values(Object.keys(e)),v=p.next();!v.done;v=p.next())e[v.value]._addComponent(s)}catch(y){u={error:y}}finally{try{v&&!v.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(d);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){a.deepExtend(e,t)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(a.isBrowser()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=p.initializeApp;p.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.isNode()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),g.apply(void 0,t)};var m=p;!function(t,e){t.INTERNAL.registerComponent(new s.Component("platform-logger",(function(t){return new v(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.11",void 0),t.registerVersion("fire-js","")}(m),e.default=m,e.firebase=m},x7I3:function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorCode",(function(){return $n})),n.d(e,"EventType",(function(){return tr})),n.d(e,"WebChannel",(function(){return er})),n.d(e,"XhrIo",(function(){return nr})),n.d(e,"createWebChannelTransport",(function(){return Jn}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=s||{},u=a||self;function c(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function h(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var d="closure_uid_"+(1e9*Math.random()>>>0),p=0;function v(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:y).apply(null,arguments)}function m(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now;function b(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(){this.j=this.j,this.i=this.i}w.prototype.j=!1,w.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,d)&&t[d]||(t[d]=++p)}(this)},w.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},C=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function k(t){return Array.prototype.concat.apply([],arguments)}function S(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function T(t){return/^[\s\xa0]*$/.test(t)}var I,O=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function A(t,e){return-1!=t.indexOf(e)}function x(t,e){return t<e?-1:t>e?1:0}t:{var N=u.navigator;if(N){var P=N.userAgent;if(P){I=P;break t}}I=""}function D(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function R(t){var e={};for(var n in t)e[n]=t[n];return e}var L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<L.length;o++)n=L[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function F(t){return F[" "](t),t}F[" "]=c;var M,U,V=A(I,"Opera"),q=A(I,"Trident")||A(I,"MSIE"),H=A(I,"Edge"),B=H||q,z=A(I,"Gecko")&&!(A(I.toLowerCase(),"webkit")&&!A(I,"Edge"))&&!(A(I,"Trident")||A(I,"MSIE"))&&!A(I,"Edge"),W=A(I.toLowerCase(),"webkit")&&!A(I,"Edge");function Q(){var t=u.document;return t?t.documentMode:void 0}t:{var G="",K=(U=I,z?/rv:([^\);]+)(\)|;)/.exec(U):H?/Edge\/([\d\.]+)/.exec(U):q?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(U):W?/WebKit\/(\S+)/.exec(U):V?/(?:Version)[ \/]?(\S+)/.exec(U):void 0);if(K&&(G=K?K[1]:""),q){var Y=Q();if(null!=Y&&Y>parseFloat(G)){M=String(Y);break t}}M=G}var X={};function Z(t){return function(t,e){var n=X;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=O(String(M)).split("."),r=O(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=x(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||x(0==a[2].length,0==s[2].length)||x(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}var J=u.document&&q&&(Q()||parseInt(M,10))||void 0,$=!q||9<=Number(J),tt=q&&!Z("9"),et=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",c,e),u.removeEventListener("test",c,e)}catch(n){}return t}();function nt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function rt(t,e){if(nt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(z){t:{try{F(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:it[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}nt.prototype.b=function(){this.defaultPrevented=!0},b(rt,nt);var it={2:"touch",3:"pen",4:"mouse"};rt.prototype.b=function(){rt.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,tt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ot="closure_listenable_"+(1e6*Math.random()|0),at=0;function st(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++at,this.Y=this.Z=!1}function ut(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ct(t){this.src=t,this.a={},this.b=0}function lt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=E(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ut(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ht(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ct.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=ht(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new st(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ft="closure_lm_"+(1e6*Math.random()|0),dt={};function pt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=Et(r),e&&e[ot]?e.wa(n,r,f(i)?!!i.capture:!!i,o):vt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)pt(t,e[o],n,r,i);return null}return n=Et(n),t&&t[ot]?t.va(e,n,f(r)?!!r.capture:!!r,i):vt(t,e,n,!1,r,i)}function vt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=f(i)?!!i.capture:!!i;if(a&&!$)return null;var s=bt(t);if(s||(t[ft]=s=new ct(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=_t,e=$?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)et||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function yt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ot])lt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bt(e))?(lt(n,t),0==n.b&&(n.src=null,e[ft]=null)):ut(t)}}}function gt(t){return t in dt?dt[t]:dt[t]="on"+t}function mt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&yt(t),n.call(r,e)}function _t(t,e){if(t.Y)return!0;if(!$){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return mt(t,e=new rt(e,this))}return mt(t,new rt(e,this))}function bt(t){return(t=t[ft])instanceof ct?t:null}var wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Et(t){return"function"==l(t)?t:(t[wt]||(t[wt]=function(e){return t.handleEvent(e)}),t[wt])}function Ct(){w.call(this),this.c=new ct(this),this.J=this,this.C=null}function kt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&lt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}b(Ct,w),Ct.prototype[ot]=!0,(o=Ct.prototype).addEventListener=function(t,e,n,r){pt(this,t,e,n,r)},o.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=f(i)?!!i.capture:!!i,r=Et(r),e&&e[ot]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=ht(a=e.a[n],r,i,o))&&(ut(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--))):e&&(e=bt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=ht(n,r,i,o)),(r=-1<e?n[e]:null)&&yt(r))}(this,t,e,n,r)},o.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new nt(t,n);else if(t instanceof nt)t.target=t.target||n;else{var i=t;j(t=new nt(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=kt(a,r,!0,t)&&i}if(i=kt(a=t.a=n,r,!0,t)&&i,i=kt(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=kt(a=t.a=e[o],r,!1,t)&&i;return i},o.G=function(){if(Ct.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ut(n[r]);delete e.a[t],e.b--}}this.C=null},o.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},o.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var St=u.JSON.stringify;function Tt(){this.b=this.a=null}var It,Ot=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new xt}),(function(t){t.reset()}),100);function At(){var t=Rt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function xt(){this.next=this.b=this.a=null}function Nt(t){u.setTimeout((function(){throw t}),0)}function Pt(t,e){It||function(){var t=u.Promise.resolve(void 0);It=function(){t.then(Lt)}}(),Dt||(It(),Dt=!0),Rt.add(t,e)}Tt.prototype.add=function(t,e){var n=Ot.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},xt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},xt.prototype.reset=function(){this.next=this.b=this.a=null};var Dt=!1,Rt=new Tt;function Lt(){for(var t;t=At();){try{t.a.call(t.b)}catch(n){Nt(n)}var e=Ot;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Dt=!1}function jt(t,e){Ct.call(this),this.b=t||1,this.a=e||u,this.f=g(this.Ya,this),this.g=_()}function Ft(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Mt(t,e,n){if("function"==l(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Ut(t){t.a=Mt((function(){t.a=null,t.c&&(t.c=!1,Ut(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}b(jt,Ct),(o=jt.prototype).aa=!1,o.M=null,o.Ya=function(){if(this.aa){var t=_()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Ft(this),this.start()))}},o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=_())},o.G=function(){jt.S.G.call(this),Ft(this),delete this.a};var Vt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ut(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(u.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(w);function qt(t){w.call(this),this.b=t,this.a={}}b(qt,w);var Ht=[];function Bt(t,e,n,r){Array.isArray(n)||(n&&(Ht[0]=n.toString()),n=Ht);for(var i=0;i<n.length;i++){var o=pt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function zt(t){D(t.a,(function(t,e){this.a.hasOwnProperty(e)&&yt(t)}),t),t.a={}}function Wt(){this.a=!0}function Qt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return St(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}qt.prototype.G=function(){qt.S.G.call(this),zt(this)},qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wt.prototype.info=function(){};var Gt=null;function Kt(){return Gt=Gt||new Ct}function Yt(t){nt.call(this,"serverreachability",t)}function Xt(t){var e=Kt();e.dispatchEvent(new Yt(e,t))}function Zt(t){nt.call(this,"statevent",t)}function Jt(t){var e=Kt();e.dispatchEvent(new Zt(e,t))}function $t(t){nt.call(this,"timingevent",t)}function te(t,e){if("function"!=l(t))throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){t()}),e)}b(Yt,nt),b(Zt,nt),b($t,nt);var ee={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},ne={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function re(){}function ie(){}re.prototype.a=null;var oe,ae={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function se(){nt.call(this,"d")}function ue(){nt.call(this,"c")}function ce(){}function le(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new qt(this),this.P=he,this.R=new jt(t=B?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}b(se,nt),b(ue,nt),b(ce,re),oe=new ce;var he=45e3,fe={},de={};function pe(t,e,n){t.H=1,t.i=je(xe(e)),t.j=n,t.I=!0,ve(t,null)}function ve(t,e){t.u=_(),me(t),t.l=xe(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),Ye(n.b,"t",r),t.D=0,t.a=zn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Vt(g(t.Ca,t,t.a),t.O)),Bt(t.J,t.a,"readystatechange",t.Wa),e=t.B?R(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Xt(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function ye(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ge(t,n);if(i==de){4==e&&(t.h=4,Jt(14),r=!1),Qt(t.c,t.f,null,"[Incomplete Response]");break}if(i==fe){t.h=4,Jt(15),Qt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Qt(t.c,t.f,i,null),Ce(t,i)}4==e&&0==n.length&&(t.h=1,Jt(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),jn(e),e.F=!0)):(Qt(t.c,t.f,n,"[Invalid Chunked Response]"),Ee(t),we(t))}function ge(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?de:(n=Number(e.substring(n,r)),isNaN(n)?fe:(r+=1)+n>e.length?de:(e=e.substr(r,n),t.D=r+n,e))}function me(t){t.U=_()+t.P,_e(t,t.P)}function _e(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=te(g(t.Ua,t),e)}function be(t){t.o&&(u.clearTimeout(t.o),t.o=null)}function we(t){0==t.g.v||t.A||Un(t.g,t)}function Ee(t){be(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ft(t.R),zt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ce(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||nn(n.b,t)))if(n.I=t.N,!t.C&&nn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Mn(n),In(n)}Ln(n),Jt(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=te(g(n.Ra,n),6e3));if(1>=en(n.b)&&n.ea){try{n.ea()}catch(y){}n.ea=void 0}}else qn(n,11)}else if((t.C||n.a==t)&&Mn(n),!T(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(A(l,"spdy")||A(l,"quic")||A(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(rn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Le(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=_()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Bn(u,u.C?u.ga:null,u.fa),d.C){on(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(be(p),me(p)),u.a=d}else Rn(u);0<n.g.length&&xn(n)}else"stop"!=i[0]&&"close"!=i[0]||qn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?qn(n,7):Tn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Xt(4)}catch(y){}}function ke(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)C(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(h(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Se(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Se)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Te(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ie(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ie(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ie(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(o=le.prototype).setTimeout=function(t){this.P=t},o.Wa=function(t){t=t.target;var e=this.F;e&&3==En(t)?e.f():this.Ca(t)},o.Ca=function(t){try{if(t==this.a)t:{var e=En(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!B&&!this.a.$())){this.A||4!=e||7==n||Xt(8==n||0>=r?3:2),be(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,Jt(12),Ee(this),we(this);break t}Qt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ce(this,u)}this.I?(ye(this,e,o),B&&this.b&&3==e&&(Bt(this.J,this.R,"tick",this.Va),this.R.start())):(Qt(this.c,this.f,o,null),Ce(this,o)),4==e&&Ee(this),this.b&&!this.A&&(4==e?Un(this.g,this):(this.b=!1,me(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Jt(12)):(this.h=0,Jt(13)),Ee(this),we(this)}}}catch(c){}},o.Va=function(){if(this.a){var t=En(this.a),e=this.a.$();this.D<e.length&&(be(this),ye(this,t,e),this.b&&4!=t&&me(this))}},o.cancel=function(){this.A=!0,Ee(this)},o.Ua=function(){this.o=null;var t=_();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Xt(3),Jt(17)),Ee(this),this.h=2,we(this)):_e(this,this.U-t)},(o=Se.prototype).K=function(){Te(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},o.L=function(){return Te(this),this.a.concat()},o.get=function(t,e){return Ie(this.b,t)?this.b[t]:e},o.set=function(t,e){Ie(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},o.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Oe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ae(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ae){this.a=void 0!==e?e:t.a,Ne(this,t.f),this.j=t.j,Pe(this,t.c),De(this,t.h),this.g=t.g,e=t.b;var n=new We;n.c=e.c,e.a&&(n.a=new Se(e.a),n.b=e.b),Re(this,n),this.i=t.i}else t&&(n=String(t).match(Oe))?(this.a=!!e,Ne(this,n[1]||"",!0),this.j=Fe(n[2]||""),Pe(this,n[3]||"",!0),De(this,n[4]),this.g=Fe(n[5]||"",!0),Re(this,n[6]||"",!0),this.i=Fe(n[7]||"")):(this.a=!!e,this.b=new We(null,this.a))}function xe(t){return new Ae(t)}function Ne(t,e,n){t.f=n?Fe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Pe(t,e,n){t.c=n?Fe(e,!0):e}function De(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Re(t,e,n){e instanceof We?(t.b=e,function(t,e){e&&!t.f&&(Qe(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ge(this,e),Ye(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Me(e,Be)),t.b=new We(e,t.a))}function Le(t,e,n){t.b.set(e,n)}function je(t){return Le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),t}function Fe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Me(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ue),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ue(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ae.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Me(e,Ve,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Me(e,Ve,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Me(n,"/"==n.charAt(0)?He:qe,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Me(n,ze)),t.join("")};var Ve=/[#\/\?@]/g,qe=/[#\?:]/g,He=/[#\?]/g,Be=/[#\?@]/g,ze=/#/g;function We(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qe(t){t.a||(t.a=new Se,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ge(t,e){Qe(t),e=Xe(t,e),Ie(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ie((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Te(t)))}function Ke(t,e){return Qe(t),e=Xe(t,e),Ie(t.a.b,e)}function Ye(t,e,n){Ge(t,e),0<n.length&&(t.c=null,t.a.set(Xe(t,e),S(n)),t.b+=n.length)}function Xe(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Ze(t,e){this.b=t,this.a=e}function Je(t){this.g=t||$e,t=u.PerformanceNavigationTiming?0<(t=u.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(u.ia&&u.ia.ya&&u.ia.ya()&&u.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(o=We.prototype).add=function(t,e){Qe(this),this.c=null,t=Xe(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},o.forEach=function(t,e){Qe(this),this.a.forEach((function(n,r){C(n,(function(n){t.call(e,n,r,this)}),this)}),this)},o.L=function(){Qe(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},o.K=function(t){Qe(this);var e=[];if("string"==typeof t)Ke(this,t)&&(e=k(e,this.a.get(Xe(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=k(e,t[n])}return e},o.set=function(t,e){return Qe(this),this.c=null,Ke(this,t=Xe(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},o.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var $e=10;function tn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function en(t){return t.b?1:t.a?t.a.size:0}function nn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function rn(t,e){t.a?t.a.add(e):t.b=e}function on(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function an(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var o=i(t.a.values()),a=o.next();!a.done;a=o.next())r=r.concat(a.value.s)}catch(s){e={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return S(t.c)}function sn(){}function un(){this.a=new sn}function cn(t,e,n){var r=n||"";try{ke(t,(function(t,n){var i=t;f(t)&&(i=St(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ln(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Je.prototype.cancel=function(){var t,e;if(this.c=an(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},sn.prototype.stringify=function(t){return u.JSON.stringify(t,void 0)},sn.prototype.parse=function(t){return u.JSON.parse(t,void 0)};var hn=u.JSON.parse;function fn(t){Ct.call(this),this.headers=new Se,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=dn,this.D=this.F=!1}b(fn,Ct);var dn="",pn=/^https?$/i,vn=["POST","PUT"];function yn(t){return"content-type"==t.toLowerCase()}function gn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,mn(t),bn(t)}function mn(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function _n(t){if(t.b&&void 0!==s&&(!t.s[1]||4!=En(t)||2!=t.X()))if(t.l&&4==En(t))Mt(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==En(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Oe)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!pn.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var c=2<En(t)?t.a.statusText:""}catch(l){c=""}t.f=c+" ["+t.X()+"]",mn(t)}}finally{bn(t)}}}function bn(t,e){if(t.a){wn(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function wn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(u.clearTimeout(t.m),t.m=null)}function En(t){return t.a?t.a.readyState:0}function Cn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return D(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Le(t,e,n))}function kn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Sn(t){this.pa=0,this.g=[],this.c=new Wt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=kn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=kn("baseRetryDelayMs",5e3,t),this.Ma=kn("retryDelaySeedMs",1e4,t),this.Ja=kn("forwardChannelMaxRetries",2,t),this.ma=kn("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Je(t&&t.concurrentRequestLimit),this.ka=new un,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Tn(t){if(On(t),3==t.v){var e=t.R++,n=xe(t.B);Le(n,"SID",t.J),Le(n,"RID",e),Le(n,"TYPE","terminate"),Pn(t,n),(e=new le(t,t.c,e,void 0)).H=2,e.i=je(xe(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(e.i.toString(),"")),!n&&u.Image&&((new Image).src=e.i,n=!0),n||(e.a=zn(e.g,null),e.a.ba(e.i)),e.u=_(),me(e)}Hn(t)}function In(t){t.a&&(jn(t),t.a.cancel(),t.a=null)}function On(t){In(t),t.j&&(u.clearTimeout(t.j),t.j=null),Mn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&u.clearTimeout(t.h),t.h=null)}function An(t,e){t.g.push(new Ze(t.La++,e)),3==t.v&&xn(t)}function xn(t){tn(t.b)||t.h||(t.h=!0,Pt(t.Ba,t),t.u=0)}function Nn(t,e){var n;n=e?e.f:t.R++;var r=xe(t.B);Le(r,"SID",t.J),Le(r,"RID",n),Le(r,"AID",t.P),Pn(t,r),t.i&&t.l&&Cn(r,t.i,t.l),n=new le(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Dn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),rn(t.b,n),pe(n,r,e)}function Pn(t,e){t.f&&ke({},(function(t,n){Le(e,n,t)}))}function Dn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?g(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?a.push("ofs="+(o=i[0].b)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{cn(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Rn(t){t.a||t.j||(t.U=1,Pt(t.Aa,t),t.o=0)}function Ln(t){return!(t.a||t.j||3<=t.o||(t.U++,t.j=te(g(t.Aa,t),Vn(t,t.o)),t.o++,0))}function jn(t){null!=t.s&&(u.clearTimeout(t.s),t.s=null)}function Fn(t){t.a=new le(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=xe(t.la);Le(e,"RID","rpc"),Le(e,"SID",t.J),Le(e,"CI",t.H?"0":"1"),Le(e,"AID",t.P),Pn(t,e),Le(e,"TYPE","xmlhttp"),t.i&&t.l&&Cn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=je(xe(e)),n.j=null,n.I=!0,ve(n,t)}function Mn(t){null!=t.m&&(u.clearTimeout(t.m),t.m=null)}function Un(t,e){var n=null;if(t.a==e){Mn(t),jn(t),t.a=null;var r=2}else{if(!nn(t.b,e))return;n=e.s,on(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=_()-e.u;var i=t.u;(r=Kt()).dispatchEvent(new $t(r,n,e,i)),xn(t)}else Rn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(en(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=te(g(t.Ba,t,e),Vn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Ln(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:qn(t,5);break;case 4:qn(t,10);break;case 3:qn(t,6);break;default:qn(t,2)}}function Vn(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function qn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=g(t.Xa,t);n||(n=new Ae("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||Ne(n,"https"),je(n)),function(t,e){var n=new Wt;if(u.Image){var r=new Image;r.onload=m(ln,n,r,"TestLoadImage: loaded",!0,e),r.onerror=m(ln,n,r,"TestLoadImage: error",!1,e),r.onabort=m(ln,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=m(ln,n,r,"TestLoadImage: timeout",!1,e),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Jt(2);t.v=0,t.f&&t.f.ra(e),Hn(t),On(t)}function Hn(t){t.v=0,t.I=-1,t.f&&(0==an(t.b).length&&0==t.g.length||(t.b.c.length=0,S(t.g),t.g.length=0),t.f.qa())}function Bn(t,e,n){var r=function(t){return t instanceof Ae?xe(t):new Ae(t,void 0)}(n);if(""!=r.c)e&&Pe(r,e+"."+r.c),De(r,r.h);else{var i=u.location;r=function(t,e,n,r){var i=new Ae(null,void 0);return t&&Ne(i,t),e&&Pe(i,e),n&&De(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&D(t.W,(function(t,e){Le(r,e,t)})),n=t.na,(e=t.A)&&n&&Le(r,e,n),Le(r,"VER",t.ha),Pn(t,r),r}function zn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fn(t.Ka)).F=t.C,e}function Wn(){}function Qn(){if(q&&!(10<=Number(J)))throw Error("Environmental error: no available transport.")}function Gn(t,e){Ct.call(this),this.a=new Sn(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!T(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!T(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Xn(this)}function Kn(t){se.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Yn(){ue.call(this),this.status=1}function Xn(t){this.a=t}(o=fn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:oe),this.a.onreadystatechange=g(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void gn(this,o)}t=n||"";var i=new Se(this.headers);r&&ke(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=yn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=u.FormData&&t instanceof u.FormData,!(0<=E(vn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{wn(this),0<this.o&&((this.D=function(t){return q&&Z(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=g(this.xa,this)):this.m=Mt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){gn(this,o)}},o.xa=function(){void 0!==s&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},o.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),bn(this))},o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),bn(this,!0)),fn.S.G.call(this)},o.za=function(){this.j||(this.A||this.l||this.g?_n(this):this.Ta())},o.Ta=function(){_n(this)},o.X=function(){try{return 2<En(this)?this.a.status:-1}catch(U){return-1}},o.$=function(){try{return this.a?this.a.responseText:""}catch(U){return""}},o.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),hn(e)}},o.ua=function(){return this.h},o.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(o=Sn.prototype).ha=8,o.v=1,o.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new le(this,this.c,t,void 0),r=this.l;if(this.O&&(r?j(r=R(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Dn(this,n,e),Le(i=xe(this.B),"RID",t),Le(i,"CVER",22),this.A&&Le(i,"X-HTTP-Session-Id",this.A),Pn(this,i),this.i&&r&&Cn(i,this.i,r),rn(this.b,n),this.Ga&&Le(i,"TYPE","init"),this.da?(Le(i,"$req",e),Le(i,"SID","null"),n.V=!0,pe(n,i,null)):pe(n,i,e),this.v=2}}else 3==this.v&&(t?Nn(this,t):0==this.g.length||tn(this.b)||Nn(this))},o.Aa=function(){if(this.j=null,Fn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=te(g(this.Sa,this),t)}},o.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,In(this),Fn(this))},o.Ra=function(){null!=this.m&&(this.m=null,In(this),Ln(this),Jt(19))},o.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),Jt(2)):(this.c.info("Failed to ping google.com"),Jt(1))},(o=Wn.prototype).ta=function(){},o.sa=function(){},o.ra=function(){},o.qa=function(){},o.Ha=function(){},Qn.prototype.a=function(t,e){return new Gn(t,e)},b(Gn,Ct),(o=Gn.prototype).addEventListener=function(t,e,n,r){Gn.S.addEventListener.call(this,t,e,n,r)},o.removeEventListener=function(t,e,n,r){Gn.S.removeEventListener.call(this,t,e,n,r)},o.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;Jt(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Bn(t,null,t.fa),xn(t)},o.close=function(){Tn(this.a)},o.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,An(this.a,e)}else this.g?((e={}).__data__=St(t),An(this.a,e)):An(this.a,t)},o.G=function(){this.a.f=null,delete this.f,Tn(this.a),delete this.a,Gn.S.G.call(this)},b(Kn,se),b(Yn,ue),b(Xn,Wn),Xn.prototype.ta=function(){this.a.dispatchEvent("a")},Xn.prototype.sa=function(t){this.a.dispatchEvent(new Kn(t))},Xn.prototype.ra=function(t){this.a.dispatchEvent(new Yn(t))},Xn.prototype.qa=function(){this.a.dispatchEvent("b")},Qn.prototype.createWebChannel=Qn.prototype.a,Gn.prototype.send=Gn.prototype.Pa,Gn.prototype.open=Gn.prototype.Oa,Gn.prototype.close=Gn.prototype.close,ee.NO_ERROR=0,ee.TIMEOUT=8,ee.HTTP_ERROR=6,ne.COMPLETE="complete",ie.EventType=ae,ae.OPEN="a",ae.CLOSE="b",ae.ERROR="c",ae.MESSAGE="d",Ct.prototype.listen=Ct.prototype.va,fn.prototype.listenOnce=fn.prototype.wa,fn.prototype.getLastError=fn.prototype.Qa,fn.prototype.getLastErrorCode=fn.prototype.ua,fn.prototype.getStatus=fn.prototype.X,fn.prototype.getResponseJson=fn.prototype.Na,fn.prototype.getResponseText=fn.prototype.$,fn.prototype.send=fn.prototype.ba;var Zn={createWebChannelTransport:function(){return new Qn},ErrorCode:ee,EventType:ne,WebChannel:ie,XhrIo:fn},Jn=Zn.createWebChannelTransport,$n=Zn.ErrorCode,tr=Zn.EventType,er=Zn.WebChannel,nr=Zn.XhrIo;e.default=Zn},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function a(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},z6cu:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("HDdC");function i(t,e){return new r.a(e?function(n){return e.schedule(o,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function o(t){var e=t.error;t.subscriber.error(e)}},zUnb:function(e,n,r){"use strict";r.r(n);var o,a,u,f,p=r("fXoL"),y=r("AytR"),m=r("ofXK"),_=function(t){h(n,t);var e=d(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"getProperty",value:function(t,e){return t[e]}},{key:"log",value:function(t){window.console&&window.console.log&&window.console.log(t)}},{key:"logGroup",value:function(t){window.console&&window.console.group&&window.console.group(t)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e)}},{key:"remove",value:function(t){return t.parentNode&&t.parentNode.removeChild(t),t}},{key:"getValue",value:function(t){return t.value}},{key:"createElement",value:function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(t){return t instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(t){var e,n=b||(b=document.querySelector("base"))?b.getAttribute("href"):null;return null==n?null:(e=n,o||(o=document.createElement("a")),o.setAttribute("href",e),"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname)}},{key:"resetBaseElement",value:function(){b=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(t){return Object(m.r)(document.cookie,t)}}],[{key:"makeCurrent",value:function(){Object(m.s)(new n)}}]),n}(function(t){h(n,t);var e=d(n);function n(){return s(this,n),e.call(this)}return c(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(m.o)),b=null,w=new p.q("TRANSITION_ID"),E=[{provide:p.d,useFactory:function(t,e,n){return function(){n.get(p.e).donePromise.then((function(){var n=Object(m.q)();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter((function(e){return e.getAttribute("ng-transition")===t})).forEach((function(t){return n.remove(t)}))}))}},deps:[w,m.c,p.r],multi:!0}],C=function(){function t(){s(this,t)}return c(t,[{key:"addToWindow",value:function(t){p.nb.getAngularTestability=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},p.nb.getAllAngularTestabilities=function(){return t.getAllTestabilities()},p.nb.getAllAngularRootElements=function(){return t.getAllRootElements()},p.nb.frameworkStabilizers||(p.nb.frameworkStabilizers=[]),p.nb.frameworkStabilizers.push((function(t){var e=p.nb.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach((function(t){t.whenStable(i)}))}))}},{key:"findTestabilityInTree",value:function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?Object(m.q)().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}],[{key:"init",value:function(){Object(p.W)(new t)}}]),t}(),k=new p.q("EventManagerPlugins"),S=((a=function(){function t(e,n){var r=this;s(this,t),this._zone=n,this._eventNameToPlugin=new Map,e.forEach((function(t){return t.manager=r})),this._plugins=e.slice().reverse()}return c(t,[{key:"addEventListener",value:function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}},{key:"addGlobalEventListener",value:function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event "+t)}}]),t}()).\u0275fac=function(t){return new(t||a)(p.Pb(k),p.Pb(p.z))},a.\u0275prov=p.Eb({token:a,factory:a.\u0275fac}),a),T=function(){function t(e){s(this,t),this._doc=e}return c(t,[{key:"addGlobalEventListener",value:function(t,e,n){var r=Object(m.q)().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(e));return this.addEventListener(r,e,n)}}]),t}(),I=((f=function(){function t(){s(this,t),this._stylesSet=new Set}return c(t,[{key:"addStyles",value:function(t){var e=this,n=new Set;t.forEach((function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(t){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),t}()).\u0275fac=function(t){return new(t||f)},f.\u0275prov=p.Eb({token:f,factory:f.\u0275fac}),f),O=((u=function(t){h(n,t);var e=d(n);function n(t){var r;return s(this,n),(r=e.call(this))._doc=t,r._hostNodes=new Set,r._styleNodes=new Set,r._hostNodes.add(t.head),r}return c(n,[{key:"_addStylesToHost",value:function(t,e){var n=this;t.forEach((function(t){var r=n._doc.createElement("style");r.textContent=t,n._styleNodes.add(e.appendChild(r))}))}},{key:"addHost",value:function(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}},{key:"removeHost",value:function(t){this._hostNodes.delete(t)}},{key:"onStylesAdded",value:function(t){var e=this;this._hostNodes.forEach((function(n){return e._addStylesToHost(t,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(t){return Object(m.q)().remove(t)}))}}]),n}(I)).\u0275fac=function(t){return new(t||u)(p.Pb(m.c))},u.\u0275prov=p.Eb({token:u,factory:u.\u0275fac}),u),A={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},x=/%COMP%/g;function N(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?N(t,i,n):(i=i.replace(x,t),n.push(i))}return n}function P(t){return function(e){if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var D,R,L,j,F=((D=function(){function t(e,n,r){s(this,t),this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new M(e)}return c(t,[{key:"createRenderer",value:function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case p.Q.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new U(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case p.Q.Native:case p.Q.ShadowDom:return new V(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=N(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||D)(p.Pb(S),p.Pb(O),p.Pb(p.c))},D.\u0275prov=p.Eb({token:D,factory:D.\u0275fac}),D),M=function(){function t(e){s(this,t),this.eventManager=e,this.data=Object.create(null)}return c(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,e){return e?document.createElementNS(A[e]||e,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"insertBefore",value:function(t,e,n){t&&t.insertBefore(e,n)}},{key:"removeChild",value:function(t,e){t&&t.removeChild(e)}},{key:"selectRootElement",value:function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'.concat(t,'" did not match any elements'));return e||(n.textContent=""),n}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,e,n,r){if(r){e=r+":"+e;var i=A[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}},{key:"removeAttribute",value:function(t,e,n){if(n){var r=A[n];r?t.removeAttributeNS(r,e):t.removeAttribute("".concat(n,":").concat(e))}else t.removeAttribute(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setStyle",value:function(t,e,n,r){r&p.F.DashCase?t.style.setProperty(e,n,r&p.F.Important?"important":""):t.style[e]=n}},{key:"removeStyle",value:function(t,e,n){n&p.F.DashCase?t.style.removeProperty(e):t.style[e]=""}},{key:"setProperty",value:function(t,e,n){t[e]=n}},{key:"setValue",value:function(t,e){t.nodeValue=e}},{key:"listen",value:function(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,P(n)):this.eventManager.addEventListener(t,e,P(n))}}]),t}(),U=function(t){h(n,t);var e=d(n);function n(t,r,i,o){var a;s(this,n),(a=e.call(this,t)).component=i;var u,c=N(o+"-"+i.id,i.styles,[]);return r.addStyles(c),a.contentAttr="_ngcontent-%COMP%".replace(x,o+"-"+i.id),a.hostAttr=(u=o+"-"+i.id,"_nghost-%COMP%".replace(x,u)),a}return c(n,[{key:"applyToHost",value:function(t){l(g(n.prototype),"setAttribute",this).call(this,t,this.hostAttr,"")}},{key:"createElement",value:function(t,e){var r=l(g(n.prototype),"createElement",this).call(this,t,e);return l(g(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(M),V=function(t){h(n,t);var e=d(n);function n(t,r,i,o){var a;s(this,n),(a=e.call(this,t)).sharedStylesHost=r,a.hostEl=i,a.component=o,a.shadowRoot=o.encapsulation===p.Q.ShadowDom?i.attachShadow({mode:"open"}):i.createShadowRoot(),a.sharedStylesHost.addHost(a.shadowRoot);for(var u=N(o.id,o.styles,[]),c=0;c<u.length;c++){var l=document.createElement("style");l.textContent=u[c],a.shadowRoot.appendChild(l)}return a}return c(n,[{key:"nodeOrShadowRoot",value:function(t){return t===this.hostEl?this.shadowRoot:t}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(t,e){return l(g(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"insertBefore",value:function(t,e,r){return l(g(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(t),e,r)}},{key:"removeChild",value:function(t,e){return l(g(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(t),e)}},{key:"parentNode",value:function(t){return this.nodeOrShadowRoot(l(g(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(t)))}}]),n}(M),q=((R=function(t){h(n,t);var e=d(n);function n(t){return s(this,n),e.call(this,t)}return c(n,[{key:"supports",value:function(t){return!0}},{key:"addEventListener",value:function(t,e,n){var r=this;return t.addEventListener(e,n,!1),function(){return r.removeEventListener(t,e,n)}}},{key:"removeEventListener",value:function(t,e,n){return t.removeEventListener(e,n)}}]),n}(T)).\u0275fac=function(t){return new(t||R)(p.Pb(m.c))},R.\u0275prov=p.Eb({token:R,factory:R.\u0275fac}),R),H=["alt","control","meta","shift"],B={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},W={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},Q=((L=function(t){h(n,t);var e=d(n);function n(t){return s(this,n),e.call(this,t)}return c(n,[{key:"supports",value:function(t){return null!=n.parseEventName(t)}},{key:"addEventListener",value:function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return Object(m.q)().onAndCancel(t,i.domEventName,o)}))}}],[{key:"parseEventName",value:function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if(H.forEach((function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")})),o+=i,0!=e.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(t){var e="",n=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&z.hasOwnProperty(e)&&(e=z[e]))}return B[e]||e}(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),H.forEach((function(r){r!=n&&(0,W[r])(t)&&(e+=r+".")})),e+=n}},{key:"eventCallback",value:function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded((function(){return e(i)}))}}},{key:"_normalizeKey",value:function(t){switch(t){case"esc":return"escape";default:return t}}}]),n}(T)).\u0275fac=function(t){return new(t||L)(p.Pb(m.c))},L.\u0275prov=p.Eb({token:L,factory:L.\u0275fac}),L),G=[{provide:p.B,useValue:m.p},{provide:p.C,useValue:function(){_.makeCurrent(),C.init()},multi:!0},{provide:m.c,useFactory:function(){return Object(p.sb)(document),document},deps:[]}],K=Object(p.R)(p.V,"browser",G),Y=[[],{provide:p.Y,useValue:"root"},{provide:p.m,useFactory:function(){return new p.m},deps:[]},{provide:k,useClass:q,multi:!0,deps:[m.c,p.z,p.B]},{provide:k,useClass:Q,multi:!0,deps:[m.c]},[],{provide:F,useClass:F,deps:[S,O,p.c]},{provide:p.E,useExisting:F},{provide:I,useExisting:O},{provide:O,useClass:O,deps:[m.c]},{provide:p.L,useClass:p.L,deps:[p.z]},{provide:S,useClass:S,deps:[k,p.z]},[]],X=((j=function(){function t(e){if(s(this,t),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return c(t,null,[{key:"withServerTransition",value:function(e){return{ngModule:t,providers:[{provide:p.c,useValue:e.appId},{provide:w,useExisting:p.c},E]}}}]),t}()).\u0275mod=p.Gb({type:j}),j.\u0275inj=p.Fb({factory:function(t){return new(t||j)(p.Pb(j,12))},providers:Y,imports:[m.b,p.f]}),j);"undefined"!=typeof window&&window;var Z=r("tk/3"),J=r("spgP"),$=r("D0XW"),tt=r("HDdC"),et=r("LRne"),nt=r("VRyK"),rt=r("lJxs"),it=r("w1tV"),ot=r("eIep"),at=r("Kqap"),st=r("7o/Q"),ut=function(){function t(e,n){s(this,t),this.compare=e,this.keySelector=n}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new ct(t,this.compare,this.keySelector))}}]),t}(),ct=function(t){h(n,t);var e=d(n);function n(t,r,i){var o;return s(this,n),(o=e.call(this,t)).keySelector=i,o.hasKey=!1,"function"==typeof r&&(o.compare=r),o}return c(n,[{key:"compare",value:function(t,e){return t===e}},{key:"_next",value:function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}]),n}(st.a),lt=r("l7GE"),ht=r("ZUHj"),ft=function(){function t(e,n){s(this,t),this.observables=e,this.project=n}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new dt(t,this.observables,this.project))}}]),t}(),dt=function(t){h(n,t);var e=d(n);function n(t,r,i){var o;s(this,n),(o=e.call(this,t)).observables=r,o.project=i,o.toRespond=[];var a=r.length;o.values=new Array(a);for(var u=0;u<a;u++)o.toRespond.push(u);for(var c=0;c<a;c++){var l=r[c];o.add(Object(ht.a)(v(o),l,void 0,c))}return o}return c(n,[{key:"notifyNext",value:function(t,e,n){this.values[n]=e;var r=this.toRespond;if(r.length>0){var i=r.indexOf(n);-1!==i&&r.splice(i,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(t){if(0===this.toRespond.length){var e=[t].concat(i(this.values));this.project?this._tryProject(e):this.destination.next(e)}}},{key:"_tryProject",value:function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(lt.a),pt=function(){function t(e){s(this,t),this.predicate=e}return c(t,[{key:"call",value:function(t,e){return e.subscribe(new vt(t,this.predicate))}}]),t}(),vt=function(t){h(n,t);var e=d(n);function n(t,r){var i;return s(this,n),(i=e.call(this,t)).predicate=r,i.skipping=!0,i.index=0,i}return c(n,[{key:"_next",value:function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}},{key:"tryCallPredicate",value:function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}}}]),n}(st.a);function yt(t){return null==t}function gt(t){return"function"==typeof t.set}function mt(t,e){return gt(e)?e:t.ref(e)}function _t(t,e){if("string"==typeof t)return e.stringCase();if(gt(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function bt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$.a;return new tt.a((function(i){var o;return o=t[n](e,(function(t,e){r.schedule((function(){i.next({snapshot:t,prevKey:e})})),"once"===n&&r.schedule((function(){return i.complete()}))}),(function(t){r.schedule((function(){return i.error(t)}))})),"on"===n?{unsubscribe:function(){null!=o&&t.off(e,o)}}:{unsubscribe:function(){}}})).pipe(Object(rt.a)((function(t){var n=t.snapshot,r=t.prevKey,i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}})),Object(it.a)())}function wt(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Et(t,e){var n=e.payload,r=e.prevKey,o=e.key,a=wt(t,o),s=function(t,e){if(yt(e))return 0;var n=wt(t,e);return-1===n?t.length:n+1}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){var u=null;e.payload.forEach((function(e){var n={payload:e,type:"value",prevKey:u,key:e.key};return u=e.key,t=[].concat(i(t),[n]),!1}))}return t;case"child_added":if(a>-1){var c=t[a-1];(c&&c.key||null)!==r&&(t=t.filter((function(t){return t.payload.key!==n.key}))).splice(s,0,e)}else{if(null==r)return[e].concat(i(t));(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter((function(t){return t.payload.key!==n.key}));case"child_changed":return t.map((function(t){return t.payload.key===o?e:t}));case"child_moved":if(a>-1){var l=t.splice(a,1)[0];return(t=t.slice()).splice(s,0,l),t}return t;default:return t}}function Ct(t){return(yt(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function kt(t,e,n){return function(t,e,n){return bt(t,"value","once",n).pipe(Object(ot.a)((function(r){var i=[Object(et.a)(r)];return e.forEach((function(e){return i.push(bt(t,e,"on",n))})),Object(nt.a).apply(void 0,i).pipe(Object(at.a)(Et,[]))})),(function(t){return t.lift(new ut(void 0,void 0))}))}(t,e=Ct(e),n)}function St(t,e,n){var r=(e=Ct(e)).map((function(e){return bt(t,e,"on",n)}));return Object(nt.a).apply(void 0,i(r))}function Tt(t,e){return function(n,r){return _t(n,{stringCase:function(){return t.child(n)[e](r)},firebaseCase:function(){return n[e](r)},snapshotCase:function(){return n.ref[e](r)}})}}function It(t,e){return function(){return bt(t,"value","on",e)}}r("NSPt");var Ot,At,xt=new p.q("angularfire2.realtimeDatabaseURL"),Nt=((At=function(){function e(t,n,r,i,o){s(this,e),this.schedulers=new J.d(o),this.keepUnstableUntilFirst=Object(J.f)(this.schedulers),this.database=o.runOutsideAngular((function(){return Object(J.e)(t,o,n).database(r||void 0)}))}return c(e,[{key:"list",value:function(e,n){var r=mt(this.database,e),o=r;return n&&(o=n(r)),function(e,n){var r,o=n.schedulers.outsideAngular,a=n.schedulers.ngZone.run((function(){return e.ref}));return{query:e,update:Tt(a,"update"),set:Tt(a,"set"),push:function(t){return a.push(t)},remove:(r=a,function(t){return t?_t(t,{stringCase:function(){return r.child(t).remove()},firebaseCase:function(){return t.remove()},snapshotCase:function(){return t.ref.remove()}}):r.remove()}),snapshotChanges:function(t){return kt(e,t,o).pipe(n.keepUnstableUntilFirst)},stateChanges:function(t){return St(e,t,o).pipe(n.keepUnstableUntilFirst)},auditTrail:function(r){return function(e,n,r){return function(e,n,r){return function(t,e){return bt(t,"value","on",e).pipe(Object(rt.a)((function(t){var e;return t.payload.forEach((function(t){return e=t.key,!1})),{data:t,lastKeyToLoad:e}})))}(e,r).pipe(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new ft(e,n))}}(n),Object(rt.a)((function(e){var n=t(e,2),r=n[0],i=n[1],o=r.lastKeyToLoad,a=i.map((function(t){return t.key}));return{actions:i,lastKeyToLoad:o,loadedKeys:a}})),(i=function(t){return-1===t.loadedKeys.indexOf(t.lastKeyToLoad)},function(t){return t.lift(new pt(i))}),Object(rt.a)((function(t){return t.actions})));var i}(e,St(e,n).pipe(Object(at.a)((function(t,e){return[].concat(i(t),[e])}),[])),r)}(e,r,o).pipe(n.keepUnstableUntilFirst)},valueChanges:function(t){return kt(e,t,o).pipe(Object(rt.a)((function(t){return t.map((function(t){return t.payload.val()}))})),n.keepUnstableUntilFirst)}}}(o,this)}},{key:"object",value:function(t){var e,n,r=mt(this.database,t);return n=this,{query:e=r,snapshotChanges:function(){return It(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst)},update:function(t){return e.ref.update(t)},set:function(t){return e.ref.set(t)},remove:function(){return e.ref.remove()},valueChanges:function(){return It(e,n.schedulers.outsideAngular)().pipe(n.keepUnstableUntilFirst,Object(rt.a)((function(t){return t.payload.exists()?t.payload.val():null})))}}}},{key:"createPushId",value:function(){return this.database.ref().push().key}}]),e}()).\u0275fac=function(t){return new(t||At)(p.Pb(J.c),p.Pb(J.b,8),p.Pb(xt,8),p.Pb(p.B),p.Pb(p.z))},At.\u0275prov=Object(p.Eb)({factory:function(){return new At(Object(p.Pb)(J.c),Object(p.Pb)(J.b,8),Object(p.Pb)(xt,8),Object(p.Pb)(p.B),Object(p.Pb)(p.z))},token:At,providedIn:"any"}),At),Pt=((Ot=function t(){s(this,t)}).\u0275mod=p.Gb({type:Ot}),Ot.\u0275inj=p.Fb({factory:function(t){return new(t||Ot)},providers:[Nt]}),Ot),Dt=r("IYfF"),Rt=r("tyNb"),Lt=r("T/S4");function jt(t,e){if(1&t&&(p.Lb(0,"div"),p.Lb(1,"p"),p.Lb(2,"span"),p.ec(3,"Name: "),p.Kb(),p.Lb(4,"span"),p.ec(5),p.Kb(),p.Kb(),p.Lb(6,"p"),p.Lb(7,"span"),p.ec(8,"Phone: "),p.Kb(),p.Lb(9,"span"),p.ec(10),p.Kb(),p.Kb(),p.Lb(11,"p"),p.Lb(12,"span"),p.ec(13,"Email: "),p.Kb(),p.Lb(14,"span"),p.ec(15),p.Kb(),p.Kb(),p.Kb()),2&t){var n=e.$implicit;p.yb(5),p.fc(n.name),p.yb(5),p.fc(n.phone),p.yb(5),p.fc(n.email)}}var Ft,Mt=((Ft=function(){function t(e){s(this,t),this.firestore=e}return c(t,[{key:"ngOnInit",value:function(){this.userDetails()}},{key:"userDetails",value:function(){var t=this,e=JSON.parse(localStorage.getItem("userData"));e&&this.firestore.getRegistration(e.email).subscribe((function(e){t.userInfo=e.map((function(t){return Object.assign({id:t.payload.doc.id},t.payload.doc.data())})),localStorage.setItem("userAdditionalData",JSON.stringify(t.userInfo))}))}},{key:"ngOnDestroy",value:function(){localStorage.removeItem("userAdditionalData")}}]),t}()).\u0275fac=function(t){return new(t||Ft)(p.Ib(Lt.a))},Ft.\u0275cmp=p.Cb({type:Ft,selectors:[["app-user-info"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&p.dc(0,jt,16,3,"div",0),2&t&&p.Xb("ngForOf",e.userInfo)},directives:[m.i],encapsulation:2}),Ft),Ut=function(){return["/products"]};function Vt(t,e){1&t&&(p.Lb(0,"div",2),p.ec(1,"Products"),p.Kb()),2&t&&p.Xb("routerLink",p.Yb(1,Ut))}var qt=function(){return["/services"]};function Ht(t,e){1&t&&(p.Lb(0,"div",2),p.ec(1,"Services"),p.Kb()),2&t&&p.Xb("routerLink",p.Yb(1,qt))}var Bt=function(){return["/gallery"]};function zt(t,e){1&t&&(p.Lb(0,"div",2),p.ec(1,"Callery"),p.Kb()),2&t&&p.Xb("routerLink",p.Yb(1,Bt))}var Wt=function(){return["/signin"]};function Qt(t,e){1&t&&(p.Lb(0,"div",2),p.ec(1,"Signin"),p.Kb()),2&t&&p.Xb("routerLink",p.Yb(1,Wt))}var Gt=function(){return["/signup"]};function Kt(t,e){1&t&&(p.Lb(0,"div",2),p.ec(1,"Signup"),p.Kb()),2&t&&p.Xb("routerLink",p.Yb(1,Gt))}function Yt(t,e){if(1&t){var n=p.Mb();p.Lb(0,"div",6),p.Sb("click",(function(){return p.ac(n),p.Ub().onLogout()})),p.ec(1,"Logout"),p.Kb()}}function Xt(t,e){1&t&&(p.Lb(0,"div"),p.Jb(1,"app-user-info"),p.Kb())}var Zt,Jt,$t,te,ee,ne,re=function(){return["/home"]},ie=function(){return["/comments"]},oe=function(){return["/contacts"]},ae=(($t=function(){function t(e,n){s(this,t),this.authService=e,this.router=n,this.isAuth=!1}return c(t,[{key:"ngOnInit",value:function(){var t=this;this.subUser=this.authService.user.subscribe((function(e){t.isAuth=!!e}))}},{key:"ngOnDestroy",value:function(){this.subUser.unsubscribe()}},{key:"onLogout",value:function(){this.authService.logout(),this.router.navigate(["/signin"])}}]),t}()).\u0275fac=function(t){return new(t||$t)(p.Ib(Dt.a),p.Ib(Rt.c))},$t.\u0275cmp=p.Cb({type:$t,selectors:[["app-header"]],decls:15,vars:13,consts:[[1,"container","navigation-container"],[1,"navigation"],["routerLinkActive","nav-active",3,"routerLink"],["routerLinkActive","nav-active",3,"routerLink",4,"ngIf"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"]],template:function(t,e){1&t&&(p.Lb(0,"div",0),p.Lb(1,"div",1),p.Lb(2,"div",2),p.ec(3,"Home"),p.Kb(),p.dc(4,Vt,2,2,"div",3),p.dc(5,Ht,2,2,"div",3),p.dc(6,zt,2,2,"div",3),p.Lb(7,"div",2),p.ec(8,"Comments"),p.Kb(),p.Lb(9,"div",2),p.ec(10,"Contacts"),p.Kb(),p.dc(11,Qt,2,2,"div",3),p.dc(12,Kt,2,2,"div",3),p.dc(13,Yt,2,0,"div",4),p.Kb(),p.dc(14,Xt,2,0,"div",5),p.Kb()),2&t&&(p.yb(2),p.Xb("routerLink",p.Yb(10,re)),p.yb(2),p.Xb("ngIf",e.isAuth),p.yb(1),p.Xb("ngIf",e.isAuth),p.yb(1),p.Xb("ngIf",e.isAuth),p.yb(1),p.Xb("routerLink",p.Yb(11,ie)),p.yb(2),p.Xb("routerLink",p.Yb(12,oe)),p.yb(2),p.Xb("ngIf",!e.isAuth),p.yb(1),p.Xb("ngIf",!e.isAuth),p.yb(1),p.Xb("ngIf",e.isAuth),p.yb(1),p.Xb("ngIf",e.isAuth))},directives:[Rt.e,Rt.d,m.j,Mt],encapsulation:2}),$t),se=((Jt=function(){function t(){s(this,t)}return c(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||Jt)},Jt.\u0275cmp=p.Cb({type:Jt,selectors:[["app-footer"]],decls:48,vars:0,consts:[[1,"container","footer-banner"],[1,"footer-banner-info"],[1,"footer-banner-btn"],[1,"footer-bg"],[1,"container"],[1,"footer-info"],[1,"footer-main"],[1,"footer-title"],[1,"footer-about"],[1,"footer-social"],[1,"footer-follow"],[1,"f1"],[1,"f2"],[1,"f3"],[1,"f4"],[1,"footer-copyright"],["src","../../assets/img/footer/footer-copyright.png"]],template:function(t,e){1&t&&(p.Lb(0,"div",0),p.Lb(1,"div",1),p.Lb(2,"h3"),p.ec(3,"Example"),p.Kb(),p.Lb(4,"p"),p.ec(5," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consequuntur earum quos tenetur nostrum cupiditate ratione incidunt culpa ipsum delectus? "),p.Kb(),p.Kb(),p.Lb(6,"div",2),p.ec(7,"\u25ba"),p.Kb(),p.Kb(),p.Lb(8,"div",3),p.Lb(9,"div",4),p.Lb(10,"div",5),p.Lb(11,"div",6),p.Lb(12,"ul"),p.Lb(13,"li",7),p.ec(14,"Main Menu"),p.Kb(),p.Lb(15,"li"),p.ec(16,"Home"),p.Kb(),p.Lb(17,"li"),p.ec(18,"About Us"),p.Kb(),p.Lb(19,"li"),p.ec(20,"Directory"),p.Kb(),p.Lb(21,"li"),p.ec(22,"Blog"),p.Kb(),p.Lb(23,"li"),p.ec(24,"Our Services"),p.Kb(),p.Kb(),p.Kb(),p.Lb(25,"div",8),p.Lb(26,"ul"),p.Lb(27,"li",7),p.ec(28,"About Us"),p.Kb(),p.Lb(29,"li"),p.ec(30,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Amet facere ipsam molestiae assumenda doloremque exercitationem omnis, reprehenderit, nobis pariatur dolores."),p.Kb(),p.Lb(31,"li"),p.ec(32,"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Possimus nemo eaque."),p.Kb(),p.Kb(),p.Kb(),p.Lb(33,"div",9),p.Lb(34,"ul"),p.Lb(35,"li",7),p.ec(36,"Follow Us"),p.Kb(),p.Lb(37,"li"),p.ec(38,"Lorem, ipsum dolor sit amet consectetur adipisicing."),p.Kb(),p.Kb(),p.Lb(39,"div",10),p.Jb(40,"div",11),p.Jb(41,"div",12),p.Jb(42,"div",13),p.Jb(43,"div",14),p.Kb(),p.Kb(),p.Kb(),p.Kb(),p.Lb(44,"div",15),p.Jb(45,"img",16),p.Lb(46,"p"),p.ec(47,"Some Copyright \xa9 Text"),p.Kb(),p.Kb(),p.Kb())},encapsulation:2}),Jt),ue=((Zt=function(){function t(e){s(this,t),this.authService=e,this.title="Motors"}return c(t,[{key:"ngOnInit",value:function(){this.authService.autoLogin()}}]),t}()).\u0275fac=function(t){return new(t||Zt)(p.Ib(Dt.a))},Zt.\u0275cmp=p.Cb({type:Zt,selectors:[["app-root"]],decls:3,vars:0,template:function(t,e){1&t&&(p.Jb(0,"app-header"),p.Jb(1,"router-outlet"),p.Jb(2,"app-footer"))},directives:[ae,Rt.g,se],styles:[""]}),Zt),ce=[{path:"",redirectTo:"/signin",pathMatch:"full"},{path:"home",loadChildren:function(){return r.e(11).then(r.bind(null,"ct+p")).then((function(t){return t.HomeModule}))}},{path:"products",loadChildren:function(){return Promise.all([r.e(0),r.e(7)]).then(r.bind(null,"WLUK")).then((function(t){return t.ProductsModule}))}},{path:"services",loadChildren:function(){return Promise.all([r.e(0),r.e(12)]).then(r.bind(null,"334H")).then((function(t){return t.ServicesModule}))}},{path:"gallery",loadChildren:function(){return Promise.all([r.e(0),r.e(10)]).then(r.bind(null,"3ros")).then((function(t){return t.GalleryModule}))}},{path:"comments",loadChildren:function(){return Promise.all([r.e(2),r.e(8)]).then(r.bind(null,"UyQ7")).then((function(t){return t.CommentsModule}))}},{path:"contacts",loadChildren:function(){return r.e(9).then(r.bind(null,"1s7i")).then((function(t){return t.ContactsModule}))}},{path:"signup",loadChildren:function(){return Promise.all([r.e(2),r.e(0),r.e(14)]).then(r.bind(null,"T9iC")).then((function(t){return t.SignupModule}))}},{path:"signin",loadChildren:function(){return Promise.all([r.e(2),r.e(0),r.e(13)]).then(r.bind(null,"0m0A")).then((function(t){return t.SigninModule}))}},{path:"**",redirectTo:"/signin"}],le=((ne=function t(){s(this,t)}).\u0275mod=p.Gb({type:ne}),ne.\u0275inj=p.Fb({factory:function(t){return new(t||ne)},imports:[[Rt.f.forRoot(ce,{preloadingStrategy:Rt.b})],Rt.f]}),ne),he=((ee=function t(){s(this,t)}).\u0275mod=p.Gb({type:ee}),ee.\u0275inj=p.Fb({factory:function(t){return new(t||ee)},imports:[[m.b,le]]}),ee),fe=((te=function t(){s(this,t)}).\u0275mod=p.Gb({type:te,bootstrap:[ue]}),te.\u0275inj=p.Fb({factory:function(t){return new(t||te)},providers:[],imports:[[he,X,Z.b,le,J.a.initializeApp(y.a.firebaseConfig),Pt]]}),te);y.a.production&&Object(p.S)(),K().bootstrapModule(fe).catch((function(t){return console.error(t)}))},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mAIw"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}var p=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,v.prototype.create),i}return r.__extends(e,t),e}(Error),v=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?y(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new p(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}();function y(t,e){return t.replace(g,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var g=/\{\$([^}]+)}/g;function m(t){return JSON.parse(t)}var _=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=m(c(o[0])||""),n=m(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}},b=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^s&(u^c),o=1518500249):(i=s^u^c,o=1859775393):r<60?(i=s&u|c&(s|u),o=2400959708):(i=s^u^c,o=3395469782);var h=(a<<5|a>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),w=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=E),void 0===r.error&&(r.error=E),void 0===r.complete&&(r.complete=E);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function E(){}function C(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=v,e.FirebaseError=p,e.MAX_VALUE_MILLIS=144e5,e.RANDOM_FACTOR=.5,e.Sha1=b,e.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},e.assert=o,e.assertionError=a,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.calculateBackoffMillis=function(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new w(t,e);return n.subscribe.bind(n)},e.decode=_,e.deepCopy=function(t){return l(void 0,t)},e.deepExtend=l,e.errorPrefix=C,e.getUA=f,e.isAdmin=function(t){var e=_(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return f().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!=indexedDB},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNode=d,e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isSafari=function(){return!d()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},e.isUWP=function(){return f().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=_(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=_(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=_(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=m,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(t,e,r)+"must be a valid context object.")},e.validateIndexedDBOpenable=function(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(C(t,e,r)+"must be a valid firebase namespace.")}},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return l}));var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD"),a=function(t){h(n,t);var e=d(n);function n(t){var r;return s(this,n),(r=e.call(this)).parent=t,r}return c(n,[{key:"_next",value:function(t){this.parent.notifyNext(t)}},{key:"_error",value:function(t){this.parent.notifyError(t),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(r.a),u=function(t){h(n,t);var e=d(n);function n(){return s(this,n),e.apply(this,arguments)}return c(n,[{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyError",value:function(t){this.destination.error(t)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(r.a);function l(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,1]]])}();