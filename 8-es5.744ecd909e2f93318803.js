!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{UyQ7:function(n,r,o){"use strict";o.r(r),o.d(r,"CommentsModule",(function(){return I}));var i=o("ofXK"),b=o("3Pt+"),a=o("tyNb"),c=o("fXoL"),m=o("T/S4"),s=o("IYfF"),u=o("zy28");function l(e,t){1&e&&c.Jb(0,"app-loading-spinner")}function d(e,t){if(1&e&&(c.Lb(0,"div",17),c.Lb(1,"div",9),c.Lb(2,"p",10),c.ec(3),c.Kb(),c.Lb(4,"p",11),c.ec(5),c.Vb(6,"date"),c.Vb(7,"date"),c.Kb(),c.Kb(),c.Lb(8,"div",12),c.Lb(9,"p"),c.ec(10),c.Kb(),c.Kb(),c.Kb()),2&e){var n=t.$implicit;c.yb(3),c.gc(" ",n.name," "),c.yb(2),c.hc(" ",c.Wb(6,4,n.date,"dd.MM.yyyy")," at ",c.Wb(7,7,n.date,"HH:mm")," "),c.yb(5),c.fc(n.comment)}}function f(e,t){if(1&e){var n=c.Mb();c.Lb(0,"button",18),c.Sb("click",(function(){c.ac(n);var e=c.Ub().$implicit;return c.Ub().reply(e.id)})),c.ec(1,"Reply"),c.Kb()}}function p(e,t){if(1&e){var n=c.Mb();c.Lb(0,"button",18),c.Sb("click",(function(){return c.ac(n),c.Ub(2).isReply=null})),c.ec(1,"Colse Reply"),c.Kb()}}function y(e,t){if(1&e){var n=c.Mb();c.Lb(0,"form",19),c.Sb("ngSubmit",(function(){c.ac(n);var e=c.Ub().$implicit,t=c.Ub();return t.onReply(e.name,e.date,e.comment,e.id,t.replyForm)})),c.Lb(1,"div"),c.Jb(2,"textarea",20),c.Kb(),c.Lb(3,"div"),c.Lb(4,"button",21),c.ec(5,"Add your comment"),c.Kb(),c.Kb(),c.Lb(6,"p",22),c.ec(7),c.Kb(),c.Kb()}if(2&e){var r=c.Ub(2);c.Xb("formGroup",r.replyForm),c.yb(4),c.Xb("disabled",!r.replyForm.valid),c.yb(3),c.fc(r.errorMsg)}}function v(e,t){if(1&e&&(c.Lb(0,"div",8),c.Lb(1,"div",9),c.Lb(2,"p",10),c.ec(3),c.Kb(),c.Lb(4,"p",11),c.ec(5),c.Vb(6,"date"),c.Vb(7,"date"),c.Kb(),c.Kb(),c.Lb(8,"div",12),c.Lb(9,"p"),c.ec(10),c.Kb(),c.Lb(11,"div",13),c.dc(12,d,11,10,"div",14),c.Kb(),c.Lb(13,"div"),c.dc(14,f,2,0,"button",15),c.dc(15,p,2,0,"button",15),c.Kb(),c.dc(16,y,8,3,"form",16),c.Kb(),c.Kb()),2&e){var n=t.$implicit,r=c.Ub();c.yb(3),c.gc(" ",n.name," "),c.yb(2),c.hc(" ",c.Wb(6,8,n.date,"dd.MM.yyyy")," at ",c.Wb(7,11,n.date,"HH:mm")," "),c.yb(5),c.fc(n.comment),c.yb(2),c.Xb("ngForOf",n.replies),c.yb(2),c.Xb("ngIf",r.isAuth),c.yb(1),c.Xb("ngIf",r.isReply==n.id),c.yb(1),c.Xb("ngIf",r.isReply==n.id)}}function g(e,t){1&e&&(c.Lb(0,"div",23),c.Lb(1,"p"),c.ec(2,"Please Sign in to add your comment!"),c.Kb(),c.Kb())}function h(e,t){if(1&e){var n=c.Mb();c.Lb(0,"form",24),c.Sb("ngSubmit",(function(){c.ac(n);var e=c.Ub();return e.onSubmit(e.postForm)})),c.Lb(1,"div"),c.Jb(2,"textarea",25),c.Kb(),c.Lb(3,"div"),c.Lb(4,"button",21),c.ec(5,"Add your comment"),c.Kb(),c.Kb(),c.Lb(6,"p",22),c.ec(7),c.Kb(),c.Kb()}if(2&e){var r=c.Ub();c.Xb("formGroup",r.postForm),c.yb(4),c.Xb("disabled",!r.postForm.valid),c.yb(3),c.fc(r.errorMsg)}}var L,K,F=((L=function(){function n(t,r,o){e(this,n),this.firestore=t,this.formBuilder=r,this.authService=o,this.isAuth=!1,this.isLoading=!1,this.errorMsg=null,this.isReply=null}var r,o,i;return r=n,(o=[{key:"ngOnInit",value:function(){var e=this;this.subUser=this.authService.user.subscribe((function(t){e.isAuth=!!t})),this.isLoading=!0,this.firestore.getComments().subscribe((function(t){e.comments=t.map((function(e){return Object.assign({id:e.payload.doc.id},e.payload.doc.data())})),e.isLoading=!1,e.errorMsg=null}),(function(t){e.isLoading=!1,e.errorMsg=t})),this.postForm=this.formBuilder.group({commentArea:new b.c(null,b.k.required)}),this.replyForm=this.formBuilder.group({replyArea:new b.c(null,b.k.required)})}},{key:"ngOnDestroy",value:function(){this.subUser.unsubscribe()}},{key:"onSubmit",value:function(e){var t=this;if(this.postForm.valid){var n=JSON.parse(localStorage.getItem("userAdditionalData"));if(n){var r=n[0].name,o=(new Date).toLocaleString();this.firestore.createComment({name:r,date:o,comment:e.value.commentArea}).then((function(){t.postForm.reset(),t.errorMsg=null})).catch((function(e){t.errorMsg=e}))}}}},{key:"reply",value:function(e){this.isReply=e}},{key:"onReply",value:function(e,t,n,r,o){var i=this;if(this.replyForm.valid){var b=JSON.parse(localStorage.getItem("userAdditionalData"));if(b){var a={name:e,date:t,comment:n,replies:[{name:b[0].name,date:(new Date).toLocaleString(),comment:o.value.replyArea}],id:r};this.firestore.updateComment(a).then((function(){i.isReply=null,i.replyForm.reset(),i.errorMsg=null})).catch((function(e){i.errorMsg=e}))}}}}])&&t(r.prototype,o),i&&t(r,i),n}()).\u0275fac=function(e){return new(e||L)(c.Ib(m.a),c.Ib(b.b),c.Ib(s.a))},L.\u0275cmp=c.Cb({type:L,selectors:[["app-comments"]],decls:10,vars:4,consts:[[1,"container"],[1,"comments-container",2,"position","relative"],[4,"ngIf"],[1,"comments-count"],["class","comment",4,"ngFor","ngForOf"],[1,"hr-border"],["class","comments-auth",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"comment"],[1,"comment-header"],[1,"comment-name"],[1,"comment-date"],[1,"comment-content"],[1,"comment-replies"],["class","reply",4,"ngFor","ngForOf"],["class","btn-default reply-btn",3,"click",4,"ngIf"],["class","replyForm",3,"formGroup","ngSubmit",4,"ngIf"],[1,"reply"],[1,"btn-default","reply-btn",3,"click"],[1,"replyForm",3,"formGroup","ngSubmit"],["placeholder","Type your reply...","formControlName","replyArea",1,"comments-textarea"],["type","submit",1,"btn-default","btn-default-center",3,"disabled"],[1,"error-msg"],[1,"comments-auth"],[3,"formGroup","ngSubmit"],["placeholder","Type your comment...","formControlName","commentArea",1,"comments-textarea"]],template:function(e,t){1&e&&(c.Lb(0,"div",0),c.Lb(1,"div",1),c.dc(2,l,1,0,"app-loading-spinner",2),c.Lb(3,"p",3),c.ec(4,"Comments"),c.Kb(),c.Lb(5,"div"),c.dc(6,v,17,14,"div",4),c.Jb(7,"hr",5),c.dc(8,g,3,0,"div",6),c.dc(9,h,8,3,"form",7),c.Kb(),c.Kb(),c.Kb()),2&e&&(c.yb(2),c.Xb("ngIf",t.isLoading),c.yb(4),c.Xb("ngForOf",t.comments),c.yb(2),c.Xb("ngIf",!t.isAuth),c.yb(1),c.Xb("ngIf",t.isAuth))},directives:[i.j,i.i,u.a,b.l,b.h,b.f,b.a,b.g,b.d],pipes:[i.d],encapsulation:2}),L),S=o("PCNd"),I=((K=function t(){e(this,t)}).\u0275mod=c.Gb({type:K}),K.\u0275inj=c.Fb({factory:function(e){return new(e||K)},imports:[[i.b,S.a,b.j,a.f.forChild([{path:"",component:F}])]]}),K)}}])}();